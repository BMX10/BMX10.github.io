<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMX10 | AI Business Master Engine</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- CSS STYLES --- */
        :root { --primary:#0f172a; --primary-light:#1e293b; --accent:#2563eb; --accent-dark:#1d4ed8; --success:#10b981; --warning:#f59e0b; --danger:#ef4444; --bg:#f8fafc; --text:#334155; --border:#cbd5e1; }
        * { box-sizing:border-box; margin:0; padding:0; }
        body { font-family:'Inter',sans-serif; background:var(--bg); color:var(--text); min-height:100vh; overflow-x:hidden; }
        
        /* Sidebar */
        .sidebar { position:fixed; top:0; left:0; bottom:0; width:340px; background:var(--primary); color:white; display:flex; flex-direction:column; padding:20px; overflow-y:auto; border-right:1px solid #334155; z-index:100; }
        .brand { font-family:'Merriweather',serif; font-size:1.8rem; margin-bottom:5px; text-align:center; }
        .brand span { color:var(--accent); }
        .tagline { text-align:center; color:#94a3b8; font-size:0.8rem; margin-bottom:25px; }
        .input-group { margin-bottom:15px; }
        .input-group label { display:block; font-size:0.85rem; margin-bottom:5px; color:#cbd5e1; font-weight:600; }
        select, input { width:100%; padding:10px; border-radius:6px; border:1px solid #475569; background:var(--primary-light); color:white; font-size:0.95rem; }
        .tools-area { border-top:1px solid #334155; padding-top:15px; margin-top:10px; }
        .tool-btn { width:100%; padding:12px; margin-bottom:10px; background:#334155; color:white; border:none; border-radius:6px; cursor:pointer; font-weight:600; text-align:left; display:flex; align-items:center; gap:10px; }
        .tool-btn:hover { background:#475569; }
        .tool-btn.primary { background:var(--accent); }
        .sidebar-footer { margin-top:auto; padding-top:20px; border-top:1px solid #334155; }
        .footer-link { display:block; color:#94a3b8; padding:8px 0; cursor:pointer; font-size:0.85rem; }
        .footer-link:hover { color:var(--accent); }

        /* Main Content */
        .main-content { margin-left:340px; padding:40px; min-height:100vh; max-width:100vw; overflow-x:hidden; }
        .header-panel { display:flex; justify-content:space-between; align-items:center; margin-bottom:30px; border-bottom:2px solid #e2e8f0; padding-bottom:15px; }
        .grid-container { display:grid; grid-template-columns:repeat(auto-fit, minmax(300px, 1fr)); gap:20px; margin-bottom:30px; }
        .card { background:white; padding:25px; border-radius:10px; border:1px solid var(--border); overflow-x:auto; }
        .score-card { text-align:center; border-top:5px solid var(--accent); }
        .score-val { font-size:3rem; font-weight:800; color:var(--primary); }
        
        /* Report Details */
        .report-section-wrapper { background:white; border-radius:12px; padding:30px; margin-top:30px; overflow-x:auto; }
        .section-block { margin-bottom:40px; border-left:4px solid var(--border); padding-left:20px; }
        .section-title { font-size:1.4rem; font-weight:700; color:var(--primary); margin-bottom:15px; font-family:'Merriweather',serif; }
        .section-code { background:var(--primary); color:white; padding:4px 10px; border-radius:4px; font-size:0.9rem; margin-right:10px; }
        .data-row { display:flex; margin-bottom:12px; border-bottom:1px solid #f1f5f9; padding-bottom:12px; }
        .data-label { flex:0 0 220px; font-weight:600; color:#475569; }
        .data-value { flex:1; color:#1e293b; white-space:normal; word-wrap:break-word; }
        
        /* Tables & Extras */
        .compare-table { width:100%; border-collapse:collapse; }
        .compare-table th, .compare-table td { padding:12px; border-bottom:1px solid #e2e8f0; text-align:left; }
        .compare-table th { background:var(--primary); color:white; }
        .match-grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(250px, 1fr)); gap:15px; }
        .match-card { background:white; padding:15px; border:1px solid var(--border); border-radius:8px; }
        .risk-bar-group { margin-bottom:10px; display:flex; align-items:center; }
        .risk-label { width:120px; font-weight:bold; font-size:0.9rem; }
        .progress-bg { flex:1; height:8px; background:#e2e8f0; border-radius:4px; }
        .progress-fill { height:100%; border-radius:4px; }
        
        /* Intro & Logo */
        .rotating-logo { position:fixed; top:15px; right:25px; width:60px; height:60px; z-index:2000; animation:spinLogo 8s linear infinite; border-radius:50%; }
        @keyframes spinLogo { 100% { transform:rotate(360deg); } }
        
        /* Info Pages */
        .info-container { max-width:800px; margin:0 auto; line-height:1.7; color:#334155; }
        .math-box { background:#f8fafc; border-left:4px solid var(--accent); padding:20px; margin:20px 0; }
        
        @media (max-width:1000px) { .sidebar { position:relative; width:100%; height:auto; } .main-content { margin-left:0; } .data-row { flex-direction:column; } }
        @media print { .sidebar, .print-btn, .tools-area { display:none; } .main-content { margin:0; padding:0; } }




/* --- MOBILE FIX FOR INTRO VIDEO --- */

/* 1. Force video to fit inside screen without cutting off (Letterbox mode) */
#introVid {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain !important; /* Key fix: Prevents zooming/cropping */
}

/* 2. Ensure Buttons stay visible and sized correctly on Mobile */
#intro-screen {
    background-color: #000 !important; /* Black background for letterbox bars */
}

@media (max-width: 768px) {
    #playBtn {
        font-size: 1.1rem !important; /* Smaller text on mobile */
        padding: 15px 30px !important; /* Smaller button padding */
        width: auto !important;
        max-width: 80%; /* Prevents button from going off screen */
        z-index: 100001; /* Keeps button on top of video */
        position: relative; /* Ensures clickability */
    }
    
    /* Adjust Skip button position for mobile safe areas */
    #intro-screen button[onclick="skipIntro()"] {
        top: 30px !important;
        right: 20px !important;
        padding: 8px 15px !important;
        font-size: 0.9rem !important;
    }
}
    </style>
</head>
<body>

<div id="errPopup" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);z-index:999999;align-items:center;justify-content:center;">
    <div style="background:white;padding:25px;border-radius:8px;text-align:center;width:300px;">
        <h2 style="margin:0 0 15px 0;color:#ef4444;">&#9888; Error</h2>
        <p id="errMsg" style="color:#334155;margin-bottom:20px;">Message</p>
        <button onclick="document.getElementById('errPopup').style.display='none'" style="background:#2563eb;color:white;border:none;padding:10px 25px;border-radius:5px;cursor:pointer;font-weight:bold;">OK</button>
    </div>
</div>


<!-- CUSTOM ALERT BOX -->
<div id="customAlert" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:999999; justify-content:center; align-items:center;">
    <div style="background:white; padding:25px; border-radius:10px; width:90%; max-width:350px; text-align:center; box-shadow:0 10px 25px rgba(0,0,0,0.2);">
        <div style="font-size:2rem; margin-bottom:10px;">??</div>
        <p id="alertMsg" style="color:#334155; font-size:1rem; margin-bottom:20px; font-weight:600;">Message goes here</p>
        <button onclick="document.getElementById('customAlert').style.display='none'" style="background:#2563eb; color:white; border:none; padding:10px 25px; border-radius:6px; cursor:pointer; font-weight:bold;">OK</button>
    </div>
</div>

    <!-- INTRO LAYER -->
    <div id="intro-screen" style="position:fixed; top:0; left:0; width:100%; height:100%; background:black; z-index:99999; display:flex; justify-content:center; align-items:center;">
        <button id="playBtn" onclick="startIntro()" style="padding:20px 40px; font-size:1.5rem; background:#2563eb; color:white; border:none; border-radius:8px; cursor:pointer; font-weight:bold;">&#9654; PLAY INTRO</button>
        <button onclick="skipIntro()" style="position:absolute; top:20px; right:20px; padding:10px 20px; background:transparent; color:white; border:1px solid white; border-radius:4px; cursor:pointer; z-index:100000;">SKIP &#187;</button>
        <video id="introVid" playsinline style="display:none; width:100%; height:100%; object-fit:cover;">
            <source src="intro.mp4" type="video/mp4">
        </video>
    </div>

    <!-- GLOBAL SCRIPT FOR INTRO -->
    <script>
        function startIntro() {
            var v = document.getElementById("introVid");
            var b = document.getElementById("playBtn");
            if(v) { 
                b.style.display='none'; 
                v.style.display='block'; 
                v.play().catch(e=>{ console.log(e); skipIntro(); }); 
                v.onended=function(){skipIntro();}; 
            }
        }
        function skipIntro() {
            var s = document.getElementById("intro-screen");
            s.style.opacity='0'; setTimeout(function(){s.style.display='none';},500);
        }
    </script>

    <!-- LOGO -->
    <img src="BMX10.png" class="rotating-logo" alt="Logo" onerror="this.style.display='none'">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="brand">BMX<span>10</span></div>
        <div class="tagline">Business Mentors and Xperts</div>
        
        <div class="input-group">
            <label>1. Category Filter</label>
            <select id="catSelect" onchange="filterBizDropdown()">
                <option value="All">All Categories</option><option value="Street Food">Street Food (Stalls)</option><option value="Retail">Retail</option><option value="Food">Food & Beverage</option>
                <option value="Service">Services</option><option value="Manufacturing">Manufacturing</option><option value="Online">Online / Digital</option>
                <option value="Agriculture">Agriculture</option><option value="Education">Education</option>
            </select>
        </div>
        <div class="input-group"><label>2. Select Business</label><select id="bizSelect"></select></div>
       <div class="input-group">
    <label>3. Target State / UT</label>
    <select id="stateSelect">
        <!-- States -->
        <option value="AP">Andhra Pradesh</option>
        <option value="AR">Arunachal Pradesh</option>
        <option value="AS">Assam</option>
        <option value="BR">Bihar</option>
        <option value="CG">Chhattisgarh</option>
        <option value="GA">Goa</option>
        <option value="GJ">Gujarat</option>
        <option value="HR">Haryana</option>
        <option value="HP">Himachal Pradesh</option>
        <option value="JH">Jharkhand</option>
        <option value="KA">Karnataka</option>
        <option value="KL">Kerala</option>
        <option value="MP">Madhya Pradesh</option>
        <option value="MH">Maharashtra</option>
        <option value="MN">Manipur</option>
        <option value="ML">Meghalaya</option>
        <option value="MZ">Mizoram</option>
        <option value="NL">Nagaland</option>
        <option value="OD">Odisha</option>
        <option value="PB">Punjab</option>
        <option value="RJ">Rajasthan</option>
        <option value="SK">Sikkim</option>
        <option value="TN">Tamil Nadu</option>
        <option value="TG">Telangana</option>
        <option value="TR">Tripura</option>
        <option value="UP">Uttar Pradesh</option>
        <option value="UK">Uttarakhand</option>
        <option value="WB">West Bengal</option>
        
        <!-- Union Territories -->
        <option value="AN">Andaman and Nicobar Islands</option>
        <option value="CH">Chandigarh</option>
        <option value="DN">Dadra & Nagar Haveli and Daman & Diu</option>
        <option value="DL">Delhi</option>
        <option value="JK">Jammu and Kashmir</option>
        <option value="LA">Ladakh</option>
        <option value="LD">Lakshadweep</option>
        <option value="PY">Puducherry</option>
    </select>
</div>
        <div class="input-group"><label>4. Location Tier</label><select id="tierSelect"><option value="1.8">Metro (Tier 1)</option><option value="1.3">City (Tier 2)</option><option value="1.0" selected>Town (Tier 3)</option><option value="0.7">Rural</option></select></div>
       <div class="input-group"><label>5. Budget (&#8377;)</label><input type="number" id="budgetInput" value="500000" step="10000"></div>
        <div class="input-group"><label>6. Skill: <span id="skillVal" style="float:right;color:#2563eb;">Medium</span></label><input type="range" id="skillInput" min="1" max="3" value="2" oninput="document.getElementById('skillVal').innerText=['Beginner','Medium','Expert'][this.value-1]"></div>
        
        <div class="tools-area">
           <button class="tool-btn primary" onclick="switchView('analyze'); generateAnalysis();">&#128202; Generate Report</button>
<button class="tool-btn" onclick="switchView('finder')">&#128269; Smart Finder</button>
<button class="tool-btn" onclick="switchView('compare')">&#9878; Comparison</button>
<!-- Add inside .tools-area -->
<button class="tool-btn" onclick="switchView('schemes')">&#127963; Govt Schemes</button>
        </div>
        
        <div class="sidebar-footer">
            <div class="footer-link" onclick="switchView('logic')">&#128202; Behind the Numbers</div>
            <div class="footer-link" onclick="switchView('about')">&#8505; About & Disclaimer</div>
            <div class="footer-link" onclick="switchView('privacy')">&#128274; Privacy Policy</div>
            <div class="footer-link" onclick="switchView('contact')">&#128222; Contact Us</div>
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <!-- WELCOME -->
        <div id="welcomeScreen" class="welcome-screen" style="min-height:80vh; display:flex; flex-direction:column; justify-content:center; align-items:center;">
            <div style="font-size:5rem;">&#128202;</div><h1 style="color:var(--primary);">BMX10 Feasibility Engine</h1>
            <p style="color:#64748b;">Select a business idea or use the tools to generate a 148-point analysis.</p>
        </div>

        <!-- REPORT VIEW -->
        <div id="reportContainer" style="display:none;">
            <div class="header-panel"><div><h1 id="rptTitle">Name</h1><div class="status-badge" id="rptSubtitle">Loc</div></div><button class="print-btn" onclick="window.print()" style="padding:10px;background:#334155;color:white;border:none;">Print</button></div>
            <div class="grid-container">
                <div class="score-card card"><div class="score-val" id="bfiScore">0</div><div class="score-label">Feasibility Score</div><p id="bfiMsg" style="margin-top:10px;font-weight:bold;"></p></div>
                <div class="card"><div style="font-size:0.8rem;font-weight:bold;color:#64748b;">EST. INVESTMENT</div><div style="font-size:1.5rem;font-weight:bold;" id="reqInv">?0</div><div style="font-size:0.8rem;font-weight:bold;color:#64748b;margin-top:15px;">MONTHLY NET PROFIT</div><div style="font-size:1.5rem;font-weight:bold;color:#10b981;" id="estProfit">?0</div></div>
                <div class="card"><div style="font-size:0.8rem;font-weight:bold;color:#64748b;">CAPITAL STATUS</div><div style="font-size:1.2rem;font-weight:bold;" id="capStatus">...</div><div style="font-size:0.8rem;font-weight:bold;color:#64748b;margin-top:15px;">BREAK-EVEN</div><div style="font-size:1.2rem;font-weight:bold;" id="breakEven">0 Months</div></div>
            </div>
          <div class="card" style="margin-bottom:20px; border-left:5px solid #10b981;"><h3>&#127963; Loan Eligibility</h3><div id="loanMatches"></div></div>
<div class="card" style="margin-bottom:20px;"><h3>&#128293; Risk Analysis</h3><div class="risk-container" id="riskBars"></div></div>
<div class="card" style="margin-bottom:20px;"><h3>&#128200; Financials</h3><table class="fin-table" id="cashFlowTable"><thead><tr><th>Metric</th><th>Setup (M1-3)</th><th>Growth (M4-6)</th><th>Stable (M7-12)</th></tr></thead><tbody></tbody></table></div>
<div class="card" style="margin-bottom:20px;"><h3>&#128640; 30-Day Plan</h3><div class="timeline" id="timelineList"></div></div>
            <div class="report-section-wrapper" id="detailedReport"></div>
        </div>

        <!-- FINDER VIEW -->
        <div id="finderView" style="display:none;">
            <h1>Smart Finder</h1>
            <div class="card" style="margin-bottom:20px;"><p id="finderInputs"></p><button onclick="runFinder()" style="padding:10px;background:#2563eb;color:white;border:none;">Refresh Matches</button></div>
            <div id="finderResults" class="match-grid"></div>
        </div>

        <!-- COMPARE VIEW -->
        <div id="compareView" style="display:none;">
            <h1>Compare Businesses</h1>
            <div class="card" style="margin-bottom:20px;"><select id="compBiz1"></select> <select id="compBiz2"></select> <button onclick="runComparison()" style="padding:10px;background:#2563eb;color:white;border:none;">Compare</button></div>
            <div id="comparisonResult"></div>
        </div>


<!-- VIEW: GOVERNMENT SCHEMES (Full List) -->
<div id="schemesView" style="display:none;">
    <div class="header-panel">
        <div>
            <h1 style="color:var(--primary); font-family:'Merriweather',serif; font-size:2rem;">Government Schemes</h1>
            <div class="status-badge" style="background:#e2e8f0; padding:5px 12px; border-radius:15px; display:inline-block; margin-top:5px; font-weight:600; font-size:0.85rem;">Central & State Database</div>
        </div>
    </div>

    <div class="card" style="margin-bottom:20px; background:white; padding:25px; border-radius:10px; border:1px solid var(--border);">
        <label style="font-weight:bold; display:block; margin-bottom:10px; color:#64748b;">Select Region to View Schemes:</label>
        
        <select id="schemeStateSelect" onchange="renderSchemes()" style="width:100%; padding:12px; border-radius:6px; border:1px solid #475569; background:white; color:#334155; font-size:1rem;">
            <option value="Central" selected>-- Central Govt (Pan India) --</option>
            
            <optgroup label="States">
                <option value="AP">Andhra Pradesh</option>
                <option value="AR">Arunachal Pradesh</option>
                <option value="AS">Assam</option>
                <option value="BR">Bihar</option>
                <option value="CG">Chhattisgarh</option>
                <option value="GA">Goa</option>
                <option value="GJ">Gujarat</option>
                <option value="HR">Haryana</option>
                <option value="HP">Himachal Pradesh</option>
                <option value="JH">Jharkhand</option>
                <option value="KA">Karnataka</option>
                <option value="KL">Kerala</option>
                <option value="MP">Madhya Pradesh</option>
                <option value="MH">Maharashtra</option>
                <option value="MN">Manipur</option>
                <option value="ML">Meghalaya</option>
                <option value="MZ">Mizoram</option>
                <option value="NL">Nagaland</option>
                <option value="OD">Odisha</option>
                <option value="PB">Punjab</option>
                <option value="RJ">Rajasthan</option>
                <option value="SK">Sikkim</option>
                <option value="TN">Tamil Nadu</option>
                <option value="TG">Telangana</option>
                <option value="TR">Tripura</option>
                <option value="UP">Uttar Pradesh</option>
                <option value="UK">Uttarakhand</option>
                <option value="WB">West Bengal</option>
            </optgroup>
            
            <optgroup label="Union Territories">
                <option value="AN">Andaman & Nicobar Islands</option>
                <option value="CH">Chandigarh</option>
                <option value="DN">Dadra & Nagar Haveli and Daman & Diu</option>
                <option value="DL">Delhi</option>
                <option value="JK">Jammu & Kashmir</option>
                <option value="LA">Ladakh</option>
                <option value="LD">Lakshadweep</option>
                <option value="PY">Puducherry</option>
            </optgroup>
        </select>
    </div>

    <!-- Results will appear here -->
    <div id="schemesList" class="grid-container"></div>
</div>

 <!-- VIEW 4: BEHIND THE NUMBERS (UPDATED LOGIC) -->
    <div id="logicView" style="display:none;" class="info-container">
        <h1>Behind the Numbers</h1>
        <p>At BMX10, we believe in transparency. Our algorithms now account for both <strong>City Tiers</strong> and specific <strong>State Economies</strong>.</p>

        <div class="math-box">
            <h3>1. Investment Calculation</h3>
            <p>We calculate investment based on <strong>Location Tier</strong> (Urban/Rural) AND the <strong>State's Cost of Living</strong>.</p>
            <p><strong>Formula:</strong> <span class="math-formula">Base Inv × (0.6 Fixed + 0.4 Variable × Effective Factor)</span></p>
            <p><strong>Effective Factor =</strong> <span class="math-formula">Tier Value × State Multiplier</span></p>
            <ul>
                <li><strong>Tier Values:</strong> Metro (1.8), City (1.3), Town (1.0), Rural (0.7).</li>
                <li><strong>State Multipliers:</strong> e.g., Delhi/Mumbai (1.25x), Bihar/Odisha (0.8x).</li>
            </ul>
        </div>

        <div class="math-box">
            <h3>2. Profitability Logic</h3>
            <p>We use a <strong>Dynamic Turnover Model</strong> adjusted for local purchasing power.</p>
            <p><strong>Step A (Op Cost):</strong> We calculate monthly expenses (Rent + Salaries) based on State & Tier.</p>
            <p><strong>Step B (Revenue):</strong> We assume a healthy business generates revenue <strong>4x</strong> its operational cost.</p>
            <p><strong>Step C (Net Profit):</strong> <span class="math-formula">(Revenue × Net Margin %)</span></p>
        </div>

        <div class="math-box">
            <h3>3. BFI Score (Feasibility Index)</h3>
            <p>Your score (0-100) is a weighted algorithm:</p>
            <ul>
                <li><strong>Capital Adequacy (45%):</strong> Do you have enough funds vs adjusted investment?</li>
                <li><strong>Skill Match (25%):</strong> Does your experience level match the business complexity?</li>
                <li><strong>Market Potential (30%):</strong> Based on the inherent market risk of the category.</li>
            </ul>
        </div>
    </div>
<!-- VIEW 5: ABOUT & DISCLAIMER (Corrected Icons) -->
    <div id="aboutView" style="display:none;" class="info-container">
        <h1>About BMX10</h1>
        <p>BMX10 is an AI-powered feasibility engine designed to help Indian entrepreneurs make data-driven decisions. We cover 100+ business categories with localized financial modeling.</p>
        
        <h2 style="color:var(--danger)">&#9888; Disclaimer</h2>
        <p>The financial projections, costs, and legal requirements provided by this application are <strong>estimates for educational purposes only</strong>.</p>
        <p>Actual costs may vary based on real-estate fluctuations, vendor negotiations, and government policy changes. Users are advised to consult with a Chartered Accountant (CA) or Legal Advisor before making any actual investment.</p>
        <p>BMX10 is not responsible for any financial losses incurred based on these projections.</p>
    </div>

    <!-- VIEW 6: PRIVACY POLICY -->
    <div id="privacyView" style="display:none;" class="info-container">
        <h1>Privacy Policy</h1>
        <p><strong>Last Updated:</strong> 2025</p>
        <p>Your privacy is important to us. This statement explains how we handle your data.</p>
        
        <h2>1. No Data Collection</h2>
        <p>BMX10 operates entirely on your browser (Client-Side). We <strong>do not store</strong> your input data (Budget, Location, Ideas) on any server. All calculations happen locally on your device.</p>
        
        <h2>2. No Cookies</h2>
        <p>We do not use tracking cookies or third-party analytics software.</p>
        
        <h2>3. Local Storage</h2>
        <p>Any saved preferences are stored temporarily in your browser's RAM and are cleared when you close the tab.</p>
    </div>

   <!-- VIEW 7: CONTACT (Corrected Icons) -->
    <div id="contactView" style="display:none;" class="info-container">
        <h1>Contact Us</h1>
        <p>Have suggestions for new business categories or found a bug?</p>
        
        <div class="card" style="text-align:center; padding:40px;">
            <div style="font-size:3rem;">&#128231;</div>
            <h3>Email Support</h3>
            <p style="color:var(--accent); font-weight:bold;">support@BMX10.in</p>
            <p style="font-size:0.9rem; color:#64748b;">We usually reply within 24 hours.</p>
            
            <hr style="margin:20px 0; border:0; border-top:1px solid #e2e8f0;">
            
            <h3>Headquarters</h3>
            <p>BMX10<br>Mumbai, Maharashtra - 400067</p>
        </div>
    </div>
    </main>

    <!-- APP LOGIC -->
    <script>

// --- 0. STATE ECONOMIC MULTIPLIERS (New Addition) ---
const stateRates = {
    "DL": 1.25, "MH": 1.20, "KA": 1.15, "TN": 1.15, "GJ": 1.15, "TG": 1.15, // High Cost/Income
    "HR": 1.10, "GA": 1.20, "KL": 1.10, "PB": 1.05, "AP": 1.05, "WB": 1.0,  // Med-High
    "RJ": 0.95, "UP": 0.90, "MP": 0.85, "OD": 0.85, "CG": 0.85, "UK": 1.0,  // Medium
    "BR": 0.80, "JH": 0.80, "AS": 0.85, "HP": 1.0, "CH": 1.15,              // Low / Specific
    "JK": 0.90, "LA": 0.95, "AN": 1.10, "PY": 1.05, "DN": 1.05,             // UTs
    "AR": 0.85, "MN": 0.85, "ML": 0.85, "MZ": 0.85, "NL": 0.85, "TR": 0.85, "SK": 0.90 // NE
};

function checkBudget() {
    let b = parseInt(document.getElementById("budgetInput").value);
    let msg = "";
    if (isNaN(b) || b < 0) msg = "Please enter a valid amount.";
    else if (b < 10000) msg = "No business idea for this budget. Please enter a higher amount.";
    
    if (msg) {
        document.getElementById("errMsg").innerText = msg;
        document.getElementById("errPopup").style.display = "flex";
        return false;
    }
    return true;
}
        // 1. FULL DATABASE (100 ITEMS)
        const database=[
            {id:1,name:"Grocery Store",cat:"Retail",baseInv:300000,baseOp:25000,margin:0.15,risk:{m:30,o:40,r:20},desc:"Daily essentials."},
            {id:2,name:"Apparel Store",cat:"Retail",baseInv:800000,baseOp:45000,margin:0.35,risk:{m:60,o:50,r:30},desc:"Fashion retail."},
            {id:3,name:"Mobile Shop",cat:"Retail",baseInv:500000,baseOp:30000,margin:0.20,risk:{m:40,o:30,r:20},desc:"Phones & accessories."},
            {id:4,name:"Footwear Shop",cat:"Retail",baseInv:600000,baseOp:35000,margin:0.40,risk:{m:50,o:40,r:20},desc:"Shoe store."},
            {id:5,name:"Electronics",cat:"Retail",baseInv:1500000,baseOp:60000,margin:0.18,risk:{m:50,o:40,r:20},desc:"Appliances."},
            {id:6,name:"Cosmetics",cat:"Retail",baseInv:400000,baseOp:25000,margin:0.45,risk:{m:60,o:30,r:20},desc:"Beauty products."},
            {id:7,name:"Stationery",cat:"Retail",baseInv:300000,baseOp:20000,margin:0.30,risk:{m:20,o:20,r:10},desc:"Books & pens."},
            {id:8,name:"Gift Shop",cat:"Retail",baseInv:350000,baseOp:25000,margin:0.50,risk:{m:50,o:30,r:10},desc:"Novelties."},
            {id:9,name:"Jewellery (Imitation)",cat:"Retail",baseInv:300000,baseOp:20000,margin:0.60,risk:{m:50,o:20,r:10},desc:"Artificial jewellery."},
            {id:10,name:"Optical Store",cat:"Retail",baseInv:500000,baseOp:30000,margin:0.65,risk:{m:40,o:30,r:20},desc:"Eyewear."},
            {id:11,name:"Hardware",cat:"Retail",baseInv:800000,baseOp:30000,margin:0.25,risk:{m:30,o:40,r:20},desc:"Construction material."},
            {id:12,name:"Utensil Shop",cat:"Retail",baseInv:600000,baseOp:25000,margin:0.35,risk:{m:30,o:20,r:10},desc:"Kitchenware."},
            {id:13,name:"Toy Store",cat:"Retail",baseInv:500000,baseOp:30000,margin:0.40,risk:{m:50,o:30,r:10},desc:"Kids toys."},
            {id:14,name:"Sports Goods",cat:"Retail",baseInv:600000,baseOp:30000,margin:0.35,risk:{m:40,o:20,r:10},desc:"Sports gear."},
            {id:15,name:"Furniture Shop",cat:"Retail",baseInv:1200000,baseOp:60000,margin:0.40,risk:{m:60,o:40,r:20},desc:"Home furniture."},
            {id:16,name:"Bag Store",cat:"Retail",baseInv:400000,baseOp:25000,margin:0.45,risk:{m:40,o:20,r:10},desc:"Luggage."},
            {id:17,name:"Watch Shop",cat:"Retail",baseInv:500000,baseOp:25000,margin:0.50,risk:{m:50,o:20,r:10},desc:"Timepieces."},
            {id:18,name:"Pet Shop",cat:"Retail",baseInv:400000,baseOp:30000,margin:0.35,risk:{m:50,o:50,r:30},desc:"Pet food."},
            {id:19,name:"Florist",cat:"Retail",baseInv:100000,baseOp:15000,margin:0.60,risk:{m:50,o:60,r:10},desc:"Flowers."},
            {id:20,name:"Pharmacy",cat:"Retail",baseInv:800000,baseOp:40000,margin:0.25,risk:{m:20,o:50,r:70},desc:"Medicines."},
            {id:21,name:"Tea Stall",cat:"Food",baseInv:100000,baseOp:15000,margin:0.60,risk:{m:30,o:40,r:30},desc:"Chai point."},
            {id:22,name:"Cafe",cat:"Food",baseInv:1000000,baseOp:70000,margin:0.65,risk:{m:70,o:60,r:50},desc:"Coffee shop."},
            {id:23,name:"Cloud Kitchen",cat:"Food",baseInv:400000,baseOp:40000,margin:0.55,risk:{m:60,o:50,r:40},desc:"Delivery only."},
            {id:24,name:"Bakery",cat:"Food",baseInv:600000,baseOp:40000,margin:0.50,risk:{m:50,o:50,r:40},desc:"Cakes."},
            {id:25,name:"Fast Food",cat:"Food",baseInv:500000,baseOp:35000,margin:0.55,risk:{m:50,o:50,r:45},desc:"Snacks/QSR."},
            {id:26,name:"Tiffin Service",cat:"Food",baseInv:50000,baseOp:15000,margin:0.40,risk:{m:40,o:60,r:30},desc:"Home meals."},
            {id:27,name:"Juice Bar",cat:"Food",baseInv:200000,baseOp:20000,margin:0.60,risk:{m:40,o:40,r:30},desc:"Fresh juice."},
            {id:28,name:"Ice Cream",cat:"Food",baseInv:400000,baseOp:25000,margin:0.50,risk:{m:50,o:30,r:30},desc:"Parlour."},
            {id:29,name:"Sweet Shop",cat:"Food",baseInv:1000000,baseOp:60000,margin:0.45,risk:{m:30,o:60,r:40},desc:"Mithai."},
            {id:30,name:"Food Truck",cat:"Food",baseInv:600000,baseOp:30000,margin:0.55,risk:{m:60,o:50,r:40},desc:"Mobile food."},
            {id:31,name:"Catering",cat:"Food",baseInv:300000,baseOp:20000,margin:0.40,risk:{m:50,o:70,r:30},desc:"Events."},
            {id:32,name:"Organic Store",cat:"Food",baseInv:500000,baseOp:30000,margin:0.35,risk:{m:40,o:30,r:20},desc:"Healthy food."},
            {id:33,name:"Dry Fruits",cat:"Food",baseInv:800000,baseOp:25000,margin:0.30,risk:{m:30,o:20,r:10},desc:"Nuts."},
            {id:34,name:"Spice Store",cat:"Food",baseInv:200000,baseOp:15000,margin:0.40,risk:{m:30,o:30,r:20},desc:"Masala."},
            {id:35,name:"Pickle Biz",cat:"Food",baseInv:50000,baseOp:10000,margin:0.50,risk:{m:40,o:40,r:30},desc:"Home made."},
            {id:36,name:"Namkeen Shop",cat:"Food",baseInv:300000,baseOp:25000,margin:0.40,risk:{m:30,o:40,r:30},desc:"Snacks."},
            {id:37,name:"Veg Shop",cat:"Food",baseInv:100000,baseOp:20000,margin:0.30,risk:{m:20,o:60,r:10},desc:"Vegetables."},
            {id:38,name:"Meat Shop",cat:"Food",baseInv:200000,baseOp:25000,margin:0.35,risk:{m:30,o:50,r:50},desc:"Chicken/Meat."},
            {id:39,name:"Pan Shop",cat:"Food",baseInv:50000,baseOp:10000,margin:0.60,risk:{m:30,o:20,r:20},desc:"Betel leaf."},
            {id:40,name:"Water Supply",cat:"Food",baseInv:300000,baseOp:20000,margin:0.50,risk:{m:20,o:40,r:20},desc:"Jars."},
            {id:41,name:"Mobile Repair",cat:"Service",baseInv:100000,baseOp:10000,margin:0.70,risk:{m:30,o:20,r:10},desc:"Tech repair."},
            {id:42,name:"AC Service",cat:"Service",baseInv:50000,baseOp:5000,margin:0.75,risk:{m:30,o:30,r:10},desc:"Cooling."},
            {id:43,name:"Plumber",cat:"Service",baseInv:30000,baseOp:5000,margin:0.80,risk:{m:20,o:20,r:10},desc:"Utility."},
            {id:44,name:"Cleaning",cat:"Service",baseInv:100000,baseOp:10000,margin:0.60,risk:{m:40,o:30,r:10},desc:"Housekeeping."},
            {id:45,name:"Pest Control",cat:"Service",baseInv:100000,baseOp:10000,margin:0.70,risk:{m:40,o:40,r:30},desc:"Hygiene."},
            {id:46,name:"Car Wash",cat:"Service",baseInv:500000,baseOp:30000,margin:0.60,risk:{m:50,o:40,r:20},desc:"Auto clean."},
            {id:47,name:"Laundry",cat:"Service",baseInv:400000,baseOp:25000,margin:0.50,risk:{m:30,o:40,r:20},desc:"Washing."},
            {id:48,name:"Salon",cat:"Service",baseInv:500000,baseOp:35000,margin:0.65,risk:{m:50,o:40,r:30},desc:"Beauty."},
            {id:49,name:"Tailoring",cat:"Service",baseInv:200000,baseOp:15000,margin:0.70,risk:{m:40,o:30,r:10},desc:"Boutique."},
            {id:50,name:"Event Mgmt",cat:"Service",baseInv:100000,baseOp:10000,margin:0.40,risk:{m:60,o:70,r:20},desc:"Weddings."},
            {id:51,name:"Travel Agency",cat:"Service",baseInv:150000,baseOp:20000,margin:0.30,risk:{m:60,o:20,r:20},desc:"Booking."},
            {id:52,name:"Courier",cat:"Service",baseInv:100000,baseOp:15000,margin:0.25,risk:{m:30,o:30,r:10},desc:"Logistics."},
            {id:53,name:"Real Estate",cat:"Service",baseInv:50000,baseOp:10000,margin:0.85,risk:{m:60,o:20,r:30},desc:"Broker."},
            {id:54,name:"Security",cat:"Service",baseInv:500000,baseOp:300000,margin:0.20,risk:{m:40,o:60,r:60},desc:"Guards."},
            {id:55,name:"Taxi Svc",cat:"Service",baseInv:800000,baseOp:20000,margin:0.35,risk:{m:40,o:40,r:40},desc:"Cab."},
            {id:56,name:"Bike Rental",cat:"Service",baseInv:500000,baseOp:15000,margin:0.40,risk:{m:50,o:40,r:30},desc:"Rentals."},
            {id:57,name:"Gym",cat:"Service",baseInv:1500000,baseOp:60000,margin:0.50,risk:{m:50,o:30,r:20},desc:"Fitness."},
            {id:58,name:"Yoga",cat:"Service",baseInv:200000,baseOp:15000,margin:0.80,risk:{m:40,o:20,r:10},desc:"Wellness."},
            {id:59,name:"Interiors",cat:"Service",baseInv:100000,baseOp:10000,margin:0.70,risk:{m:60,o:40,r:10},desc:"Decor."},
            {id:60,name:"Xerox",cat:"Service",baseInv:200000,baseOp:15000,margin:0.50,risk:{m:30,o:30,r:10},desc:"Print."},
            {id:61,name:"Digital Mkt",cat:"Online",baseInv:50000,baseOp:5000,margin:0.80,risk:{m:70,o:20,r:10},desc:"Agency."},
            {id:62,name:"Graphic Design",cat:"Online",baseInv:50000,baseOp:2000,margin:0.90,risk:{m:60,o:10,r:10},desc:"Creative."},
            {id:63,name:"Content",cat:"Online",baseInv:20000,baseOp:1000,margin:0.95,risk:{m:50,o:10,r:10},desc:"Writing."},
            {id:64,name:"Ecom Seller",cat:"Online",baseInv:200000,baseOp:15000,margin:0.30,risk:{m:70,o:40,r:30},desc:"Amazon."},
            {id:65,name:"Dropship",cat:"Online",baseInv:30000,baseOp:5000,margin:0.20,risk:{m:80,o:20,r:10},desc:"Retail."},
            {id:66,name:"YouTuber",cat:"Online",baseInv:50000,baseOp:2000,margin:0.90,risk:{m:80,o:40,r:10},desc:"Video."},
            {id:67,name:"App Dev",cat:"Online",baseInv:50000,baseOp:5000,margin:0.80,risk:{m:60,o:50,r:10},desc:"Coding."},
            {id:68,name:"Web Design",cat:"Online",baseInv:50000,baseOp:5000,margin:0.80,risk:{m:50,o:30,r:10},desc:"Sites."},
            {id:69,name:"Influencer",cat:"Online",baseInv:50000,baseOp:5000,margin:0.70,risk:{m:60,o:20,r:10},desc:"Social."},
            {id:70,name:"Online Tutor",cat:"Online",baseInv:30000,baseOp:2000,margin:0.90,risk:{m:40,o:10,r:10},desc:"Teach."},
            {id:71,name:"Tuition",cat:"Education",baseInv:100000,baseOp:10000,margin:0.85,risk:{m:30,o:10,r:10},desc:"Classes."},
            {id:72,name:"Spoken English",cat:"Education",baseInv:100000,baseOp:10000,margin:0.80,risk:{m:40,o:10,r:10},desc:"Lang."},
            {id:73,name:"Exam Coach",cat:"Education",baseInv:200000,baseOp:20000,margin:0.70,risk:{m:50,o:20,r:20},desc:"Competitive."},
            {id:74,name:"Hobby Class",cat:"Education",baseInv:50000,baseOp:5000,margin:0.80,risk:{m:40,o:10,r:10},desc:"Arts."},
            {id:75,name:"Play School",cat:"Education",baseInv:800000,baseOp:40000,margin:0.40,risk:{m:40,o:60,r:50},desc:"Preschool."},
            {id:76,name:"Skill Center",cat:"Education",baseInv:300000,baseOp:25000,margin:0.50,risk:{m:50,o:30,r:30},desc:"Vocational."},
            {id:77,name:"Computer Inst",cat:"Education",baseInv:500000,baseOp:30000,margin:0.60,risk:{m:50,o:30,r:20},desc:"IT."},
            {id:78,name:"Music Class",cat:"Education",baseInv:100000,baseOp:10000,margin:0.80,risk:{m:40,o:10,r:10},desc:"Music."},
            {id:79,name:"Dance Class",cat:"Education",baseInv:300000,baseOp:20000,margin:0.70,risk:{m:40,o:20,r:10},desc:"Dance."},
            {id:80,name:"Art School",cat:"Education",baseInv:100000,baseOp:10000,margin:0.80,risk:{m:40,o:10,r:10},desc:"Painting."},
            {id:81,name:"Paper Cup",cat:"Manufacturing",baseInv:1000000,baseOp:80000,margin:0.20,risk:{m:50,o:70,r:50},desc:"Cups."},
            {id:82,name:"Paper Plate",cat:"Manufacturing",baseInv:800000,baseOp:60000,margin:0.20,risk:{m:50,o:70,r:50},desc:"Plates."},
            {id:83,name:"Candle Making",cat:"Manufacturing",baseInv:50000,baseOp:10000,margin:0.40,risk:{m:40,o:30,r:10},desc:"Wax."},
            {id:84,name:"Soap Mfg",cat:"Manufacturing",baseInv:200000,baseOp:30000,margin:0.35,risk:{m:50,o:40,r:30},desc:"Soap."},
            {id:85,name:"Detergent",cat:"Manufacturing",baseInv:300000,baseOp:40000,margin:0.30,risk:{m:60,o:40,r:30},desc:"Washing."},
            {id:86,name:"Agarbatti",cat:"Manufacturing",baseInv:100000,baseOp:15000,margin:0.35,risk:{m:30,o:30,r:10},desc:"Incense."},
            {id:87,name:"Notebooks",cat:"Manufacturing",baseInv:800000,baseOp:50000,margin:0.25,risk:{m:40,o:50,r:30},desc:"Copy."},
            {id:88,name:"Slippers",cat:"Manufacturing",baseInv:200000,baseOp:20000,margin:0.35,risk:{m:40,o:30,r:20},desc:"Footwear."},
            {id:89,name:"Spices",cat:"Manufacturing",baseInv:500000,baseOp:30000,margin:0.30,risk:{m:30,o:40,r:40},desc:"Masala."},
            {id:90,name:"Flour Mill",cat:"Manufacturing",baseInv:400000,baseOp:20000,margin:0.25,risk:{m:20,o:40,r:30},desc:"Atta."},
            {id:91,name:"Oil Mill",cat:"Manufacturing",baseInv:600000,baseOp:40000,margin:0.30,risk:{m:30,o:50,r:40},desc:"Oil."},
            {id:92,name:"Garment Mfg",cat:"Manufacturing",baseInv:1500000,baseOp:100000,margin:0.25,risk:{m:50,o:80,r:60},desc:"Clothes."},
            {id:93,name:"Furniture Mfg",cat:"Manufacturing",baseInv:1000000,baseOp:80000,margin:0.30,risk:{m:50,o:70,r:40},desc:"Wood."},
            {id:94,name:"Packaging",cat:"Manufacturing",baseInv:1200000,baseOp:90000,margin:0.20,risk:{m:40,o:60,r:40},desc:"Boxes."},
            {id:95,name:"Bag Mfg",cat:"Manufacturing",baseInv:2000000,baseOp:150000,margin:0.15,risk:{m:40,o:70,r:50},desc:"Bags."},
            {id:96,name:"Dairy",cat:"Agriculture",baseInv:1000000,baseOp:50000,margin:0.40,risk:{m:20,o:80,r:30},desc:"Milk."},
            {id:97,name:"Poultry",cat:"Agriculture",baseInv:500000,baseOp:40000,margin:0.35,risk:{m:40,o:70,r:30},desc:"Chicken."},
            {id:98,name:"Goat Farm",cat:"Agriculture",baseInv:300000,baseOp:15000,margin:0.45,risk:{m:30,o:50,r:20},desc:"Meat."},
            {id:99,name:"Mushroom",cat:"Agriculture",baseInv:100000,baseOp:10000,margin:0.60,risk:{m:50,o:60,r:10},desc:"Farm."},
            {id:100,name:"Nursery",cat:"Agriculture",baseInv:200000,baseOp:15000,margin:0.50,risk:{m:30,o:40,r:10},desc:"Plants."},
       
    { id: 101, name: "Mumbai Vada Pav Stall", cat: "Street Food", baseInv: 60000, baseOp: 15000, margin: 0.50, risk: {m:20, o:60, r:70}, desc: "The lifeline of Mumbai. High volume, low cost." },
    { id: 102, name: "Roadside Tea Stall", cat: "Street Food", baseInv: 35000, baseOp: 10000, margin: 0.60, risk: {m:20, o:40, r:60}, desc: "Cutting chai & Bun Maska on a cart." },
    { id: 103, name: "Sandwich/Toast Stall", cat: "Street Food", baseInv: 70000, baseOp: 12000, margin: 0.55, risk: {m:30, o:50, r:50}, desc: "Bombay Masala Toast & Grill sandwiches." },
    { id: 104, name: "Pani Puri / Chaat", cat: "Street Food", baseInv: 50000, baseOp: 15000, margin: 0.65, risk: {m:30, o:50, r:70}, desc: "Hygiene-focused chaat counter." },
    { id: 105, name: "Dosa Stall", cat: "Street Food", baseInv: 80000, baseOp: 18000, margin: 0.50, risk: {m:40, o:60, r:50}, desc: "Live Dosa varieties on Tawa." },
    { id: 106, name: "Frankie / Roll Stall", cat: "Street Food", baseInv: 90000, baseOp: 20000, margin: 0.55, risk: {m:40, o:50, r:50}, desc: "Veg & Non-Veg rolls." },
    { id: 107, name: "Dabeli Stall", cat: "Street Food", baseInv: 45000, baseOp: 12000, margin: 0.50, risk: {m:40, o:40, r:50}, desc: "Kutch style Dabeli." },
    { id: 108, name: "Idli / Wada Sambar", cat: "Street Food", baseInv: 60000, baseOp: 15000, margin: 0.60, risk: {m:30, o:50, r:40}, desc: "Morning breakfast cycle/cart." }
        ];

// --- VALIDATION HELPER ---
// --- VALIDATION HELPER (Custom Popup) ---
function isBudgetValid() {
    let b = document.getElementById("budgetInput").value;
    let msg = "";
    
    if (b === "" || parseInt(b) < 0) { 
        msg = "Please enter a valid positive amount.";
    } 
    else if (parseInt(b) < 10000) { 
        msg = "No business idea for this budget. Please enter a higher amount (Min ?10,000)."; 
    }

    if (msg !== "") {
        document.getElementById("alertMsg").innerText = msg;
        document.getElementById("customAlert").style.display = "flex"; // Show custom box
        return false;
    }
    return true;
}
        // 2. HELPERS & INIT
      const fmt = n => "\u20B9 " + n.toLocaleString('en-IN');
        window.onload = function() {
            filterBizDropdown();
            let c1=document.getElementById("compBiz1"), c2=document.getElementById("compBiz2");
            database.forEach(b => { 
                let o1=document.createElement("option"), o2=document.createElement("option");
                o1.value=b.id; o1.text=b.name; o2.value=b.id; o2.text=b.name;
                c1.add(o1); c2.add(o2); 
            });
            c2.selectedIndex=1;
        };

        function filterBizDropdown() {
            let cat=document.getElementById("catSelect").value, sel=document.getElementById("bizSelect");
            sel.innerHTML="";
            database.filter(b=>cat==="All"||b.cat===cat).forEach(b=>{
                let o=document.createElement("option"); o.value=b.id; o.text=b.name; sel.add(o);
            });
        }

     function switchView(mode) {
            // 1. Hide Welcome Screen
            document.getElementById("welcomeScreen").style.display = 'none';

            // 2. Hide ALL Views (Added "schemesView" to the list)
            const views = [
                "reportContainer", 
                "finderView", 
                "compareView", 
                "schemesView", // <--- Added this
                "logicView", 
                "aboutView", 
                "privacyView", 
                "contactView"
            ];
            
            views.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.style.display = 'none';
            });

            // 3. Show the Selected View
            if (mode === 'analyze') {
                document.getElementById("reportContainer").style.display = 'block';
                window.scrollTo({top: 0, behavior: 'smooth'});
            } 
            else if (mode === 'schemes') {
                document.getElementById("schemesView").style.display = 'block';
                renderSchemes(); // <--- Auto-load the schemes when clicked
            }
            else {
                // Works for finder, compare, logic, about, etc.
                const viewId = mode + "View";
                if(document.getElementById(viewId)) {
                    document.getElementById(viewId).style.display = 'block';
                }
            }

            // 4. Run specific logic if needed
            if (mode === 'finder') runFinder();
        }

        // 3. MAIN ANALYSIS
       // 3. MAIN ANALYSIS
        // 3. MAIN ANALYSIS (FIXED SKILL LOGIC)
        function generateAnalysis() {
            if(!checkBudget()) return;

            let biz = database.find(b=>b.id==document.getElementById("bizSelect").value);
            let tier = parseFloat(document.getElementById("tierSelect").value);
            let budget = parseInt(document.getElementById("budgetInput").value);
            let stateCode = document.getElementById("stateSelect").value;
            let stateName = document.getElementById("stateSelect").options[document.getElementById("stateSelect").selectedIndex].text;

            // 1. STATE + TIER CALCULATION
            let sFactor = stateRates[stateCode] || 1.0;
            let effectiveFactor = tier * sFactor;

            let adjInv = Math.round((biz.baseInv * 0.6) + ((biz.baseInv * 0.4) * effectiveFactor));
            let adjOp = Math.round(biz.baseOp * effectiveFactor);
            
            let monthlyRev = Math.round(adjOp * 4.0);
            let profit = Math.round(monthlyRev * biz.margin);
            let bep = profit>0 ? Math.ceil(adjInv/profit) : 99;
            
            // 2. SCORING LOGIC
            let fundRatio = budget / adjInv;
            
           // --- FIX: SKILL CALCULATION (Strictly Increasing) ---
            let skill = parseInt(document.getElementById("skillInput").value); // 1=Beg, 2=Med, 3=Exp
            let difficulty = biz.risk.o > 60 ? 3 : (biz.risk.o > 30 ? 2 : 1); // 1=Easy, 2=Med, 3=Hard
            
            // New Formula: Guaranteed increase for higher skill
            // Beginner = 10 pts | Medium = 20 pts | Expert = 30 pts
            let skillPoints = skill * 10;

            // Penalty: Only if Skill is LOWER than Difficulty, subtract 5 points
            if (skill < difficulty) {
                skillPoints -= 5;
            }

            // Final Score: Capital(45%) + Skill(30%) + Market(25%)
            let bfi = Math.round((Math.min(fundRatio,1.2)*45) + skillPoints + ((100-biz.risk.m)*0.25));
            // UI UPDATES
            document.getElementById("rptTitle").innerText = biz.name;
            document.getElementById("rptSubtitle").innerText = `${stateName} (${document.getElementById("tierSelect").selectedOptions[0].text})`;
            
            document.getElementById("bfiScore").innerText = bfi;
            document.getElementById("bfiMsg").innerHTML = bfi>75?"Excellent &#9989;":(bfi>50?"Moderate &#9888;":"High Risk &#128721;");
            document.getElementById("bfiMsg").style.color = bfi>75?"#10b981":(bfi>50?"#f59e0b":"#ef4444");
            
            document.getElementById("reqInv").innerText = fmt(adjInv);
            document.getElementById("estProfit").innerText = fmt(profit);
            document.getElementById("breakEven").innerText = bep + " Months";
            
            document.getElementById("capStatus").innerHTML = budget>=adjInv ? "Sufficient &#9989;" : "Shortfall &#128315;";
            document.getElementById("capStatus").style.color = budget>=adjInv ? "#10b981" : "#ef4444";
            
            document.getElementById("loanMatches").innerHTML = budget<adjInv ? (adjInv<500000?"&#8226; Mudra Shishu/Kishor":"&#8226; Mudra Tarun / PMEGP") : "&#9989; No Loan Needed";

            // Risk Bars
            let setRisk=(id,v)=>{ let e=document.createElement("div"); e.className="risk-bar-group"; e.innerHTML=`<div class="risk-label">${id}</div><div class="progress-bg"><div class="progress-fill" style="width:${v}%;background:${v<30?'#10b981':(v<60?'#f59e0b':'#ef4444')}"></div></div>`; document.getElementById("riskBars").appendChild(e); };
            document.getElementById("riskBars").innerHTML="";
            setRisk("Market", biz.risk.m); setRisk("Capital", Math.min(100,Math.max(10,(1-fundRatio)*100))); setRisk("Ops", biz.risk.o);

            // Financial Table
            let ftb = document.querySelector("#cashFlowTable tbody");
            ftb.innerHTML = `
                <tr><td><strong>Monthly Exp</strong></td><td>${fmt(adjOp*1.5)}</td><td>${fmt(adjOp*1.2)}</td><td>${fmt(adjOp)}</td></tr>
                <tr><td><strong>Revenue</strong></td><td>${fmt(profit*0.5)}</td><td>${fmt(profit*1.5)}</td><td>${fmt(profit*2.5)}</td></tr>
                <tr><td><strong>Net Flow</strong></td><td style='color:red'>-${fmt(adjOp)}</td><td style='color:orange'>-${fmt(adjOp*0.2)}</td><td style='color:green'>+${fmt(profit)}</td></tr>`;

            // Timeline
            let tl = document.getElementById("timelineList");
            let steps = [{d:"D1-3",t:"Entity Reg",x:"Proprietorship"},{d:"D4-7",t:"Bank/PAN",x:"Current A/c"},{d:"D8-15",t:"Licenses",x:"Udyam, GST, FSSAI"}];
            tl.innerHTML = steps.map(s=>`<div class="timeline-item"><div class="time-day">${s.d}</div><div class="time-task">${s.t}</div><div class="time-desc">${s.x}</div></div>`).join("");

            renderDetailedReport(biz, adjInv, adjOp, tier, stateName, budget);
        }
        // 4. FINDER
        function runFinder() {
if(!checkBudget()) return; // <--- Add this line at the top
// ... rest of the function ...
if(!isBudgetValid()) return; // <--- ADD THIS LINE HERE
            let budget = parseInt(document.getElementById("budgetInput").value);
            let tier = parseFloat(document.getElementById("tierSelect").value);
            let cat = document.getElementById("catSelect").value;
            let res = document.getElementById("finderResults"); res.innerHTML="";
            document.getElementById("finderInputs").innerHTML = `Budget: <b>${fmt(budget)}</b> | Cat: <b>${cat}</b>`;
            
            let matches = database.filter(b => {
                let cost = (b.baseInv*0.6) + ((b.baseInv*0.4)*tier);
                return (cat==="All"||b.cat===cat) && budget >= (cost*0.5);
            });
            if(matches.length===0) res.innerHTML="No matches. Increase budget.";
            matches.forEach(b => {
                let cost = Math.round((b.baseInv*0.6) + ((b.baseInv*0.4)*tier));
                res.innerHTML += `<div class="match-card"><h3>${b.name}</h3><p>Est Cost: ${fmt(cost)}</p><button onclick="document.getElementById('bizSelect').value=${b.id};switchView('analyze');generateAnalysis()" style="width:100%;padding:5px;background:#2563eb;color:white;border:none;">View Report</button></div>`;
            });
        }

       // 5. COMPARISON (NOW WITH STATE SENSITIVITY)
        function runComparison() {
            let b1 = database.find(b=>b.id==document.getElementById("compBiz1").value);
            let b2 = database.find(b=>b.id==document.getElementById("compBiz2").value);
            let tier = parseFloat(document.getElementById("tierSelect").value);
            let stateCode = document.getElementById("stateSelect").value;
            let stateName = document.getElementById("stateSelect").options[document.getElementById("stateSelect").selectedIndex].text;
            
            // Get State Multiplier
            let sFactor = stateRates[stateCode] || 1.0;
            let effectiveFactor = tier * sFactor;

            let calc = (b) => {
                // Apply State * Tier Logic
                let cost = Math.round((b.baseInv * 0.6) + ((b.baseInv * 0.4) * effectiveFactor));
                let op = Math.round(b.baseOp * effectiveFactor);
                let prof = Math.round(op * 4.0 * b.margin);
                return {c:cost, p:prof};
            };
            let d1=calc(b1), d2=calc(b2);

            document.getElementById("comparisonResult").innerHTML = `
                <div style="background:#f1f5f9; padding:10px; margin-bottom:10px; font-size:0.9rem; text-align:center;">
                    Comparing for <strong>${stateName}</strong> (Tier: ${document.getElementById("tierSelect").selectedOptions[0].text})
                </div>
                <table class="compare-table">
                    <tr><th>Metric</th><th>${b1.name}</th><th>${b2.name}</th></tr>
                    <tr><td>Category</td><td>${b1.cat}</td><td>${b2.cat}</td></tr>
                    <tr><td>Invest</td><td class="${d1.c<d2.c?'winner':''}">${fmt(d1.c)}</td><td class="${d2.c<d1.c?'winner':''}">${fmt(d2.c)}</td></tr>
                    <tr><td>Profit</td><td class="${d1.p>d2.p?'winner':''}">${fmt(d1.p)}</td><td class="${d2.p>d1.p?'winner':''}">${fmt(d2.p)}</td></tr>
                    <tr><td>Margin</td><td class="${b1.margin>b2.margin?'winner':''}">${(b1.margin*100).toFixed(0)}%</td><td class="${b2.margin>b1.margin?'winner':''}">${(b2.margin*100).toFixed(0)}%</td></tr>
                </table>`;
        }
// --- 6. FINAL DETAILED REPORT (STREET FOOD vs STANDARD SHOP) ---
function renderDetailedReport(biz, inv, op, tier, state, budget) {
    const container = document.getElementById("detailedReport");
    container.innerHTML = "";
    
    const fmt = (n) => "\u20B9 " + n.toLocaleString('en-IN');
    const shortfall = inv - budget;
    const emi = shortfall > 0 ? Math.round(shortfall * 0.0212) : 0;
    
    // Helper to add sections
    const addSec = (code, title, data) => {
        let html = `<div class="section-block active"><div class="section-title"><span class="section-code">${code}</span> ${title}</div>`;
        data.forEach(d => {
            const num = d.l.match(/^\d+/) ? d.l.match(/^\d+/)[0] : "•";
            const label = d.l.replace(/^\d+[\.\s]*/, "");
            html += `<div class="data-row"><div class="data-label"><span>${num}</span> ${label}</div><div class="data-value" style="font-size:0.95rem; line-height:1.6;">${d.v}</div></div>`;
        });
        container.innerHTML += html + "</div>";
    };

    // =========================================================
    // 🔴 PART 1: SPECIAL LOGIC FOR "STREET FOOD" (Roadside)
    // =========================================================
    if (biz.cat === "Street Food") {
        
        // A. IDENTITY
        addSec("A", "BUSINESS IDENTITY (ROADSIDE SETUP)", [
            {l:"1. Concept", v:`<strong>${biz.name}</strong> (Street/Cart Model).`},
            {l:"2. Category", v:"Unorganized Street Food Sector (High Volume)."},
            {l:"3. Speciality", v:`${biz.desc}. Focus on taste and speed.`},
            {l:"4. Type", v:"B2C (Direct Cash Sales)."},
            {l:"5. Model", v:"Offline Only (Standing customers)."},
            {l:"6. Scale", v:"Nano Enterprise (Self-Employment)."},
            {l:"7. Entity", v:"Individual Owner (No formal company reg needed)."},
            {l:"8. Location", v:`High footfall street corner in ${state}.`},
            {l:"9. Audience", v:"Commuters, Students, Office goers."},
            {l:"10. Season", v:"All year (Sales drop during heavy rains)."}
        ]);

        // B. LOCATION
        addSec("B", "LOCATION & CART SETUP", [
            {l:"11. Type", v:"Roadside / Footpath / Near Railway Station."},
            {l:"12. Tier", v:"Tier doesn't matter much; Footfall is King."},
            {l:"13. Premises", v:"<strong>Mobile Cart (Thela)</strong> or Temporary Folding Stall."},
            {l:"14. Rent/Fees", v:"Daily Municipal Pauti / Local Charge (Approx \u20B9 100-300/day)."},
            {l:"15. Deposit", v:"Nil (No landlord involved)."},
            {l:"16. Agreement", v:"Not Applicable."},
            {l:"17. Area", v:"Approx 20-30 Sq.ft (Size of the cart)."},
            {l:"18. Parking", v:"Not required for the cart itself."},
            {l:"19. Setup", v:"Stainless Steel Counter with overhead Umbrella/Sheet."}
        ]);

        // C. LEGAL
        addSec("C", "LEGAL & MUNICIPAL COMPLIANCE", [
            {l:"20. Cost", v:"\u20B9 2,000 - \u20B9 5,000 (Local Management)."},
            {l:"21. PAN", v:"Personal PAN of the vendor."},
            {l:"22. TAN", v:"Not Applicable."},
            {l:"23. Udyam", v:"Recommended (Register as 'Street Vendor')."},
            {l:"24. GST", v:"Not Required (Turnover usually < 40L)."},
            {l:"25. Shop Act", v:"Not Applicable for open carts."},
            {l:"26. FSSAI", v:"<strong>FSSAI Registration (Petty Food Business)</strong> is Mandatory."},
            {l:"27. License", v:"<strong>Street Vendor Certificate (TVC)</strong> under PM SVANidhi."},
            {l:"28. Factory", v:"NA"}, {l:"29. Pollution", v:"NA"},
            {l:"30. Fire", v:"Keep a small portable Fire Extinguisher (Safety)."},
            {l:"31. Prof Tax", v:"NA"}, {l:"32. IEC", v:"NA"},
            {l:"33. Rules", v:"Do not block traffic. Maintain dustbins."}
        ]);

        // D. DOCS
        addSec("D", "DOCUMENTATION", [
            {l:"34. Aadhaar", v:"Must be linked to Mobile number."},
            {l:"35. PAN", v:"Required for Bank Account."},
            {l:"36. Address", v:"Home Electricity Bill/Ration Card."},
            {l:"37. Vending Cert", v:"Letter of Recommendation (LoR) from Municipality (For Loan)."},
            {l:"38. Bank", v:"Savings Account linked to UPI."},
            {l:"39. Photos", v:"Passport Size."},
            {l:"40. Deed", v:"NA"}, {l:"41. DPR", v:"NA"},
            {l:"42. KYC", v:"Basic KYC for PM SVANidhi Loan."}
        ]);

        // E. CAPITAL
        addSec("E", "CAPITAL (LOW INVESTMENT)", [
            {l:"44. Total", v:`<strong>${fmt(inv)}</strong> (Estimated Setup Cost).`},
            {l:"45. Cart Cost", v:"\u20B9 25,000 - 40,000 (Custom SS Cart with Wheels)."},
            {l:"46. Utensils", v:"\u20B9 5,000 (Tawa, Big Vessels, Plates)."},
            {l:"47. Stove/Gas", v:"\u20B9 5,000 (Commercial Cylinder Deposit + Burner)."},
            {l:"48. Lighting", v:"\u20B9 2,000 (Battery LED or Shared Connection)."},
            {l:"49. Stock", v:"\u20B9 5,000 (First week raw material)."},
            {l:"50. Branding", v:"\u20B9 2,000 (Vinyl Sticker Name on Cart)."},
            {l:"51. Disposables", v:"\u20B9 2,000 (Paper plates, newspapers, napkins)."},
            {l:"52. Reserve", v:"\u20B9 5,000 (Cash flow for change)."},
            {l:"53. Marketing", v:"\u20B9 0 (Location is the only marketing)."},
            {l:"54. License", v:"\u20B9 2,000 (FSSAI Agent fees)."},
            {l:"55. Buffer", v:"Remaining amount for emergencies."}
        ]);

        // F. MACHINERY
        addSec("F", "EQUIPMENT", [
            {l:"56. Main", v:"Custom Fabricated Cart (Thela)."},
            {l:"57. Cooking", v:"High-pressure Gas Burner / Sigdi (Coal)."},
            {l:"58. Power", v:"Battery operated Lights."},
            {l:"59. Install", v:"Self-setup."},
            {l:"60. Maint", v:"Cart wheel greasing / Gas pipe check."},
            {l:"61. Spares", v:"Extra Gas Regulator / Lighter."},
            {l:"62. Life", v:"Cart lasts 3-5 years with repair."}
        ]);

        // G. HR
        addSec("G", "MANPOWER", [
            {l:"63. Staff", v:"Self (Owner) + 1 Helper (Chotu/Boy)."},
            {l:"64. Role", v:"Owner cooks/serves. Helper washes dishes/cleans."},
            {l:"65. Salary", v:"\u20B9 6,000 - \u20B9 9,000 for Helper."},
            {l:"66. Manager", v:"<strong>Not Required.</strong> Owner manages everything."},
            {l:"67. Training", v:"Basic hygiene and speed training."},
            {l:"68. Hiring", v:"Village reference / Local contact."},
            {l:"69. Welfare", v:"Food and tea provided to helper."},
            {l:"70. Laws", v:"Informal sector (Daily wages usually)."}
        ]);

        // H. OPEX
        addSec("H", "DAILY/MONTHLY EXPENSES", [
            {l:"71. Rent/Fees", v:"\u20B9 100 - 300 daily (Local municipal/mgmt charges)."},
            {l:"72. Gas/Fuel", v:"\u20B9 1,800 per cylinder (Lasts ~1 week)."},
            {l:"73. Raw Material", v:"Daily purchase from wholesale market."},
            {l:"74. Water", v:"\u20B9 50 daily (Commercial Jars for cooking/drinking)."},
            {l:"75. Transport", v:"\u20B9 100 daily (Auto/Tempo for material)."},
            {l:"76. Disposables", v:"\u20B9 200 daily (Plates/Cups)."},
            {l:"77. Electricity", v:"\u20B9 500/month (Fixed charge if shared)."},
            {l:"78. Wastage", v:"Expect 5% food wastage daily."},
            {l:"79. Mobile", v:"\u20B9 300/month (Data for UPI payments)."},
            {l:"80. Cleaning", v:"Soap/Cloth costs."},
            {l:"81. Total", v:"Approx \u20B9 15k - 20k monthly overheads."}
        ]);

        // I. FINANCE
        addSec("I", "FINANCE & LOANS", [
            {l:"82. Funding", v:"Typically 100% Self-funded / Hand loans."},
            {l:"83. Loan", v:"Available under <strong>PM SVANidhi</strong> Scheme."},
            {l:"84. Scheme", v:"PM SVANidhi (Street Vendor AtmaNirbhar Nidhi)."},
            {l:"85. Amount", v:"\u20B9 10,000 (1st Tranche)."},
            {l:"86. Interest", v:"Subsidized (7% Interest Subsidy)."},
            {l:"87. Tenure", v:"1 Year repayment."},
            {l:"88. Collateral", v:"<strong>None.</strong>"},
            {l:"89. Process", v:"Apply online or via Municipality."},
            {l:"90. KYC", v:"Aadhaar + Vending Certificate."},
            {l:"91. Bank", v:"Any Public Sector Bank."}
        ]);

        // J. SCHEMES
        addSec("J", "GOVT BENEFITS", [
            {l:"92. PM SVANidhi", v:"Best scheme specifically for street vendors."},
            {l:"93. Mudra", v:"Mudra Shishu (< 50k) is also applicable."},
            {l:"94. Cashback", v:"\u20B9 1,200 yearly cashback on Digital Transactions."},
            {l:"95. ID Card", v:"Get Street Vendor ID Card from Municipality (Protects from eviction)."}
        ]);

        // K. MARKETING
        addSec("K", "MARKETING", [
            {l:"101. Brand", v:"Cleanliness & Taste is your only brand."},
            {l:"102. Signage", v:"Clear Rate Card on the Cart (Vinyl)."},
            {l:"103. Digital", v:"Google Maps Pin (Very important for discovery)."},
            {l:"104. Social", v:"Ask customers to tag on Insta Stories."},
            {l:"105. Hygiene", v:"Wear gloves/cap. This attracts the premium crowd."},
            {l:"106. Offer", v:"Combo deals (e.g., Vada Pav + Chai)."},
            {l:"107. Sales", v:"Direct to customer (Standing)."},
            {l:"108. CAC", v:"Zero."},
            {l:"109. Loyalty", v:"Recognize regular customers."}
        ]);

        // L. PROFIT
        addSec("L", "PROFITABILITY", [
            {l:"110. Pricing", v:"Affordable (\u20B9 15 - \u20B9 50 per item)."},
            {l:"111. Volume", v:"High Volume game (Target 100+ plates/day)."},
            {l:"112. Margin", v:"<strong>50% - 60%</strong> Gross Margin (Food cost is low)."},
            {l:"113. Net Profit", v:"\u20B9 20,000 - \u20B9 40,000 per month (Take home)."},
            {l:"114. Cash", v:"Instant Cash (No credit given)."},
            {l:"115. ROI", v:"Full recovery of capital in 3-4 months."},
            {l:"116. Growth", v:"Expand to 2nd cart in 1 year."},
            {l:"117. Cycle", v:"Daily rotation of money."}
        ]);

        // M. RISK
        addSec("M", "RISKS", [
            {l:"118. Municipal", v:"Risk of cart confiscation if rules violated."},
            {l:"119. Hygiene", v:"Food poisoning complaint can kill business."},
            {l:"120. Weather", v:"Sales drop drastically in Heavy Rains."},
            {l:"121. Price", v:"Oil/Onion price hike reduces margin temporarily."},
            {l:"122. Competition", v:"New stall opening right next to you."},
            {l:"123. Health", v:"Standing all day causes health issues."},
            {l:"124. Mitigation", v:"Maintain good relations with local authorities."}
        ]);

        // N. GROWTH
        addSec("N", "GROWTH", [
            {l:"125. Scale", v:"Rent a small shop nearby."},
            {l:"126. Event", v:"Take Party Orders for bulk income."},
            {l:"127. Online", v:"Register on Zomato/Swiggy (Requires Shop FSSAI)."}
        ]);

        // O. DIGITAL
        addSec("O", "DIGITAL", [
            {l:"131. Payment", v:"QR Code Stand (Paytm/PhonePe) is mandatory."},
            {l:"132. Soundbox", v:"Audio confirmation box (Prevents fraud)."}
        ]);

        // P. ESG
        addSec("P", "SUSTAINABILITY", [
            {l:"137. Waste", v:"Dustbin attached to cart is mandatory."},
            {l:"138. Plates", v:"Use Paper/Leaf plates (No Plastic)."},
            {l:"139. Oil", v:"Do not reuse frying oil > 3 times (Health hazard)."}
        ]);

        // Q. VERDICT
        addSec("Q", "VERDICT", [
            {l:"142. Effort", v:"High Physical Hard work required."},
            {l:"143. Profit", v:"Excellent Return on Investment."},
            {l:"144. Risk", v:"Municipal/Legal Risk exists."},
            {l:"145. Fund", v:"Easily Affordable."},
            {l:"146. Type", v:"Simple Operation."},
            {l:"147. Status", v:"Highly Feasible for starters."},
            {l:"148. GO?", v:"<span style='color:green;font-weight:bold'>GO AHEAD \u2705</span>"}
        ]);
        
        return; // <--- EXIT HERE IF STREET FOOD
    }

    // =========================================================
    // 🟢 PART 2: STANDARD LOGIC FOR ALL OTHER BUSINESSES
    // =========================================================
    
    // 1. SMART CONTEXT GENERATOR
    let text = {
        tools: "Standard operational tools, safety kits, and cleaning equipment.",
        machines: "Computers, Office Furniture, Display Racks, and Air Conditioning.",
        stock: "Initial inventory of finished goods ready for sale.",
        license: "Shop & Establishment Act (Gumasta License).",
        waste: "General waste segregation (Wet/Dry) and responsible disposal.",
        infra: "Standard commercial interior with good lighting."
    };

    if (biz.cat === "Food") {
        text.tools = "Utensils, Knives, Packaging Sealer.";
        text.machines = "Gas Range, Deep Freezers, Mixers.";
        text.stock = "Raw Ingredients (Grains, Oil, Spices).";
        text.license = "FSSAI + Fire NOC + Health Trade License.";
        text.waste = "Wet/Dry segregation.";
        text.infra = "Kitchen ventilation & Wash area.";
    } 
    else if (biz.cat === "Retail") {
        text.tools = "Barcode Scanner, Tag Gun.";
        text.machines = "POS Computer, CCTV, AC, Racks.";
        text.stock = "Finished Goods.";
        text.license = "Shop & Establishment Act.";
        text.waste = "Cardboard recycling.";
        text.infra = "Glass frontage & Shelving.";
    } 
    else if (biz.cat === "Manufacturing") {
        text.tools = "Hand tools, Safety Gear.";
        text.machines = "Production Line, Motors.";
        text.stock = "Raw Materials.";
        text.license = "Factory License + PCB NOC.";
        text.waste = "Industrial waste disposal.";
        text.infra = "Industrial Shed & 3-Phase Power.";
    }
    
    // NICHE OVERRIDES (Fix for Xerox/Salon/Gym)
    let bName = biz.name.toLowerCase();
    if (bName.includes("xerox") || bName.includes("print")) {
        text.tools = "Paper Cutters, Staplers (Big/Small), Lamination Kit, Binding Machine.";
        text.machines = "Heavy Duty Photocopier (Canon/Ricoh), Color Printer, PC, Scanner.";
        text.stock = "A4/A3 Paper Reams (75gsm), Toner Cartridges, Spiral Coils.";
        text.waste = "Paper shredding and responsible paper recycling.";
        text.infra = "Customer Counter, Paper Storage Racks, Inverter Backup.";
    }
    else if (bName.includes("salon") || bName.includes("parlour")) {
        text.tools = "Scissors, Combs, Hair Dryers, Trimmers, Aprons, Towels.";
        text.machines = "Hydraulic Chairs, Steamers, Shampoo Station, AC, Full-length Mirrors.";
        text.stock = "Professional Shampoos, Creams, Dyes, Wax, Disposables.";
        text.infra = "Fancy Lighting, Water Connection, Private section for ladies.";
    }

    // 2. LOGIC VARIABLES
    const isMetro = tier > 1.5;
    const isRural = tier < 0.8;
    const tierName = isMetro ? "Metro City (Tier 1)" : (isRural ? "Rural / Semi-Urban" : "Tier 2/3 City");
    const rentCost = Math.round(op * 0.4); 
    const staffSal = isMetro ? "\u20B9 18,000 - 25,000" : (isRural ? "\u20B9 8,000 - 12,000" : "\u20B9 12,000 - 18,000");

    // A. IDENTITY
    addSec("A", "BUSINESS IDENTITY & STRATEGY", [
        {l:"1. Business Name", v:`Proposed Concept: <strong>${biz.name}</strong>. Ensure the name is catchy, easy to spell, and locally relevant.`},
        {l:"2. Industry Category", v:`This falls under the <strong>${biz.cat}</strong> sector, which is seeing steady demand in India.`},
        {l:"3. Niche / Sub-Category", v:`<strong>${biz.desc}</strong>. Focusing on this niche helps differentiate you from competitors.`},
        {l:"4. Nature of Business", v:"<strong>B2C (Business to Consumer)</strong>. You will deal directly with end customers."},
        {l:"5. Business Model", v:"<strong>Hybrid Model</strong>. Physical location combined with digital orders (WhatsApp/Phone)."},
        {l:"6. Operational Scale", v:"<strong>Micro Enterprise</strong>. Investment is optimized for this scale."},
        {l:"7. Legal Entity Type", v:"<strong>Sole Proprietorship</strong> is recommended initially for lower compliance burden."},
        {l:"8. Target Geography", v:`Primary Market: <strong>${state}</strong>. Targeting ${tierName} neighborhoods.`},
        {l:"9. Target Audience", v:"Local residents and walk-in customers seeking convenience and quality."},
        {l:"10. Seasonality", v:"Generally <strong>Year-round Demand</strong>, with potential sales spikes during festivals."}
    ]);

    // B. LOCATION
    addSec("B", "LOCATION & INFRASTRUCTURE PLANNING", [
        {l:"11. Location Type", v:biz.cat==="Manufacturing"?"Industrial Area / Outskirts":"High Street / Main Market Area."},
        {l:"12. City Tier Impact", v:`Selected: <strong>${tierName}</strong>. Costs are adjusted for local rates.`},
        {l:"13. Land / Premises", v:"<strong>Lease Model Recommended</strong>. Buying property is not capital efficient at this stage."},
        {l:"14. Estimated Rent", v:`Budget approx. <strong>${fmt(rentCost)} per month</strong> based on location tier.`},
        {l:"15. Rental Deposit", v:`Market standard is 6 months rent: <strong>${fmt(rentCost * 6)}</strong> (Refundable).`},
        {l:"16. Lease Agreement", v:"Registered Rent Agreement (Notarized). Cost approx \u20B9 3,000."},
        {l:"17. Carpet Area", v:biz.cat==="Manufacturing"?"1000+ sqft":"200-500 sqft Shop/Office."},
        {l:"18. Parking Facility", v:biz.cat==="Retail"||biz.cat==="Food"?"Essential for customer convenience.":"Optional."},
        {l:"19. Setup Requirements", v:text.infra}
    ]);

    // C. LEGAL
    addSec("C", "LEGAL & REGULATORY COMPLIANCE", [
        {l:"20. Registration Cost", v:"Budget around <strong>\u20B9 5,000 - \u20B9 10,000</strong> for all initial registrations."},
        {l:"21. PAN Card", v:"Personal PAN of the Proprietor is used."},
        {l:"22. TAN Number", v:"Required only if you deduct TDS (Rent > 50k or Salaries)."},
        {l:"23. Udyam Registration", v:"<strong>Mandatory & Free</strong>. Essential for MSME loans and subsidies."},
        {l:"24. GST Registration", v:"Mandatory if turnover exceeds \u20B9 40L (Goods) or \u20B9 20L (Services)."},
        {l:"25. Shop & Est. Act", v:"<strong>Gumasta License</strong>. Mandatory for all shops within municipal limits."},
        {l:"26. Specific License", v:text.license},
        {l:"27. Trade License", v:"Issued by the local Municipal Corporation."},
        {l:"28. Factory License", v:biz.cat==="Manufacturing"?"Required under Factories Act":"Not Applicable."},
        {l:"29. Pollution Control", v:biz.cat==="Manufacturing"?"PCB Consent to Establish":"Exempt Category."},
        {l:"30. Fire NOC", v:"Required if area > 500 sq.ft or involves kitchen."},
        {l:"31. Professional Tax", v:`Applicable in ${state}. Approx \u20B9 2,500 per year.`},
        {l:"32. IEC Code", v:"Only required if you plan to import/export goods."},
        {l:"33. Sector Rules", v:biz.cat==="Education"?"Local Education Board norms":"General Commercial Laws."}
    ]);

    // D. DOCS
    addSec("D", "REQUIRED DOCUMENTATION (KYC)", [
        {l:"34. Aadhaar Card", v:"Linked with Mobile for OTP verification."},
        {l:"35. PAN Card", v:"Essential for tax filing and bank account opening."},
        {l:"36. Address Proof", v:"Electricity Bill of the business premises."},
        {l:"37. Rent Agreement", v:"Registered copy on Stamp Paper."},
        {l:"38. Utility Bill", v:"Latest Electricity Bill (not older than 3 months)."},
        {l:"39. Bank Proof", v:"Cancelled Cheque of Current/Savings Account."},
        {l:"40. Photographs", v:"10-15 Passport size photos of the proprietor."},
        {l:"41. Partnership Deed", v:"Only if starting with a partner (Notarized)."},
        {l:"42. Project Report", v:"Detailed DPR required for Bank Loans."},
        {l:"43. KYC Norms", v:"Standard CKYC norms apply."}
    ]);

    // E. CAPITAL
    addSec("E", "CAPITAL ALLOCATION (BUDGETING)", [
        {l:"44. Total Project Cost", v:`<strong>${fmt(inv)}</strong>. Estimated fund required to launch.`},
        {l:"45. Rental Deposits", v:`${fmt(rentCost * 6)}. Security deposit for landlord.`},
        {l:"46. Interior & Civil", v:`${fmt(Math.round(inv * 0.15))}. Paint, tiles, electric wiring.`},
        {l:"47. Machinery & Assets", v:`${fmt(Math.round(inv * 0.40))}. Core assets: ${text.machines}`},
        {l:"48. Tools & Utensils", v:`${fmt(Math.round(inv * 0.05))}. Small items: ${text.tools}`},
        {l:"49. Furniture", v:`${fmt(Math.round(inv * 0.10))}. Racks, counters, chairs.`},
        {l:"50. IT & Hardware", v:`${fmt(Math.round(inv * 0.05))}. PC, Printer, CCTV.`},
        {l:"51. Software Costs", v:"\u20B9 15,000 (Approx). Billing/Accounting software license."},
        {l:"52. Opening Stock", v:`${fmt(Math.round(inv * 0.15))}. First month's stock: ${text.stock}`},
        {l:"53. Marketing", v:"\u20B9 20,000. Inauguration event and ads."},
        {l:"54. Legal Fees", v:"\u20B9 10,000. Gov fees and consultant charges."},
        {l:"55. Contingency Fund", v:`${fmt(Math.round(inv * 0.05))}. Emergency cash buffer.`}
    ]);

    // F. MACHINERY
    addSec("F", "MACHINERY & TECHNOLOGY", [
        {l:"56. Primary Machinery", v:text.machines},
        {l:"57. Capacity Planning", v:"Should handle 1.5x of projected daily sales."},
        {l:"58. Power Requirement", v:biz.cat==="Manufacturing"?"3-Phase Industrial":"Single Phase Commercial."},
        {l:"59. Installation Cost", v:"5% of machine cost (Wiring/Plumbing)."},
        {l:"60. Maintenance (AMC)", v:"Budget 5-8% of asset value annually for repairs."},
        {l:"61. Spare Parts", v:"Keep critical consumables/spares in stock."},
        {l:"62. Depreciation", v:"Assets depreciate @ 15% per year (Tax Benefit)."}
    ]);

    // G. HR
    addSec("G", "HUMAN RESOURCES (MANPOWER)", [
        {l:"63. Staff Requirement", v:"Start lean. <strong>2 - 3 Full-time employees</strong> initially."},
        {l:"64. Skill Mix", v:"1 Manager/Cashier + 2 Helpers/Staff."},
        {l:"65. Salary Range", v:`${staffSal} per month per employee.`},
        {l:"66. Manager Salary", v:isMetro ? "\u20B9 22,000+" : "\u20B9 15,000+"},
        {l:"67. Training", v:"1 week on-the-job training required."},
        {l:"68. Recruitment Source", v:"Local references or 'Hiring' posters."},
        {l:"69. Staff Welfare", v:"\u20B9 2,000/month for Tea/Snacks."},
        {l:"70. Labour Compliance", v:"Maintain Muster Roll (Attendance)."}
    ]);

    // H. OPEX
    addSec("H", "MONTHLY OPERATING EXPENSES", [
        {l:"71. Rent", v:fmt(rentCost)},
        {l:"72. Electricity Bill", v:`${fmt(Math.round(op * 0.15))} (Commercial Rate).`},
        {l:"73. Water Charges", v:"\u20B9 500 - \u20B9 1,000"},
        {l:"74. Internet/Wi-Fi", v:"\u20B9 1,000 (Broadband)."},
        {l:"75. Transport/Logistics", v:`${fmt(Math.round(op * 0.10))} (Sourcing).`},
        {l:"76. Repairs & Maint", v:"\u20B9 2,000 buffer."},
        {l:"77. Consumables", v:"\u20B9 3,000"},
        {l:"78. Accounting Fees", v:"\u20B9 3,000 (Part-time CA)."},
        {l:"79. Software Sub", v:"\u20B9 500 ( renewals)."},
        {l:"80. Security", v:"Optional (Self-managed)."},
        {l:"81. Insurance Premium", v:"\u20B9 1,000 (Amortized)."}
    ]);

    // I. FINANCE
    addSec("I", "FINANCING & LOAN ELIGIBILITY", [
        {l:"82. Own Contribution", v:shortfall > 0 ? `You have <strong>${fmt(budget)}</strong>. Margin money required.` : "100% Self Funded."},
        {l:"83. Loan Requirement", v:shortfall > 0 ? `Loan needed: <strong>${fmt(shortfall)}</strong>.` : "Nil."},
        {l:"84. Type of Loan", v:"Term Loan (Assets) + Cash Credit (Working Capital)."},
        {l:"85. Interest Rate", v:"9% to 11% p.a. (Govt Schemes)."},
        {l:"86. Loan Tenure", v:"5 Years (60 Months)."},
        {l:"87. Estimated EMI", v:shortfall > 0 ? `Approx <strong>${fmt(emi)}</strong> / month.` : "Nil"},
        {l:"88. Collateral", v:shortfall < 1000000 ? "Not Required (CGTMSE Cover)." : "May be required."},
        {l:"89. Margin Money", v:"20-25% of Project Cost from own pocket."},
        {l:"90. Credit Score", v:"CIBIL 700+ recommended for quick approval."},
        {l:"91. Preferred Banks", v:"Public Sector Banks (SBI, PNB, BOB, Canara)."}
    ]);

    // J. SCHEMES
    addSec("J", "GOVERNMENT SCHEMES (SUBSIDY)", [
        {l:"92. PMEGP Scheme", v:"15-35% Subsidy on project cost (Online Application)."},
        {l:"93. Mudra Shishu", v:"Loan up to \u20B9 50,000 (No Processing Fee)."},
        {l:"94. Mudra Kishor", v:"Loan \u20B9 50k to \u20B9 5 Lakhs."},
        {l:"95. Mudra Tarun", v:"Loan \u20B9 5L to \u20B9 10 Lakhs."},
        {l:"96. CGTMSE Cover", v:"Collateral-free guarantee for bank loans."},
        {l:"97. Stand-Up India", v:"For SC/ST/Women entrepreneurs (> \u20B9 10L)."},
        {l:"98. PMFME Scheme", v:"For Food Processing units (35% Subsidy)."},
        {l:"99. State Policies", v:`Check ${state} industrial policy for interest rebates.`},
        {l:"100. MSME Databank", v:"Register to get priority in Govt procurement."}
    ]);

    // K. MARKETING
    addSec("K", "MARKETING & SALES STRATEGY", [
        {l:"101. Branding", v:"Professional Logo and Signboard are essential."},
        {l:"102. Design Budget", v:"\u20B9 5,000."},
        {l:"103. Website Presence", v:"Google My Business Listing (Mandatory)."},
        {l:"104. Social Media", v:"Instagram/WhatsApp Status updates."},
        {l:"105. Online Ads", v:"Google Local Ads (\u20B9 200/day)."},
        {l:"106. Offline Marketing", v:"Newspaper Pamphlets / Local Banners."},
        {l:"107. Sales Channels", v:"In-store + Delivery (Zomato/Swiggy if Food)."},
        {l:"108. CAC (Acquisition)", v:"Target < \u20B9 100 per new customer."},
        {l:"109. Retention", v:"Loyalty Points / Good Service."}
    ]);

    // L. PROFITABILITY
    const daily = Math.round((op * 4.0) / 25);
    addSec("L", "REVENUE & PROFITABILITY", [
        {l:"110. Pricing Strategy", v:"Competitive / Market Standard."},
        {l:"111. Average Ticket Size", v:biz.cat==="Food" ? "\u20B9 200 - 400" : "\u20B9 500 - 1500."},
        {l:"112. Target Sales Vol", v:`Approx <strong>${daily} orders/day</strong> needed.`},
        {l:"113. Net Margin", v:`<strong>${(biz.margin*100).toFixed(0)}%</strong> (Net Profit after expenses).`},
        {l:"114. Monthly Net Profit", v:`Projected: <strong>${fmt(Math.round(op * 4.0 * biz.margin))}</strong> in stable phase.`},
        {l:"115. Break-Even Point", v:`${document.getElementById("breakEven").innerText} (Recovery Time).`},
        {l:"116. ROI (Yearly)", v:"30% - 40% Return on Investment."},
        {l:"117. Cash Flow Cycle", v:"Daily (B2C Model) - No Credit issues."}
    ]);

    // M. RISK
    addSec("M", "RISK ANALYSIS & MITIGATION", [
        {l:"118. Market Risk", v:"Moderate. Steady demand expected."},
        {l:"119. Competition", v:"Expect competition from local players."},
        {l:"120. Regulatory Risk", v:"Low, provided licenses are renewed on time."},
        {l:"121. Operational Risk", v:"Staff turnover is main issue."},
        {l:"122. Financial Risk", v:"Initial cash crunch (First 6 months)."},
        {l:"123. Supply Chain", v:"Raw material price fluctuations."},
        {l:"124. Insurance", v:"Mandatory (Fire/Burglary policy)."}
    ]);

    // N. GROWTH
    addSec("N", "SCALABILITY & FUTURE GROWTH", [
        {l:"125. Expansion Plan", v:"Look for 2nd Unit after 18 months."},
        {l:"126. Franchising", v:"Possible after brand stabilization."},
        {l:"127. Product Line", v:"Add complementary products to increase sales."},
        {l:"128. Geographic", v:"Expand delivery radius to nearby towns."},
        {l:"129. Tech Upgrade", v:"Launch own App/Website to save commissions."},
        {l:"130. Exit Strategy", v:"Sell business or Automate operations."}
    ]);

    // O. DIGITAL
    addSec("O", "DIGITAL TOOLS & AUTOMATION", [
        {l:"131. Billing Software", v:"Vyapar / Tally."},
        {l:"132. Inventory Mgmt", v:"Digital Tracking to prevent theft."},
        {l:"133. CRM Tool", v:"WhatsApp Business API."},
        {l:"134. Payments", v:"All-in-One UPI QR + Card Machine."},
        {l:"135. Data Backup", v:"Google Drive Cloud Sync (Daily)."},
        {l:"136. Cyber Security", v:"Basic Antivirus is sufficient."}
    ]);

    // P. ESG
    addSec("P", "SUSTAINABILITY (ESG)", [
        {l:"137. Energy Efficiency", v:"Use LED Lights and 5-Star Appliances."},
        {l:"138. Waste Management", v:text.waste},
        {l:"139. Packaging", v:"Avoid Single-use Plastic. Use Paper/Cloth."},
        {l:"140. Local Sourcing", v:"Buy local to reduce carbon footprint."},
        {l:"141. CSR", v:"Small community donations (Optional)."}
    ]);

    // Q. VERDICT
    addSec("Q", "FINAL DECISION PARAMETERS", [
        {l:"142. Skill Match", v: document.getElementById("skillInput").value >= 2 ? "<strong>Good Match.</strong> You have aptitude." : "<strong>Training Needed.</strong> Gap identified."},
        {l:"143. Time Commitment", v:"High (10-12 Hrs/day). Full involvement req."},
        {l:"144. Stress Level", v:"Moderate to High initially."},
        {l:"145. Family Support", v:"Crucial for funding and backup."},
        {l:"146. Complexity", v: biz.risk.o > 60 ? "Complex Operations." : "Simple Operations."},
        {l:"147. Capital Adequacy", v: shortfall > 0 ? "<span style='color:#ef4444'>Deficit. Loan Required.</span>" : "<span style='color:#10b981'>Sufficient Funds.</span>"},
        {l:"148. FINAL VERDICT", v: document.getElementById("bfiScore").innerText > 60 ? "<span style='color:green; font-weight:bold; font-size:1.2rem;'>GO AHEAD \u2705</span>" : "<span style='color:red; font-weight:bold; font-size:1.2rem;'>RE-EVALUATE \uD83D\uDED1</span>"}
    ]);
}

// --- 7. COMPLETE GOVERNMENT SCHEMES DATABASE (28 STATES + 8 UTs) ---
const schemeDB = {
    // --- CENTRAL GOVT (PAN INDIA) ---
    "Central": [
        { n: "PMEGP (Prime Minister's Employment Generation)", e: "Age 18+, 8th Pass for >10L project.", d: "Aadhaar, PAN, Caste Cert, Project Report.", t: "New Micro Units.", dur: "45-60 Days.", b: "Subsidy: 15-35% of Project Cost (Max 50L)." },
        { n: "PM Mudra Yojana (PMMY)", e: "Non-corporate, non-farm small micro enterprises.", d: "Identity, Address, Business Proof.", t: "Small Business.", dur: "7-15 Days.", b: "Collateral-free loan: Shishu (50k), Kishor (5L), Tarun (10L)." },
        { n: "CGTMSE Scheme", e: "New/Existing MSEs.", d: "ITR, Project Report, Udyam.", t: "Up to 2 Cr.", dur: "Bank dependent.", b: "Credit Guarantee (Govt pays bank if you default)." },
        { n: "Stand-Up India", e: "SC/ST or Women Entrepreneurs (18+).", d: "Caste Cert (if app), PAN, Aadhaar.", t: "Greenfield Projects.", dur: "30-45 Days.", b: "Bank loan \u20B9 10L - 1 Cr for first-time venture." }
    ],

    // --- NORTH INDIA ---
    "DL": [{ n: "Delhi Startup Policy", e: "Registered in Delhi, Innovative idea.", d: "Pitch Deck, Registration.", t: "Startups.", dur: "Rolling.", b: "Collateral-free loans & Incubation support." }],
    "HR": [{ n: "Haryana Enterprise Promotion Policy (HEPP)", e: "MSMEs in Haryana.", d: "Udyam, Haryana Udhyam Memo.", t: "Micro/Small.", dur: "Continuous.", b: "Interest subsidy 5% for 3 years, Stamp duty refund." }],
    "HP": [{ n: "Mukhya Mantri Swavlamban Yojana (MMSY)", e: "HP Resident, Age 18-45.", d: "Bonafide Himachali, Land papers.", t: "Inv up to 60L.", dur: "45 Days.", b: "25-30% Subsidy on Machinery cost + 5% Interest Subvention." }],
    "JK": [{ n: "J&K REGP / Tejaswini Scheme", e: "J&K Domicile (Tejaswini for Women 18-35).", d: "Domicile, 10th Pass.", t: "Service/Trading.", dur: "2 Months.", b: "35% Subsidy (REGP) or \u20B9 5L Loan assistance (Tejaswini)." }],
    "PB": [{ n: "Punjab Rozgar (PMEGP State Nodal)", e: "Punjab Resident.", d: "Aadhaar, Project Report.", t: "All sectors.", dur: "45 Days.", b: "Facilitates PMEGP with state-level handholding." }],
    "UP": [{ n: "Mukhyamantri Yuva Swarozgar Yojana", e: "UP Resident, 10th Pass, Age 18-40.", d: "Domicile, Marksheet, Affidavit.", t: "Industry < 25L, Service < 10L.", dur: "1 Month.", b: "25% Margin Money Subsidy on project cost." }, { n: "ODOP (One District One Product)", e: "Artisans/Units in specific district product.", d: "Unit Proof.", t: "Micro.", dur: "Ongoing.", b: "Margin Money Subsidy up to 25%." }],
    "UK": [{ n: "Mukhyamantri Swarozgar Yojana (MSY)", e: "Uttarakhand Resident.", d: "Domicile, Affidavit.", t: "Mfg < 25L, Service < 10L.", dur: "30 Days.", b: "Margin money subsidy 15-25% based on category." }],
    "LA": [{ n: "Ladakh Greenhouse / PMEGP", e: "Ladakh Resident.", d: "Resident Cert.", t: "Agri/Food Processing.", dur: "Seasonal.", b: "75% Subsidy for Commercial Greenhouses." }],
    "CH": [{ n: "PMEGP (Chandigarh KVIB)", e: "Chandigarh Resident.", d: "Residence Proof.", t: "Service/Retail.", dur: "45 Days.", b: "25% Subsidy (Urban rate) on project cost." }],

    // --- WEST INDIA ---
    "GJ": [{ n: "Vajpayee Bankable Yojana", e: "Gujarat Resident, Age 18-65.", d: "Election Card, School Leaving Cert.", t: "Cottage Industries.", dur: "1-2 Months.", b: "Subsidy on loan amount (Max \u20B9 80,000 for industry)." }],
    "GA": [{ n: "CMRY (Chief Minister's Rojgar Yojana)", e: "Goa Resident (15 Years), Age 18-45.", d: "15-Year Residence Cert, Qualification.", t: "Project < 25L.", dur: "2 Months.", b: "Low interest rate (Share capital assistance)." }],
    "MH": [{ n: "CMEGP (Chief Minister Emp Prog)", e: "Maharashtra Domicile, Age 18-45.", d: "Domicile Cert, Education Proof.", t: "Mfg < 50L, Service < 10L.", dur: "30-60 Days.", b: "Subsidy 15-35% of project cost (State counterpart to PMEGP)." }, { n: "Women Entrepreneurship Policy", e: "100% Women owned.", d: "Udyam.", t: "All.", dur: "Case basis.", b: "Capital subsidy 15-35%." }],
    "RJ": [{ n: "Indira Gandhi Shehari Credit", e: "Urban street vendors, Age 18-40.", d: "Jan Aadhaar Card.", t: "Street Vendors.", dur: "21 Days.", b: "Interest-free loan up to \u20B9 50,000." }, { n: "Mukhyamantri Laghu Udyog", e: "RJ Resident.", d: "Bhamashah Card.", t: "Up to 10 Cr.", dur: "45 Days.", b: "5-8% Interest Subsidy." }],
    "DN": [{ n: "DNH & DD Industrial Policy", e: "Local Entrepreneur.", d: "Domicile.", t: "Manufacturing.", dur: "Case basis.", b: "Capital Investment Subsidy 10%." }],

    // --- SOUTH INDIA ---
    "AP": [{ n: "Jagananna Thodu", e: "Small street vendors/hawkers.", d: "Aadhaar, Bank A/c, Vending ID.", t: "Micro Vendors.", dur: "30 Days.", b: "Interest-free loan of \u20B9 10,000." }, { n: "YSR Cheyutha", e: "SC/ST/BC Women aged 45-60.", d: "Caste Cert, Aadhaar.", t: "Retail/Cattle.", dur: "Annual.", b: "\u20B9 75,000 financial assistance over 4 years." }],
    "KA": [{ n: "CMEGP Karnataka", e: "Rural/Urban unemployed youth.", d: "Residency Proof, Caste Cert.", t: "Unit cost up to 10L.", dur: "45 Days.", b: "Subsidy up to 35% depending on category." }, { n: "Elevate Scheme", e: "Startups registered in Karnataka.", d: "Pitch Deck.", t: "Tech/Innovation.", dur: "Annual Call.", b: "Grant-in-aid up to \u20B9 50 Lakhs." }],
    "KL": [{ n: "KESRU (Kerala Self Employment)", e: "Unemployed, registered with Emp Exchange.", d: "Exchange Reg No, Ration Card.", t: "Micro units.", dur: "1 Month.", b: "20% Subsidy on bank loan." }, { n: "WE Mission", e: "Women Entrepreneurs.", d: "Project Rpt.", t: "Small Biz.", dur: "Ongoing.", b: "Soft loans & scaling support." }],
    "TN": [{ n: "NEEDS Scheme", e: "First Gen Entrepreneur, Degree/Diploma.", d: "Degree Cert, Transfer Cert.", t: "Project 10L - 5Cr.", dur: "2-3 Months.", b: "25% Capital Subsidy (Max \u20B9 75 Lakhs)." }, { n: "UYEGP", e: "Less educated youth.", d: "8th Pass.", t: "Project < 15L.", dur: "45 Days.", b: "25% Subsidy." }],
    "TG": [{ n: "T-IDEA", e: "Telangana Resident.", d: "Caste/Nativity Cert.", t: "Manufacturing.", dur: "Continuous.", b: "Investment subsidy 15% + Power cost reimbursement." }],
    "LD": [{ n: "Lakshadweep PMEGP Nodal", e: "Local Resident.", d: "Island ID.", t: "Coconut/Tuna processing.", dur: "Slow.", b: "Transport subsidy + PMEGP benefits." }],
    "PY": [{ n: "Motivation of Entrepreneurs", e: "Puducherry Resident.", d: "PIC Registration.", t: "New Units.", dur: "Annual.", b: "Investment subsidy 25%." }],

    // --- EAST INDIA ---
    "BR": [{ n: "Mukhyamantri Udyami Yojana", e: "Bihar Resident, 10+2 Pass, SC/ST/EBC/Women.", d: "Domicile, 10th/12th Marksheet.", t: "New Industries.", dur: "Annual cycle.", b: "Loan up to 10L (50% Subsidy + 50% Interest-free loan)." }],
    "JH": [{ n: "CMEGP (Jharkhand)", e: "Rural entrepreneurs.", d: "Caste/Income Cert, Project Report.", t: "Micro units.", dur: "60 Days.", b: "Subsidy up to 35% (State funded)." }],
    "OD": [{ n: "Swayam / Mukhyamantri Karma Tatpara", e: "Urban poor/youth.", d: "Resident Cert, BPL card.", t: "Micro projects.", dur: "Immediate.", b: "Interest-free loan up to \u20B9 1 Lakh." }],
    "WB": [{ n: "Bhabishyat Credit Card", e: "Age 18-45, WB Resident.", d: "Aadhaar, Project Idea.", t: "Project up to 5L.", dur: "Rolling.", b: "Loan with Govt Guarantee + Subsidy up to \u20B9 25,000." }, { n: "Karma Sathi Prakalpa", e: "Unemployed Youth.", d: "Voter ID.", t: "Small Biz.", dur: "Quick.", b: "Soft loan up to \u20B9 2 Lakhs." }],
    "AN": [{ n: "PMEGP (Andaman)", e: "Island Resident.", d: "Islander Card.", t: "Tourism/Fisheries.", dur: "45 Days.", b: "Higher subsidy rates for Island territories (up to 35%)." }],

    // --- CENTRAL INDIA ---
    "CG": [{ n: "Mukhyamantri Yuva Swarozgar Yojana", e: "Chhattisgarh Resident, 8th Pass.", d: "Affidavit, Project Report.", t: "Project up to 25L.", dur: "45 Days.", b: "Margin money subsidy 10-15%." }],
    "MP": [{ n: "Mukhyamantri Udyam Kranti Yojana", e: "MP Domicile, 12th Pass, Age 18-40.", d: "Samagra ID, Tax Returns.", t: "Projects 1L to 50L.", dur: "30 Days.", b: "3% Interest Subsidy + Bank Guarantee fee coverage." }],

    // --- NORTH EAST INDIA ---
    "AR": [{ n: "DDUSY (Deen Dayal Upadhyaya)", e: "Unemployed youth of Arunachal.", d: "APST Certificate.", t: "Project 10L - 50L.", dur: "2-3 Months.", b: "30% back-ended capital subsidy." }],
    "AS": [{ n: "SVAYEM (Swami Vivekananda)", e: "Youth of Assam, Age < 40.", d: "Voter ID, Skill Certificate.", t: "Manufacturing/Service.", dur: "Monthly.", b: "Seed capital up to \u20B9 50,000 per member." }],
    "MN": [{ n: "Start-Up Manipur", e: "Innovative ideas based in Manipur.", d: "Pitch Deck, Business Reg.", t: "Startups.", dur: "Rolling.", b: "Stand-up grant up to \u20B9 3 Lakhs." }],
    "ML": [{ n: "PRIME Meghalaya", e: "Entrepreneurs in Meghalaya.", d: "PRIME ID.", t: "Scalable business.", dur: "Cohort based.", b: "Kickstart grant up to \u20B9 5 Lakhs." }],
    "MZ": [{ n: "SEDP (Socio-Economic Dev Policy)", e: "Families below poverty line.", d: "Family ID.", t: "Small trades.", dur: "Annual.", b: "Financial assistance for trades/agri." }],
    "NL": [{ n: "CM Micro Finance Initiative", e: "Nagaland resident.", d: "Indigenous Inhabitant Cert.", t: "Agri/Allied/Micro.", dur: "2 Months.", b: "Subsidy 10% + Interest subvention." }],
    "SK": [{ n: "SYSS (Skilled Youth Startup)", e: "Sikkim Subject, Unemployed.", d: "SSC (Sikkim Subject Cert).", t: "Technical/Non-technical.", dur: "Annual.", b: "50% Subsidy on loans." }],
    "TR": [{ n: "Swabalamban", e: "Unemployed youth of Tripura.", d: "PRTC (Perm Resident).", t: "Self-employment.", dur: "1 Month.", b: "Subsidy linked to bank loan." }]
};

function renderSchemes() {
    const state = document.getElementById("schemeStateSelect").value;
    // Fallback to Central if state not found, but if state is selected, show State + Central
    const schemes = schemeDB[state] ? [...schemeDB[state], ...schemeDB["Central"]] : schemeDB["Central"];
    
    const container = document.getElementById("schemesList");
    container.innerHTML = "";

    schemes.forEach(s => {
        container.innerHTML += `
            <div class="card" style="border-left:4px solid #2563eb; margin-bottom:15px; padding:20px;">
                <h3 style="color:#0f172a; margin-bottom:10px; font-size:1.1rem; border-bottom:1px solid #e2e8f0; padding-bottom:5px;">${s.n}</h3>
                <div style="font-size:0.9rem; line-height:1.6; color:#334155;">
                    <p><strong>&#9989; Eligibility:</strong> ${s.e}</p>
                    <p><strong>&#128196; Documents:</strong> ${s.d}</p>
                    <p><strong>&#128176; Scale:</strong> ${s.t}</p>
                    <p><strong>&#9201; Time:</strong> ${s.dur}</p>
                    <p style="margin-top:8px; color:#10b981; background:#ecfdf5; padding:5px; border-radius:4px;"><strong>&#9733; Benefit:</strong> ${s.b}</p>
                </div>
            </div>`;
    });
}
    </script>
</body>
</html>
