<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BizMitra Pro | AI Business Master Engine</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. CSS VARIABLES & RESET --- */
        :root {
            --primary: #0f172a;       /* Slate 900 */
            --primary-light: #1e293b; /* Slate 800 */
            --accent: #2563eb;        /* Blue 600 */
            --accent-dark: #1d4ed8;
            --success: #10b981;       /* Green 500 */
            --warning: #f59e0b;       /* Amber 500 */
            --danger: #ef4444;        /* Red 500 */
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --text-main: #334155;
            --border: #cbd5e1;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            min-height: 100vh; /* Allow scrolling */
            display: block;
        }

        /* --- 2. SIDEBAR (FIXED LEFT) --- */
        .sidebar {
            position: fixed;
            top: 0; left: 0; bottom: 0;
            width: 340px;
            background: var(--primary);
            color: white;
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
            border-right: 1px solid #334155;
            box-shadow: 4px 0 15px rgba(0,0,0,0.3);
            z-index: 100;
        }

        .brand {
            font-family: 'Merriweather', serif;
            font-size: 1.8rem;
            margin-bottom: 5px;
            color: white;
            text-align: center;
        }
        .brand span { color: var(--accent); }
        .tagline { text-align: center; color: #94a3b8; font-size: 0.8rem; margin-bottom: 25px; }

        .input-group { margin-bottom: 18px; }
        .input-group label { display: block; font-size: 0.85rem; margin-bottom: 6px; color: #cbd5e1; font-weight: 600; }
        
        select, input[type="number"], input[type="range"] {
            width: 100%; padding: 10px; border-radius: 6px;
            border: 1px solid #475569; background: var(--primary-light);
            color: white; font-size: 0.95rem; transition: 0.3s;
        }
        select:focus, input:focus { outline: none; border-color: var(--accent); }

        .slider-val { float: right; color: var(--accent); font-weight: bold; font-size: 0.85rem; }

        /* Tools Buttons */
        .tools-area { border-top: 1px solid #334155; padding-top: 20px; margin-top: 10px; }
        .tool-btn {
            width: 100%; padding: 12px; margin-bottom: 10px;
            background: #334155; color: white; border: none; border-radius: 6px;
            cursor: pointer; font-weight: 600; text-align: left; transition: 0.2s;
            display: flex; align-items: center; gap: 10px;
        }
        .tool-btn:hover { background: #475569; }
        .tool-btn.primary { background: var(--accent); }
        .tool-btn.primary:hover { background: var(--accent-dark); }

        /* --- 3. MAIN CONTENT (OFFSET RIGHT) --- */
        .main-content {
            margin-left: 340px;
            padding: 40px;
            min-height: 100vh;
        }

        /* Headers */
        .header-panel {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #e2e8f0;
        }
        .header-panel h1 { font-size: 2rem; color: var(--primary); font-family: 'Merriweather', serif; }
        .status-badge { background: #e2e8f0; padding: 5px 12px; border-radius: 15px; font-weight: 600; font-size: 0.85rem; }

        /* Dashboard Grid */
        .grid-container {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;
            margin-bottom: 30px;
        }
        .card {
            background: var(--card-bg); padding: 25px; border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid var(--border);
        }

        /* Score Card */
        .score-card { text-align: center; border-top: 5px solid var(--accent); }
        .score-val { font-size: 3rem; font-weight: 800; color: var(--primary); margin: 10px 0; }
        .score-label { font-size: 0.8rem; color: #64748b; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; }
        
        .info-label { font-size: 0.8rem; color: #64748b; font-weight: 600; text-transform: uppercase; margin-bottom: 5px; }
        .info-val { font-size: 1.4rem; font-weight: 700; color: var(--primary); }
        .text-green { color: var(--success); } .text-red { color: var(--danger); } .text-orange { color: var(--warning); }

        /* Report Sections */
        .report-section-wrapper { background: white; border-radius: 12px; padding: 30px; margin-top: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .section-block { margin-bottom: 40px; border-left: 4px solid var(--border); padding-left: 20px; }
        .section-block.active { border-left-color: var(--accent); }
        .section-title { font-size: 1.4rem; font-weight: 700; color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; font-family: 'Merriweather', serif; }
        .section-code { background: var(--primary); color: white; padding: 4px 10px; border-radius: 4px; font-size: 0.9rem; margin-right: 12px; font-family: 'Inter', sans-serif; }
        
        .data-row { display: flex; margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid #f1f5f9; }
        .data-label { flex: 0 0 220px; font-weight: 600; color: #475569; font-size: 0.9rem; display: flex; align-items: center; }
        .data-label span { background: #e2e8f0; color: #475569; font-size: 0.75rem; padding: 2px 6px; border-radius: 4px; margin-right: 8px; min-width: 25px; text-align: center; }
        .data-value { flex: 1; font-size: 0.95rem; line-height: 1.6; color: #1e293b; text-align: justify; }

        /* Visuals (Heatmap/Timeline) */
        .risk-container { display: flex; flex-direction: column; gap: 12px; }
        .risk-bar-group { display: flex; align-items: center; }
        .risk-label { width: 140px; font-weight: 600; font-size: 0.85rem; }
        .progress-bg { flex: 1; height: 10px; background: #e2e8f0; border-radius: 5px; overflow: hidden; }
        .progress-fill { height: 100%; border-radius: 5px; transition: width 1s; }

        .timeline { position: relative; border-left: 3px solid #cbd5e1; margin-left: 10px; padding-left: 25px; margin-top: 15px; }
        .timeline-item { position: relative; margin-bottom: 25px; }
        .timeline-item::before { content: ''; position: absolute; left: -31px; top: 4px; width: 13px; height: 13px; background: var(--accent); border-radius: 50%; border: 3px solid white; box-shadow: 0 0 0 1px var(--accent); }
        .time-day { font-size: 0.8rem; font-weight: 800; color: var(--accent); text-transform: uppercase; }
        .time-task { font-weight: 700; font-size: 1.1rem; color: var(--primary); margin: 3px 0; }
        .time-desc { font-size: 0.9rem; color: #64748b; }

        .fin-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.9rem; }
        .fin-table th, .fin-table td { padding: 12px; text-align: left; border-bottom: 1px solid var(--border); }
        .fin-table th { background-color: #f8fafc; font-weight: 700; color: var(--primary); }

        /* --- FEATURES: FINDER & COMPARE --- */
        .match-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; }
        .match-card { background: white; padding: 20px; border-radius: 8px; border: 1px solid var(--border); transition: 0.2s; position: relative; }
        .match-card:hover { transform: translateY(-3px); border-color: var(--accent); box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .match-badge { display: inline-block; padding: 3px 8px; border-radius: 4px; font-size: 0.75rem; margin-bottom: 8px; font-weight: bold; }

        .compare-table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .compare-table th, .compare-table td { padding: 15px; text-align: left; border-bottom: 1px solid #f1f5f9; width: 33%; }
        .compare-table th { background: var(--primary); color: white; }
        .compare-table .winner { background: #dcfce7; color: #166534; font-weight: bold; }

        /* Welcome */
        .welcome-screen { min-height: 80vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: #64748b; }
        .print-btn { padding: 8px 16px; background: var(--primary); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600; }

        /* Responsive */
        @media (max-width: 1000px) {
            .sidebar { position: relative; width: 100%; height: auto; }
            .main-content { margin-left: 0; }
        }
        @media print {
            .sidebar, .print-btn { display: none; }
            .main-content { margin: 0; padding: 0; }
            .card { break-inside: avoid; border: 1px solid #000; box-shadow: none; margin-bottom: 20px; }
            .section-block { break-inside: avoid; page-break-after: always; border: none; padding: 0; }
        }
/* --- SIDEBAR FOOTER & INFO PAGES --- */
.sidebar-footer {
    margin-top: auto; /* Pushes to bottom */
    padding-top: 20px;
    border-top: 1px solid #334155;
}
.footer-link {
    display: block; color: #94a3b8; text-decoration: none; font-size: 0.85rem;
    padding: 8px 0; cursor: pointer; transition: 0.2s;
}
.footer-link:hover { color: var(--accent); padding-left: 5px; }

/* Info Page Content */
.info-container { max-width: 800px; margin: 0 auto; line-height: 1.7; color: #334155; }
.info-container h1 { color: var(--primary); margin-bottom: 20px; font-family: 'Merriweather', serif; }
.info-container h2 { color: var(--primary); margin-top: 30px; margin-bottom: 15px; font-size: 1.4rem; }
.info-container p { margin-bottom: 15px; }
.math-box { background: #f8fafc; border-left: 4px solid var(--accent); padding: 20px; margin: 20px 0; border-radius: 0 8px 8px 0; }
.math-formula { font-family: monospace; background: #e2e8f0; padding: 2px 6px; border-radius: 4px; color: #0f172a; }

/* --- ROTATING LOGO & INTRO --- */
.rotating-logo {
    position: fixed;
    top: 15px;
    right: 25px; /* Adjusts position to top-right */
    width: 60px; /* Size of the logo */
    height: 60px;
    z-index: 2000; /* Ensures it stays on top of everything except intro */
    animation: spinLogo 8s linear infinite;
    border-radius: 50%; /* Optional: makes it circular */
}

@keyframes spinLogo { 
    100% { transform: rotate(360deg); } 
}

#intro-screen {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background-color: #000;
    z-index: 9999;
    display: flex; justify-content: center; align-items: center;
    transition: opacity 0.5s ease; /* Adds smooth fade out */
}
    </style>
</head>
<body>
<!-- INTRO LAYER -->
<div id="intro-screen">
    <video id="introVid" muted playsinline>
        <source src="intro.mp4" type="video/mp4">
    </video>
    <!-- Fallback Button if browser blocks autoplay -->
    <button id="startBtn" onclick="closeIntro()" style="display:none; position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); padding:15px 30px; font-size:1.2rem; background:#2563eb; color:white; border:none; border-radius:8px; cursor:pointer; z-index:10001; font-family:sans-serif;">
        ?? Click to Start App
    </button>
</div>

<!-- ROTATING LOGO -->
<img src="BMX10.png" class="rotating-logo" alt="BizMitra Logo">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="brand">Biz<span>Mitra</span></div>
        <div class="tagline">India's Business Feasibility Engine</div>
        
        <!-- Filter -->
        <div class="input-group">
            <label>1. Category Filter</label>
            <select id="catSelect" onchange="filterBizDropdown()">
                <option value="All">All Categories</option>
                <option value="Retail">Retail</option>
                <option value="Food">Food & Beverage</option>
                <option value="Service">Services</option>
                <option value="Manufacturing">Manufacturing</option>
                <option value="Online">Online / Digital</option>
                <option value="Agriculture">Agriculture</option>
                <option value="Education">Education</option>
            </select>
        </div>

        <!-- Business -->
        <div class="input-group">
            <label>2. Select Business</label>
            <select id="bizSelect">
                <!-- JS Populates -->
            </select>
        </div>

        <!-- Params -->
        <div class="input-group">
            <label>3. Target State</label>
            <select id="stateSelect">
                <option value="MH">Maharashtra</option>
                <option value="DL">Delhi NCR</option>
                <option value="KA">Karnataka</option>
                <option value="TN">Tamil Nadu</option>
                <option value="UP">Uttar Pradesh</option>
                <option value="GJ">Gujarat</option>
                <option value="RJ">Rajasthan</option>
                <option value="WB">West Bengal</option>
                <option value="MP">Madhya Pradesh</option>
                <option value="OT">Other States</option>
            </select>
        </div>

        <div class="input-group">
            <label>4. Location Tier</label>
            <select id="tierSelect">
                <option value="1.8">Metro Prime (Tier 1)</option>
                <option value="1.3">City Center (Tier 2)</option>
                <option value="1.0" selected>Semi-Urban (Tier 3)</option>
                <option value="0.7">Rural / Village</option>
            </select>
        </div>

        <div class="input-group">
            <label>5. Budget ()</label>
            <input type="number" id="budgetInput" value="500000" step="10000">
        </div>

        <div class="input-group">
            <label>6. Skill Level: <span class="slider-val" id="skillVal">Medium</span></label>
            <input type="range" id="skillInput" min="1" max="3" value="2" oninput="updateSkillLabel(this.value)">
        </div>

        <!-- Tools Buttons -->
        <div class="tools-area">
            <label style="color:var(--accent); font-size:0.8rem; font-weight:bold; margin-bottom:10px; display:block;">ACTION TOOLS</label>
            <button class="tool-btn primary" onclick="switchView('analyze'); generateAnalysis();">
                 Generate Report
            </button>
            <button class="tool-btn" onclick="switchView('finder')">
                 Smart Finder (Gap 1)
            </button>
            <button class="tool-btn" onclick="switchView('compare')">
                 Comparison (Gap 2)
            </button>
        </div>


<!-- BOTTOM FOOTER LINKS -->
  <!-- BOTTOM FOOTER LINKS (Corrected Icons) -->
    <div class="sidebar-footer">
        <div class="footer-link" onclick="switchView('logic')">&#128202; Behind the Numbers</div>
        <div class="footer-link" onclick="switchView('about')">&#8505; About & Disclaimer</div>
        <div class="footer-link" onclick="switchView('privacy')">&#128274; Privacy Policy</div>
        <div class="footer-link" onclick="switchView('contact')">&#128222; Contact Us</div>
    </div>
</aside>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        
        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="welcome-screen">
            <div style="font-size: 5rem; margin-bottom: 20px;"></div>
            <h1 style="color:var(--primary); margin-bottom: 10px;">Feasibility Engine</h1>
            <p style="max-width: 500px;">Select a business idea or use the tools in the sidebar to generate a 148-point analysis, check loan eligibility, or compare opportunities.</p>
        </div>

        <!-- VIEW 1: ANALYSIS REPORT -->
        <div id="reportContainer" style="display:none;">
            <div class="header-panel">
                <div>
                    <h1 id="rptTitle">Business Name</h1>
                    <div class="status-badge" id="rptSubtitle">Location</div>
                </div>
                <button class="print-btn" onclick="window.print()"> Print Report</button>
            </div>

            <!-- Dashboard Grid -->
            <div class="grid-container">
                <div class="score-card card">
                    <div class="score-val" id="bfiScore">0</div>
                    <div class="score-label">Feasibility Score</div>
                    <p id="bfiMsg" style="margin-top:10px; font-weight:600;"></p>
                </div>
                <div class="card">
                    <div class="info-label">Required Investment</div>
                    <div class="info-val" id="reqInv">0</div>
                    <div class="info-label" style="margin-top:15px;">Est. Monthly Profit</div>
                    <div class="info-val text-green" id="estProfit">0</div>
                </div>
                <div class="card">
                    <div class="info-label">Capital Adequacy</div>
                    <div class="info-val" id="capStatus">Checking...</div>
                    <div class="info-label" style="margin-top:15px;">Break-Even</div>
                    <div class="info-val" id="breakEven">0 Months</div>
                </div>
            </div>

            <!-- Risk & Loans -->
            <div class="grid-container">
                <div class="card" style="border-left: 5px solid var(--success);">
                    <h3 style="margin-bottom:15px; color:var(--primary);"> Loan Matching Engine</h3>
                    <div id="loanMatches" style="line-height:1.8; font-size:0.9rem;"></div>
                </div>
                <div class="card">
                    <h3 style="margin-bottom:15px; color:var(--primary);"> Risk Analysis</h3>
                    <div class="risk-container">
                        <div class="risk-bar-group">
                            <div class="risk-label">Market Risk</div>
                            <div class="progress-bg"><div class="progress-fill" id="riskMarket" style="width:0%;"></div></div>
                        </div>
                        <div class="risk-bar-group">
                            <div class="risk-label">Capital Risk</div>
                            <div class="progress-bg"><div class="progress-fill" id="riskCap" style="width:0%;"></div></div>
                        </div>
                        <div class="risk-bar-group">
                            <div class="risk-label">Operational</div>
                            <div class="progress-bg"><div class="progress-fill" id="riskOps" style="width:0%;"></div></div>
                        </div>
                        <div class="risk-bar-group">
                            <div class="risk-label">Compliance</div>
                            <div class="progress-bg"><div class="progress-fill" id="riskReg" style="width:0%;"></div></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cash Flow -->
            <div class="card" style="margin-bottom: 30px;">
                <h3 style="color:var(--primary); margin-bottom:10px;"> 12-Month Financial Projection</h3>
                <div style="overflow-x:auto;">
                    <table class="fin-table" id="cashFlowTable">
                        <thead><tr><th>Metric</th><th>Setup Phase (M1-3)</th><th>Growth Phase (M4-6)</th><th>Stable Phase (M7-12)</th></tr></thead>
                        <tbody><!-- JS Injected --></tbody>
                    </table>
                </div>
            </div>

            <!-- Timeline -->
            <div class="card" style="margin-bottom: 30px;">
                <h3 style="color:var(--primary);"> 30-Day Execution Plan</h3>
                <div class="timeline" id="timelineList"><!-- JS Injected --></div>
            </div>

            <!-- 148-POINT REPORT -->
            <div class="report-section-wrapper" id="detailedReport">
                <!-- JS Inject Sections A-Q -->
            </div>
        </div>

        <!-- VIEW 2: SMART FINDER (Gap 1) -->
        <div id="finderView" style="display:none;">
            <div class="header-panel">
                <h1>Smart Business Finder</h1>
                <div class="status-badge">Matches for your Budget</div>
            </div>
            <div class="card" style="margin-bottom:30px;">
                <h3 style="margin-bottom:10px; color:var(--primary);">Your Criteria</h3>
                <p id="finderInputs" style="color:#64748b; margin-bottom:15px;"></p>
                <button class="print-btn" onclick="runFinder()"> Refresh Matches</button>
            </div>
            <div id="finderResults" class="match-grid"></div>
        </div>

        <!-- VIEW 3: COMPARISON (Gap 2) -->
        <div id="compareView" style="display:none;">
            <div class="header-panel"><h1>Side-by-Side Comparison</h1></div>
            <div class="card" style="margin-bottom:30px; display:flex; gap:15px; align-items:flex-end; flex-wrap:wrap;">
                <div style="flex:1; min-width:200px;">
                    <label style="font-weight:bold; display:block; margin-bottom:5px;">Business A</label>
                    <select id="compBiz1"></select>
                </div>
                <div style="flex:1; min-width:200px;">
                    <label style="font-weight:bold; display:block; margin-bottom:5px;">Business B</label>
                    <select id="compBiz2"></select>
                </div>
                <button class="print-btn" style="background:var(--accent);" onclick="runComparison()"> Compare</button>
            </div>
            <div id="comparisonResult"></div>
        </div>


<!-- VIEW 4: BEHIND THE NUMBERS (LOGIC EXPLANATION) -->
    <div id="logicView" style="display:none;" class="info-container">
        <h1>Behind the Numbers</h1>
        <p>At BizMitra, we believe in transparency. Here is the mathematical logic used to generate your feasibility report.</p>

        <div class="math-box">
            <h3>1. Investment Calculation</h3>
            <p>We calculate investment based on your selected <strong>Location Tier</strong>. Costs in Metro cities are significantly higher than Rural areas.</p>
            <p><strong>Formula:</strong> <span class="math-formula">Base Investment × (0.6 Fixed + 0.4 Variable × Tier Multiplier)</span></p>
            <ul>
                <li><strong>Fixed Costs (60%):</strong> Machinery, Licenses, Tech (Constant).</li>
                <li><strong>Variable Costs (40%):</strong> Interiors, Deposit, Furniture (Varies by City).</li>
                <li><strong>Tier Multipliers:</strong> Metro (1.8), City (1.3), Town (1.0), Rural (0.7).</li>
            </ul>
        </div>

        <div class="math-box">
            <h3>2. Profitability Logic</h3>
            <p>We use a <strong>Turnover Ratio Model</strong> instead of flat assumptions.</p>
            <p><strong>Step A (Op Cost):</strong> We calculate monthly expenses (Rent + Salaries) based on location.</p>
            <p><strong>Step B (Revenue Target):</strong> We assume a healthy business must generate revenue <strong>4x</strong> its operational cost.</p>
            <p><strong>Step C (Net Profit):</strong> <span class="math-formula">(Revenue × Margin %)</span></p>
            <p>This ensures the profit shown is realistic for a <em>sustainable</em> business, not a struggling one.</p>
        </div>

        <div class="math-box">
            <h3>3. BFI Score (Business Feasibility Index)</h3>
            <p>Your score (0-100) is a weighted algorithm:</p>
            <ul>
                <li><strong>Capital Adequacy (45%):</strong> Do you have enough funds vs required investment?</li>
                <li><strong>Skill Match (25%):</strong> Does your experience level match the business complexity?</li>
                <li><strong>Market Potential (30%):</strong> Based on the inherent market risk of the category.</li>
            </ul>
        </div>
    </div>

<!-- VIEW 5: ABOUT & DISCLAIMER (Corrected Icons) -->
    <div id="aboutView" style="display:none;" class="info-container">
        <h1>About BizMitra</h1>
        <p>BizMitra is an AI-powered feasibility engine designed to help Indian entrepreneurs make data-driven decisions. We cover 100+ business categories with localized financial modeling.</p>
        
        <h2 style="color:var(--danger)">&#9888; Disclaimer</h2>
        <p>The financial projections, costs, and legal requirements provided by this application are <strong>estimates for educational purposes only</strong>.</p>
        <p>Actual costs may vary based on real-estate fluctuations, vendor negotiations, and government policy changes. Users are advised to consult with a Chartered Accountant (CA) or Legal Advisor before making any actual investment.</p>
        <p>BizMitra is not responsible for any financial losses incurred based on these projections.</p>
    </div>

    <!-- VIEW 6: PRIVACY POLICY -->
    <div id="privacyView" style="display:none;" class="info-container">
        <h1>Privacy Policy</h1>
        <p><strong>Last Updated:</strong> 2025</p>
        <p>Your privacy is important to us. This statement explains how we handle your data.</p>
        
        <h2>1. No Data Collection</h2>
        <p>BizMitra operates entirely on your browser (Client-Side). We <strong>do not store</strong> your input data (Budget, Location, Ideas) on any server. All calculations happen locally on your device.</p>
        
        <h2>2. No Cookies</h2>
        <p>We do not use tracking cookies or third-party analytics software.</p>
        
        <h2>3. Local Storage</h2>
        <p>Any saved preferences are stored temporarily in your browser's RAM and are cleared when you close the tab.</p>
    </div>

   <!-- VIEW 7: CONTACT (Corrected Icons) -->
    <div id="contactView" style="display:none;" class="info-container">
        <h1>Contact Us</h1>
        <p>Have suggestions for new business categories or found a bug?</p>
        
        <div class="card" style="text-align:center; padding:40px;">
            <div style="font-size:3rem;">&#128231;</div>
            <h3>Email Support</h3>
            <p style="color:var(--accent); font-weight:bold;">support@bizmitra.in</p>
            <p style="font-size:0.9rem; color:#64748b;">We usually reply within 24 hours.</p>
            
            <hr style="margin:20px 0; border:0; border-top:1px solid #e2e8f0;">
            
            <h3>Headquarters</h3>
            <p>BizMitra Labs, Tech Park,<br>Bangalore, Karnataka - 560001</p>
        </div>
    </div>
    </main>

    <!-- LOGIC -->
    <script>
// --- ROBUST INTRO VIDEO LOGIC ---
window.addEventListener('load', function() {
    const vid = document.getElementById("introVid");
    const screen = document.getElementById("intro-screen");
    const btn = document.getElementById("startBtn");

    // Function to close intro
    window.closeIntro = function() {
        screen.style.opacity = '0';
        setTimeout(() => { screen.style.display = "none"; }, 500); // Smooth fade out
    };

    // 1. Try to play automatically
    const playPromise = vid.play();

    if (playPromise !== undefined) {
        playPromise.then(_ => {
            // Autoplay started successfully!
        })
        .catch(error => {
            // Autoplay was BLOCKED by browser. Show the Start button.
            console.log("Autoplay blocked. Waiting for user interaction.");
            btn.style.display = "block";
        });
    }

    // 2. When video finishes, close screen
    vid.onended = function() {
        closeIntro();
    };

    // 3. Safety Fallback: Close after 10 seconds anyway
    setTimeout(() => { if(screen.style.display !== 'none') closeIntro(); }, 10000);
});
        // --- 1. FULL DATABASE (100 ITEMS) ---
        const database = [
            // RETAIL
            { id: 1, name: "Grocery / Kirana Store", cat: "Retail", baseInv: 300000, baseOp: 25000, margin: 0.15, risk: {m:30, o:40, r:20}, desc: "Daily essentials store." },
            { id: 2, name: "Apparel / Clothing Store", cat: "Retail", baseInv: 800000, baseOp: 45000, margin: 0.35, risk: {m:60, o:50, r:30}, desc: "Fashion retail." },
            { id: 3, name: "Mobile Phone Shop", cat: "Retail", baseInv: 500000, baseOp: 30000, margin: 0.20, risk: {m:40, o:30, r:20}, desc: "Phones & Accessories." },
            { id: 4, name: "Footwear Shop", cat: "Retail", baseInv: 600000, baseOp: 35000, margin: 0.40, risk: {m:50, o:40, r:20}, desc: "Multi-brand shoes." },
            { id: 5, name: "Electronics Store", cat: "Retail", baseInv: 1500000, baseOp: 60000, margin: 0.18, risk: {m:50, o:40, r:20}, desc: "Appliances showroom." },
            { id: 6, name: "Cosmetics & Beauty", cat: "Retail", baseInv: 400000, baseOp: 25000, margin: 0.45, risk: {m:60, o:30, r:20}, desc: "Beauty products." },
            { id: 7, name: "Stationery & Book Shop", cat: "Retail", baseInv: 300000, baseOp: 20000, margin: 0.30, risk: {m:20, o:20, r:10}, desc: "School supplies." },
            { id: 8, name: "Gift & Novelty Store", cat: "Retail", baseInv: 350000, baseOp: 25000, margin: 0.50, risk: {m:50, o:30, r:10}, desc: "Gifts & toys." },
            { id: 9, name: "Imitation Jewellery", cat: "Retail", baseInv: 300000, baseOp: 20000, margin: 0.60, risk: {m:50, o:20, r:10}, desc: "Artificial jewellery." },
            { id: 10, name: "Optical Store", cat: "Retail", baseInv: 500000, baseOp: 30000, margin: 0.65, risk: {m:40, o:30, r:20}, desc: "Eyewear." },
            { id: 11, name: "Hardware & Paint", cat: "Retail", baseInv: 800000, baseOp: 30000, margin: 0.25, risk: {m:30, o:40, r:20}, desc: "Construction goods." },
            { id: 12, name: "Kitchenware Store", cat: "Retail", baseInv: 600000, baseOp: 25000, margin: 0.35, risk: {m:30, o:20, r:10}, desc: "Utensils & Cookware." },
            { id: 13, name: "Kids Toy Store", cat: "Retail", baseInv: 500000, baseOp: 30000, margin: 0.40, risk: {m:50, o:30, r:10}, desc: "Toys & Games." },
            { id: 14, name: "Sports Goods", cat: "Retail", baseInv: 600000, baseOp: 30000, margin: 0.35, risk: {m:40, o:20, r:10}, desc: "Sports equipment." },
            { id: 15, name: "Furniture Showroom", cat: "Retail", baseInv: 1200000, baseOp: 60000, margin: 0.40, risk: {m:60, o:40, r:20}, desc: "Home furniture." },
            { id: 16, name: "Bags & Luggage", cat: "Retail", baseInv: 400000, baseOp: 25000, margin: 0.45, risk: {m:40, o:20, r:10}, desc: "Travel bags." },
            { id: 17, name: "Watch & Clock", cat: "Retail", baseInv: 500000, baseOp: 25000, margin: 0.50, risk: {m:50, o:20, r:10}, desc: "Timepieces." },
            { id: 18, name: "Pet Shop", cat: "Retail", baseInv: 400000, baseOp: 30000, margin: 0.35, risk: {m:50, o:50, r:30}, desc: "Pet supplies." },
            { id: 19, name: "Florist", cat: "Retail", baseInv: 100000, baseOp: 15000, margin: 0.60, risk: {m:50, o:60, r:10}, desc: "Fresh flowers." },
            { id: 20, name: "Pharmacy / Medical", cat: "Retail", baseInv: 800000, baseOp: 40000, margin: 0.25, risk: {m:20, o:50, r:70}, desc: "Medicines." },
            
            // FOOD
            { id: 21, name: "Tea Stall / Chai Point", cat: "Food", baseInv: 100000, baseOp: 15000, margin: 0.60, risk: {m:30, o:40, r:30}, desc: "Tea outlet." },
            { id: 22, name: "Cafe / Coffee Shop", cat: "Food", baseInv: 1000000, baseOp: 70000, margin: 0.65, risk: {m:70, o:60, r:50}, desc: "Coffee hangout." },
            { id: 23, name: "Cloud Kitchen", cat: "Food", baseInv: 400000, baseOp: 40000, margin: 0.55, risk: {m:60, o:50, r:40}, desc: "Delivery only." },
            { id: 24, name: "Bakery", cat: "Food", baseInv: 600000, baseOp: 40000, margin: 0.50, risk: {m:50, o:50, r:40}, desc: "Cakes & Breads." },
            { id: 25, name: "Fast Food Center", cat: "Food", baseInv: 500000, baseOp: 35000, margin: 0.55, risk: {m:50, o:50, r:45}, desc: "Burgers/Pizza." },
            { id: 26, name: "Tiffin Service", cat: "Food", baseInv: 50000, baseOp: 15000, margin: 0.40, risk: {m:40, o:60, r:30}, desc: "Home meals." },
            { id: 27, name: "Juice Bar", cat: "Food", baseInv: 200000, baseOp: 20000, margin: 0.60, risk: {m:40, o:40, r:30}, desc: "Fresh juice." },
            { id: 28, name: "Ice Cream Parlour", cat: "Food", baseInv: 400000, baseOp: 25000, margin: 0.50, risk: {m:50, o:30, r:30}, desc: "Ice creams." },
            { id: 29, name: "Sweet Shop", cat: "Food", baseInv: 1000000, baseOp: 60000, margin: 0.45, risk: {m:30, o:60, r:40}, desc: "Indian sweets." },
            { id: 30, name: "Food Truck", cat: "Food", baseInv: 600000, baseOp: 30000, margin: 0.55, risk: {m:60, o:50, r:40}, desc: "Mobile food." },
            { id: 31, name: "Catering", cat: "Food", baseInv: 300000, baseOp: 20000, margin: 0.40, risk: {m:50, o:70, r:30}, desc: "Event food." },
            { id: 32, name: "Organic Food Store", cat: "Food", baseInv: 500000, baseOp: 30000, margin: 0.35, risk: {m:40, o:30, r:20}, desc: "Healthy grocery." },
            { id: 33, name: "Dry Fruit Store", cat: "Food", baseInv: 800000, baseOp: 25000, margin: 0.30, risk: {m:30, o:20, r:10}, desc: "Premium nuts." },
            { id: 34, name: "Spice Store", cat: "Food", baseInv: 200000, baseOp: 15000, margin: 0.40, risk: {m:30, o:30, r:20}, desc: "Spices." },
            { id: 35, name: "Pickle Business", cat: "Food", baseInv: 50000, baseOp: 10000, margin: 0.50, risk: {m:40, o:40, r:30}, desc: "Home sides." },
            { id: 36, name: "Namkeen Shop", cat: "Food", baseInv: 300000, baseOp: 25000, margin: 0.40, risk: {m:30, o:40, r:30}, desc: "Snacks." },
            { id: 37, name: "Vegetable Shop", cat: "Food", baseInv: 100000, baseOp: 20000, margin: 0.30, risk: {m:20, o:60, r:10}, desc: "Fresh produce." },
            { id: 38, name: "Meat Shop", cat: "Food", baseInv: 200000, baseOp: 25000, margin: 0.35, risk: {m:30, o:50, r:50}, desc: "Raw meat." },
            { id: 39, name: "Pan Shop", cat: "Food", baseInv: 50000, baseOp: 10000, margin: 0.60, risk: {m:30, o:20, r:20}, desc: "Mouth fresheners." },
            { id: 40, name: "Water Supply", cat: "Food", baseInv: 300000, baseOp: 20000, margin: 0.50, risk: {m:20, o:40, r:20}, desc: "Jar delivery." },

            // SERVICES
            { id: 41, name: "Mobile Repair", cat: "Service", baseInv: 100000, baseOp: 10000, margin: 0.70, risk: {m:30, o:20, r:10}, desc: "Phone fix." },
            { id: 42, name: "AC Repair", cat: "Service", baseInv: 50000, baseOp: 5000, margin: 0.75, risk: {m:30, o:30, r:10}, desc: "AC service." },
            { id: 43, name: "Plumbing/Electric", cat: "Service", baseInv: 30000, baseOp: 5000, margin: 0.80, risk: {m:20, o:20, r:10}, desc: "Home repairs." },
            { id: 44, name: "House Cleaning", cat: "Service", baseInv: 100000, baseOp: 10000, margin: 0.60, risk: {m:40, o:30, r:10}, desc: "Deep cleaning." },
            { id: 45, name: "Pest Control", cat: "Service", baseInv: 100000, baseOp: 10000, margin: 0.70, risk: {m:40, o:40, r:30}, desc: "Bug removal." },
            { id: 46, name: "Car Wash", cat: "Service", baseInv: 500000, baseOp: 30000, margin: 0.60, risk: {m:50, o:40, r:20}, desc: "Car cleaning." },
            { id: 47, name: "Laundry", cat: "Service", baseInv: 400000, baseOp: 25000, margin: 0.50, risk: {m:30, o:40, r:20}, desc: "Washing." },
            { id: 48, name: "Salon", cat: "Service", baseInv: 500000, baseOp: 35000, margin: 0.65, risk: {m:50, o:40, r:30}, desc: "Grooming." },
            { id: 49, name: "Tailoring", cat: "Service", baseInv: 200000, baseOp: 15000, margin: 0.70, risk: {m:40, o:30, r:10}, desc: "Stitching." },
            { id: 50, name: "Event Mgmt", cat: "Service", baseInv: 100000, baseOp: 10000, margin: 0.40, risk: {m:60, o:70, r:20}, desc: "Party planning." },
            { id: 51, name: "Travel Agency", cat: "Service", baseInv: 150000, baseOp: 20000, margin: 0.30, risk: {m:60, o:20, r:20}, desc: "Bookings." },
            { id: 52, name: "Courier Franchise", cat: "Service", baseInv: 100000, baseOp: 15000, margin: 0.25, risk: {m:30, o:30, r:10}, desc: "Logistics." },
            { id: 53, name: "Real Estate Agent", cat: "Service", baseInv: 50000, baseOp: 10000, margin: 0.85, risk: {m:60, o:20, r:30}, desc: "Property." },
            { id: 54, name: "Security Agency", cat: "Service", baseInv: 500000, baseOp: 300000, margin: 0.20, risk: {m:40, o:60, r:60}, desc: "Guards." },
            { id: 55, name: "Taxi Service", cat: "Service", baseInv: 800000, baseOp: 20000, margin: 0.35, risk: {m:40, o:40, r:40}, desc: "Cabs." },
            { id: 56, name: "Bike Rental", cat: "Service", baseInv: 500000, baseOp: 15000, margin: 0.40, risk: {m:50, o:40, r:30}, desc: "Rentals." },
            { id: 57, name: "Gym", cat: "Service", baseInv: 1500000, baseOp: 60000, margin: 0.50, risk: {m:50, o:30, r:20}, desc: "Fitness." },
            { id: 58, name: "Yoga Studio", cat: "Service", baseInv: 200000, baseOp: 15000, margin: 0.80, risk: {m:40, o:20, r:10}, desc: "Wellness." },
            { id: 59, name: "Interior Design", cat: "Service", baseInv: 100000, baseOp: 10000, margin: 0.70, risk: {m:60, o:40, r:10}, desc: "Decor." },
            { id: 60, name: "Xerox Shop", cat: "Service", baseInv: 200000, baseOp: 15000, margin: 0.50, risk: {m:30, o:30, r:10}, desc: "Printing." },

            // ONLINE
            { id: 61, name: "Digital Marketing", cat: "Online", baseInv: 50000, baseOp: 5000, margin: 0.80, risk: {m:70, o:20, r:10}, desc: "Ads & SEO." },
            { id: 62, name: "Graphic Design", cat: "Online", baseInv: 50000, baseOp: 2000, margin: 0.90, risk: {m:60, o:10, r:10}, desc: "Design." },
            { id: 63, name: "Content Writing", cat: "Online", baseInv: 20000, baseOp: 1000, margin: 0.95, risk: {m:50, o:10, r:10}, desc: "Writing." },
            { id: 64, name: "E-commerce Seller", cat: "Online", baseInv: 200000, baseOp: 15000, margin: 0.30, risk: {m:70, o:40, r:30}, desc: "Selling online." },
            { id: 65, name: "Dropshipping", cat: "Online", baseInv: 30000, baseOp: 5000, margin: 0.20, risk: {m:80, o:20, r:10}, desc: "No inventory." },
            { id: 66, name: "YouTuber", cat: "Online", baseInv: 50000, baseOp: 2000, margin: 0.90, risk: {m:80, o:40, r:10}, desc: "Videos." },
            { id: 67, name: "App Dev", cat: "Online", baseInv: 50000, baseOp: 5000, margin: 0.80, risk: {m:60, o:50, r:10}, desc: "Coding." },
            { id: 68, name: "Web Design", cat: "Online", baseInv: 50000, baseOp: 5000, margin: 0.80, risk: {m:50, o:30, r:10}, desc: "Websites." },
            { id: 69, name: "Influencer Mgmt", cat: "Online", baseInv: 50000, baseOp: 5000, margin: 0.70, risk: {m:60, o:20, r:10}, desc: "Social stars." },
            { id: 70, name: "Online Tutor", cat: "Online", baseInv: 30000, baseOp: 2000, margin: 0.90, risk: {m:40, o:10, r:10}, desc: "Teaching." },

            // EDUCATION
            { id: 71, name: "Tuition Center", cat: "Education", baseInv: 100000, baseOp: 10000, margin: 0.85, risk: {m:30, o:10, r:10}, desc: "School coaching." },
            { id: 72, name: "English Class", cat: "Education", baseInv: 100000, baseOp: 10000, margin: 0.80, risk: {m:40, o:10, r:10}, desc: "Language." },
            { id: 73, name: "Exam Coaching", cat: "Education", baseInv: 200000, baseOp: 20000, margin: 0.70, risk: {m:50, o:20, r:20}, desc: "Competitive." },
            { id: 74, name: "Hobby Class", cat: "Education", baseInv: 50000, baseOp: 5000, margin: 0.80, risk: {m:40, o:10, r:10}, desc: "Art/Craft." },
            { id: 75, name: "Play School", cat: "Education", baseInv: 800000, baseOp: 40000, margin: 0.40, risk: {m:40, o:60, r:50}, desc: "Preschool." },
            { id: 76, name: "Skill Training", cat: "Education", baseInv: 300000, baseOp: 25000, margin: 0.50, risk: {m:50, o:30, r:30}, desc: "Vocational." },
            { id: 77, name: "Computer Class", cat: "Education", baseInv: 500000, baseOp: 30000, margin: 0.60, risk: {m:50, o:30, r:20}, desc: "IT skills." },
            { id: 78, name: "Music Class", cat: "Education", baseInv: 100000, baseOp: 10000, margin: 0.80, risk: {m:40, o:10, r:10}, desc: "Music." },
            { id: 79, name: "Dance Studio", cat: "Education", baseInv: 300000, baseOp: 20000, margin: 0.70, risk: {m:40, o:20, r:10}, desc: "Dance." },
            { id: 80, name: "Art School", cat: "Education", baseInv: 100000, baseOp: 10000, margin: 0.80, risk: {m:40, o:10, r:10}, desc: "Fine arts." },

            // MANUFACTURING
            { id: 81, name: "Paper Cup Mfg", cat: "Manufacturing", baseInv: 1000000, baseOp: 80000, margin: 0.20, risk: {m:50, o:70, r:50}, desc: "Disposables." },
            { id: 82, name: "Paper Plate Mfg", cat: "Manufacturing", baseInv: 800000, baseOp: 60000, margin: 0.20, risk: {m:50, o:70, r:50}, desc: "Plates." },
            { id: 83, name: "Candle Making", cat: "Manufacturing", baseInv: 50000, baseOp: 10000, margin: 0.40, risk: {m:40, o:30, r:10}, desc: "Wax candles." },
            { id: 84, name: "Soap Making", cat: "Manufacturing", baseInv: 200000, baseOp: 30000, margin: 0.35, risk: {m:50, o:40, r:30}, desc: "Soaps." },
            { id: 85, name: "Detergent Mfg", cat: "Manufacturing", baseInv: 300000, baseOp: 40000, margin: 0.30, risk: {m:60, o:40, r:30}, desc: "Washing powder." },
            { id: 86, name: "Agarbatti Mfg", cat: "Manufacturing", baseInv: 100000, baseOp: 15000, margin: 0.35, risk: {m:30, o:30, r:10}, desc: "Incense." },
            { id: 87, name: "Notebook Mfg", cat: "Manufacturing", baseInv: 800000, baseOp: 50000, margin: 0.25, risk: {m:40, o:50, r:30}, desc: "Stationery." },
            { id: 88, name: "Slipper Mfg", cat: "Manufacturing", baseInv: 200000, baseOp: 20000, margin: 0.35, risk: {m:40, o:30, r:20}, desc: "Footwear." },
            { id: 89, name: "Spice Grinding", cat: "Manufacturing", baseInv: 500000, baseOp: 30000, margin: 0.30, risk: {m:30, o:40, r:40}, desc: "Spices." },
            { id: 90, name: "Flour Mill", cat: "Manufacturing", baseInv: 400000, baseOp: 20000, margin: 0.25, risk: {m:20, o:40, r:30}, desc: "Atta." },
            { id: 91, name: "Oil Mill", cat: "Manufacturing", baseInv: 600000, baseOp: 40000, margin: 0.30, risk: {m:30, o:50, r:40}, desc: "Oil." },
            { id: 92, name: "Garment Mfg", cat: "Manufacturing", baseInv: 1500000, baseOp: 100000, margin: 0.25, risk: {m:50, o:80, r:60}, desc: "Clothing." },
            { id: 93, name: "Furniture Mfg", cat: "Manufacturing", baseInv: 1000000, baseOp: 80000, margin: 0.30, risk: {m:50, o:70, r:40}, desc: "Woodwork." },
            { id: 94, name: "Packaging Box", cat: "Manufacturing", baseInv: 1200000, baseOp: 90000, margin: 0.20, risk: {m:40, o:60, r:40}, desc: "Boxes." },
            { id: 95, name: "Bag Mfg", cat: "Manufacturing", baseInv: 2000000, baseOp: 150000, margin: 0.15, risk: {m:40, o:70, r:50}, desc: "Carry bags." },

            // AGRICULTURE
            { id: 96, name: "Dairy Farming", cat: "Agriculture", baseInv: 1000000, baseOp: 50000, margin: 0.40, risk: {m:20, o:80, r:30}, desc: "Milk." },
            { id: 97, name: "Poultry Farming", cat: "Agriculture", baseInv: 500000, baseOp: 40000, margin: 0.35, risk: {m:40, o:70, r:30}, desc: "Chicken/Eggs." },
            { id: 98, name: "Goat Farming", cat: "Agriculture", baseInv: 300000, baseOp: 15000, margin: 0.45, risk: {m:30, o:50, r:20}, desc: "Meat." },
            { id: 99, name: "Mushroom Farm", cat: "Agriculture", baseInv: 100000, baseOp: 10000, margin: 0.60, risk: {m:50, o:60, r:10}, desc: "Mushrooms." },
            { id: 100, name: "Nursery", cat: "Agriculture", baseInv: 200000, baseOp: 15000, margin: 0.50, risk: {m:30, o:40, r:10}, desc: "Plants." }
        ];

        // --- 2. HELPERS ---
        const formatMoney = (n) => "" + n.toLocaleString('en-IN');
        function updateSkillLabel(val) { document.getElementById("skillVal").innerText = ["Beginner", "Medium", "Expert"][val-1]; }

        window.onload = () => {
            filterBizDropdown();
            // Populate Compare Dropdowns
            const c1 = document.getElementById("compBiz1");
            const c2 = document.getElementById("compBiz2");
            database.forEach(b => {
                c1.innerHTML += `<option value="${b.id}">${b.name}</option>`;
                c2.innerHTML += `<option value="${b.id}">${b.name}</option>`;
            });
            c2.selectedIndex = 1;
        };

        function filterBizDropdown() {
            const cat = document.getElementById("catSelect").value;
            const sel = document.getElementById("bizSelect");
            sel.innerHTML = "";
            database.filter(b => cat==="All" || b.cat===cat).forEach(b => {
                sel.innerHTML += `<option value="${b.id}">${b.name}</option>`;
            });
        }

      function switchView(mode) {
    // Hide Welcome Screen
    document.getElementById("welcomeScreen").style.display = "none";
    
    // Hide All Views
    const views = ["reportContainer", "finderView", "compareView", "logicView", "aboutView", "privacyView", "contactView"];
    views.forEach(id => document.getElementById(id).style.display = "none");

    // Show Selected View
    if(mode === 'analyze') {
        document.getElementById("reportContainer").style.display = "block";
        window.scrollTo({top:0, behavior:'smooth'});
    } 
    else if(mode === 'finder') document.getElementById("finderView").style.display = "block";
    else if(mode === 'compare') document.getElementById("compareView").style.display = "block";
    else if(mode === 'logic') document.getElementById("logicView").style.display = "block";
    else if(mode === 'about') document.getElementById("aboutView").style.display = "block";
    else if(mode === 'privacy') document.getElementById("privacyView").style.display = "block";
    else if(mode === 'contact') document.getElementById("contactView").style.display = "block";
    
    // Run specific logic if needed
    if(mode === 'finder') runFinder();
}

        // --- 3. MAIN ANALYSIS ENGINE ---
        function generateAnalysis() {
            const bizId = parseInt(document.getElementById("bizSelect").value);
            const biz = database.find(b => b.id === bizId);
            const state = document.getElementById("stateSelect").options[document.getElementById("stateSelect").selectedIndex].text;
            const tierVal = parseFloat(document.getElementById("tierSelect").value);
            const tierName = document.getElementById("tierSelect").options[document.getElementById("tierSelect").selectedIndex].text;
            const budget = parseInt(document.getElementById("budgetInput").value);
            const skill = parseInt(document.getElementById("skillInput").value);

            // Calcs
           // ... inside generateAnalysis() ...

// B. CALCULATIONS (CORRECTED)
// 1. Adjusted Investment
const adjInv = Math.round((biz.baseInv * 0.6) + ((biz.baseInv * 0.4) * tierVal));

// 2. Adjusted Op Cost
const adjOp = Math.round(biz.baseOp * tierVal);

// 3. Financial Projections (FIXED)
// Assume Revenue is ~4x of Ops Cost to be sustainable
const monthlyRev = Math.round(adjOp * 4.0); 
// Calculate Net Profit directly using the Net Margin %
const profit = Math.round(monthlyRev * biz.margin);
// Break Even
const bep = profit > 0 ? Math.ceil(adjInv / profit) : 99;

// ... rest of the function remains the same ...

            // Score
            const fundRatio = budget / adjInv;
            let capScore = fundRatio >= 1 ? 100 : (fundRatio >= 0.7 ? 80 : (fundRatio >= 0.5 ? 50 : 20));
            let skillReq = biz.risk.o > 60 ? 3 : (biz.risk.o > 30 ? 2 : 1);
            let skillScore = skill >= skillReq ? 100 : (skill == skillReq-1 ? 60 : 30);
            const bfi = Math.round((capScore * 0.45) + (skillScore * 0.25) + ((100-biz.risk.m) * 0.3));

            // UI
            document.getElementById("rptTitle").innerText = biz.name;
            document.getElementById("rptSubtitle").innerText = `${state} (${tierName})`;
            document.getElementById("bfiScore").innerText = bfi;
            
            const msgEl = document.getElementById("bfiMsg");
            if(bfi>=80) { msgEl.innerText = " Excellent! Highly Feasible."; msgEl.style.color = "var(--success)"; }
            else if(bfi>=60) { msgEl.innerText = " Moderate. Needs Planning."; msgEl.style.color = "var(--warning)"; }
            else { msgEl.innerText = " High Risk. Re-evaluate."; msgEl.style.color = "var(--danger)"; }

            document.getElementById("reqInv").innerText = formatMoney(adjInv);
            document.getElementById("estProfit").innerText = formatMoney(profit);
            document.getElementById("breakEven").innerText = bep > 36 ? "3+ Years" : `${bep} Months`;
            
            const capEl = document.getElementById("capStatus");
            if(budget >= adjInv) { capEl.innerText = "Sufficent "; capEl.className = "info-val text-green"; }
            else { capEl.innerText = `Shortfall: ${formatMoney(adjInv - budget)}`; capEl.className = "info-val text-red"; }

            // Loans
            let loanHTML = "";
            const shortfall = adjInv - budget;
            if (shortfall > 0) {
                if(adjInv <= 50000) loanHTML += "<li><b>Mudra Shishu:</b> Up to 50k. No collateral.</li>";
                else if(adjInv <= 500000) loanHTML += "<li><b>Mudra Kishor:</b> 50k - 5L. Best fit.</li>";
                else if(adjInv <= 1000000) loanHTML += "<li><b>Mudra Tarun:</b> 5L - 10L. Needs DPR.</li>";
                if(biz.cat === "Manufacturing" && adjInv > 1000000) loanHTML += "<li><b>PMEGP:</b> Subsidy up to 35% (Rural).</li>";
                loanHTML += "<li><b>CGTMSE:</b> Collateral-free Bank Loan.</li>";
            } else { loanHTML = "<li> No Loan Required. Bootstrapped.</li>"; }
            document.getElementById("loanMatches").innerHTML = `<ul>${loanHTML}</ul>`;

            // Risks
            updateRisk("riskMarket", biz.risk.m);
            updateRisk("riskCap", Math.min(100, Math.max(10, (1 - fundRatio) * 100)));
            updateRisk("riskOps", biz.risk.o);
            updateRisk("riskReg", biz.risk.r);

            // Tables
            document.querySelector("#cashFlowTable tbody").innerHTML = `
                <tr><td><strong>Expenses</strong></td><td>${formatMoney(adjOp*1.5)}</td><td>${formatMoney(adjOp*1.1)}</td><td>${formatMoney(adjOp)}</td></tr>
                <tr><td><strong>Revenue</strong></td><td>${formatMoney(monthlyRev*0.2)}</td><td>${formatMoney(monthlyRev*0.6)}</td><td>${formatMoney(monthlyRev)}</td></tr>
                <tr><td><strong>Net Flow</strong></td><td class="text-red">-${formatMoney((adjOp*1.5)-(monthlyRev*0.2))}</td><td class="text-orange">-${formatMoney((adjOp*1.1)-(monthlyRev*0.6))}</td><td class="text-green">+${formatMoney(profit)}</td></tr>
            `;

            generateTimeline(biz.cat);
            renderDetailedReport(biz, adjInv, adjOp, tierName, state, budget);
        }

        function updateRisk(id, val) {
            const el = document.getElementById(id);
            el.style.width = val + "%";
            el.style.background = val < 30 ? "var(--success)" : (val < 60 ? "var(--warning)" : "var(--danger)");
        }

        function generateTimeline(cat) {
            const list = document.getElementById("timelineList");
            let items = [
                {d:"Day 1-2", t:"Structure", desc:"Proprietorship vs Partnership."},
                {d:"Day 3-5", t:"Bank & PAN", desc:"Open Current Account."},
                {d:"Day 6-10", t:"Udyam/GST", desc:"MSME Registration."}
            ];
            if(cat==="Food") items.push({d:"Day 10-20", t:"FSSAI License", desc:"Mandatory Food License."});
            if(cat==="Retail") items.push({d:"Day 12-15", t:"Shop Act", desc:"Gumasta License."});
            if(cat==="Manufacturing") items.push({d:"Day 15-30", t:"Pollution NOC", desc:"PCB Consent."});
            items.push({d:"Day 30", t:"Launch", desc:"Marketing & Opening."});
            list.innerHTML = items.map(i => `<div class="timeline-item"><div class="time-day">${i.d}</div><div class="time-task">${i.t}</div><div class="time-desc">${i.desc}</div></div>`).join("");
        }

        // --- 4. FINDER & COMPARISON ---
        function runFinder() {
            const budget = parseInt(document.getElementById("budgetInput").value);
            const tier = parseFloat(document.getElementById("tierSelect").value);
            const cat = document.getElementById("catSelect").value;
            
            document.getElementById("finderInputs").innerHTML = `Budget: <b>${formatMoney(budget)}</b> | Category: <b>${cat}</b>`;
            const container = document.getElementById("finderResults");
            container.innerHTML = "";

            const matches = database.filter(b => {
                const cost = (b.baseInv * 0.6) + ((b.baseInv * 0.4) * tier);
                return (cat === "All" || b.cat === cat) && budget >= (cost * 0.5);
            });

            if(matches.length === 0) { container.innerHTML = "<p>No matches found. Increase budget.</p>"; return; }

            matches.forEach(b => {
                const cost = Math.round((b.baseInv * 0.6) + ((b.baseInv * 0.4) * tier));
                const gap = cost - budget;
                const status = gap <= 0 ? `<span class="match-badge" style="background:#dcfce7; color:#166534;">Fully Funded</span>` : `<span class="match-badge" style="background:#ffedd5; color:#9a3412;">Loan: ${formatMoney(gap)}</span>`;
                container.innerHTML += `
                    <div class="match-card">
                        ${status}
                        <h3 style="color:var(--primary); font-size:1.1rem; margin-bottom:5px;">${b.name}</h3>
                        <div style="font-size:0.9rem; color:#64748b; margin-bottom:10px;">${b.cat}</div>
                        <div><strong>Cost:</strong> ${formatMoney(cost)}</div>
                        <button onclick="document.getElementById('bizSelect').value=${b.id}; switchView('analyze'); generateAnalysis();" 
                            style="width:100%; margin-top:10px; padding:8px; background:var(--accent); color:white; border:none; border-radius:4px; cursor:pointer;">
                            View Report
                        </button>
                    </div>`;
            });
        }

        // --- UPDATED LOGIC: COMPARISON WITH LOCATION SENSITIVITY ---
// --- UPDATED COMPARISON LOGIC (FIXED PROFIT CALCULATION) ---
function runComparison() {
    const id1 = parseInt(document.getElementById("compBiz1").value);
    const id2 = parseInt(document.getElementById("compBiz2").value);
    
    // 1. Get Location
    const tierVal = parseFloat(document.getElementById("tierSelect").value);
    const tierName = document.getElementById("tierSelect").options[document.getElementById("tierSelect").selectedIndex].text;

    const b1 = database.find(b => b.id === id1);
    const b2 = database.find(b => b.id === id2);

    // 2. Investment Calculation
    const c1 = Math.round((b1.baseInv * 0.6) + ((b1.baseInv * 0.4) * tierVal));
    const c2 = Math.round((b2.baseInv * 0.6) + ((b2.baseInv * 0.4) * tierVal));
    
    // 3. Profit Calculation (CORRECTED)
    // We assume Revenue is roughly 4x of Operational Cost (Standard Turnover Ratio)
    // We treat 'margin' as NET Profit Margin to ensure accuracy
    const op1 = Math.round(b1.baseOp * tierVal);
    const op2 = Math.round(b2.baseOp * tierVal);
    
    const revenue1 = op1 * 4.0; 
    const revenue2 = op2 * 4.0;

    const p1 = Math.round(revenue1 * b1.margin);
    const p2 = Math.round(revenue2 * b2.margin);

    // 4. Render
    document.getElementById("comparisonResult").innerHTML = `
        <div style="background:#f1f5f9; padding:10px; border-radius:6px; margin-bottom:15px; text-align:center; border:1px solid #cbd5e1;">
            ?? Location Adjustment Active: <strong>Comparing for ${tierName}</strong>
        </div>
        <table class="compare-table">
            <thead>
                <tr>
                    <th>Parameter</th>
                    <th>${b1.name}</th>
                    <th>${b2.name}</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Category</strong></td>
                    <td>${b1.cat}</td>
                    <td>${b2.cat}</td>
                </tr>
                <tr>
                    <td><strong>Est. Investment</strong></td>
                    <td class="${c1 < c2 ? 'winner' : ''}">${formatMoney(c1)}</td>
                    <td class="${c2 < c1 ? 'winner' : ''}">${formatMoney(c2)}</td>
                </tr>
                <tr>
                    <td><strong>Monthly Net Profit</strong></td>
                    <td class="${p1 > p2 ? 'winner' : ''}">${formatMoney(p1)}</td>
                    <td class="${p2 > p1 ? 'winner' : ''}">${formatMoney(p2)}</td>
                </tr>
                <tr>
                    <td><strong>Net Margin</strong></td>
                    <td class="${b1.margin > b2.margin ? 'winner' : ''}">${(b1.margin*100).toFixed(0)}%</td>
                    <td class="${b2.margin > b1.margin ? 'winner' : ''}">${(b2.margin*100).toFixed(0)}%</td>
                </tr>
                <tr>
                    <td><strong>Operational Complexity</strong></td>
                    <td>${b1.risk.o}/100</td>
                    <td>${b2.risk.o}/100</td>
                </tr>
            </tbody>
        </table>
        <p style="text-align:center; color:#64748b; margin-top:10px; font-size:0.9rem;">
            <span class="winner" style="padding:2px 6px; border-radius:4px;">Green</span> indicates the better financial metric.
        </p>
    `;
}

        // --- 5. DETAILED REPORT RENDERER (148 Points) ---
        // --- 5. DETAILED REPORT RENDERER (FULL 148 PARAMETERS) ---
function renderDetailedReport(biz, inv, op, tier, state, budget) {
    const container = document.getElementById("detailedReport");
    container.innerHTML = "";
    
    // Helper to format currency
    const fmt = (n) => "" + n.toLocaleString('en-IN');
    
    // Helper to add sections
    const addSec = (code, title, data) => {
        let html = `<div class="section-block active"><div class="section-title"><span class="section-code">${code}</span> ${title}</div>`;
        data.forEach(d => {
            // Extract number if present, else use #
            const numMatch = d.l.match(/^\d+/);
            const num = numMatch ? numMatch[0] : "";
            const label = d.l.replace(/^\d+[\.\s]*/, "");
            html += `
                <div class="data-row">
                    <div class="data-label"><span>${num}</span> ${label}</div>
                    <div class="data-value">${d.v}</div>
                </div>`;
        });
        container.innerHTML += html + "</div>";
    };

    // --- LOGIC VARIABLES ---
    const isMetro = tier.includes("Metro");
    const isRural = tier.includes("Rural");
    const rentCost = isMetro ? op * 0.4 : (isRural ? op * 0.15 : op * 0.3);
    const staffSal = isMetro ? "15,000 - 22,000" : (isRural ? "6,000 - 9,000" : "10,000 - 15,000");
    const shortfall = inv - budget;
    
    // --- SECTION A: IDENTITY ---
    addSec("A", "BASIC BUSINESS IDENTITY", [
        {l:"1. Business Name", v:`<strong>${biz.name}</strong>`},
        {l:"2. Business Category", v:biz.cat},
        {l:"3. Sub-Category", v:biz.desc},
        {l:"4. Nature of Business", v:"B2C (Direct to Consumer) / Hybrid"},
        {l:"5. Business Model", v:"Offline Store + Online Presence (Omnichannel)"},
        {l:"6. Scale", v: inv > 5000000 ? "Small Enterprise" : "Micro Enterprise"},
        {l:"7. Ownership Type", v:"Proprietorship (Recommended for start). Upgrade to LLP later."},
        {l:"8. Target Geography", v:`${state}, specifically ${tier} areas.`},
        {l:"9. Target Customer", v:"Local residents, Walk-in traffic, Online aggregators."},
        {l:"10. Seasonality", v:"Year-round operations with festive peaks."}
    ]);

    // --- SECTION B: LOCATION ---
    addSec("B", "LOCATION & INFRASTRUCTURE", [
        {l:"11. Location Type", v:biz.cat === "Manufacturing" ? "Industrial Area / MIDC" : "High Street / Main Market"},
        {l:"12. City Tier", v:tier},
        {l:"13. Land Cost", v:"Buying not recommended. Lease model is capital efficient."},
        {l:"14. Rental Cost", v:`<strong>${fmt(Math.round(rentCost))}</strong> per month (Est.)`},
        {l:"15. Lease Deposit", v:`${fmt(Math.round(rentCost * 6))} (6 Months Rent)`},
        {l:"16. Agreement Cost", v:"2,000 - 5,000 (Notary & Stamp Duty)"},
        {l:"17. Area Required", v:biz.cat === "Manufacturing" ? "1000-2000 Sq.ft" : "200-500 Sq.ft"},
        {l:"18. Parking", v:"Essential for Retail/Food. Optional for Online/Mfg."},
        {l:"19. Footfall Score", v:biz.cat === "Online" ? "N/A" : "High Visibility Required"}
    ]);

    // --- SECTION C: LEGAL ---
    let licenses = "Udyam (MSME), GST";
    if(biz.cat==="Food") licenses += ", FSSAI (State), Fire NOC, Health Trade License";
    if(biz.cat==="Retail") licenses += ", Shop & Establishment Act (Gumasta)";
    if(biz.cat==="Manufacturing") licenses += ", Factory License, PCB NOC, Fire NOC";
    
    addSec("C", "LEGAL & REGULATORY", [
        {l:"20. Reg. Cost", v:"1,500 - 15,000 (Depending on consultants)"},
        {l:"21. PAN (Business)", v:"Use Personal PAN for Proprietorship. Separate for LLP."},
        {l:"22. TAN", v:"Required if deducting TDS (Salary/Rent > limits)."},
        {l:"23. Udyam Reg.", v:"<strong>Mandatory</strong> for Govt Subsidy & Loan benefits."},
        {l:"24. GST Reg.", v:"Required if Turnover > 40L (Goods) / 20L (Services)."},
        {l:"25. Shop Act", v:"Mandatory for all physical premises."},
        {l:"26. FSSAI", v:biz.cat === "Food" ? "<strong>Mandatory</strong>" : "Not Applicable"},
        {l:"27. Trade License", v:"Required from Local Municipality."},
        {l:"28. Factory License", v:biz.cat === "Manufacturing" ? "Required" : "Not Applicable"},
        {l:"29. Pollution Control", v:biz.cat === "Manufacturing" ? "Required (PCB NOC)" : "Exempt/Green Category"},
        {l:"30. Fire NOC", v:"Mandatory for Food/Mfg or areas > 500 sq.ft."},
        {l:"31. Professional Tax", v:`Applicable in ${state} (~2,500/year).`},
        {l:"32. Import/Export Code", v:"Required only if shipping globally."},
        {l:"33. Sector License", v:licenses}
    ]);

    // --- SECTION D: DOCS ---
    addSec("D", "DOCUMENTATION", [
        {l:"34. Aadhaar", v:"Promoter's Aadhaar (Linked with Mobile)."},
        {l:"35. PAN Card", v:"Promoter's PAN."},
        {l:"36. Address Proof", v:"Electricity Bill / Property Tax Receipt."},
        {l:"37. Rent Agreement", v:"Registered/Notarized copy."},
        {l:"38. Electricity Bill", v:"Latest month bill of the premises."},
        {l:"39. Bank Proof", v:"Cancelled Cheque of Current Account."},
        {l:"40. Photos", v:"Passport size photos of owner/partners."},
        {l:"41. Partnership Deed", v:"Only if Partnership/LLP."},
        {l:"42. Project Report", v:"<strong>Mandatory for Bank Loans</strong> (DPR)."},
        {l:"43. KYC Docs", v:"Standard KYC for Bank Account opening."}
    ]);

    // --- SECTION E: CAPITAL ---
    addSec("E", "CAPITAL & INVESTMENT", [
        {l:"44. Total Investment", v:`<strong>${fmt(inv)}</strong> (Estimated Project Cost)`},
        {l:"45. Rental/Land Cost", v:`${fmt(Math.round(rentCost * 6))} (Deposits)`},
        {l:"46. Interior/Civil", v:`${fmt(Math.round(inv * 0.15))} (Paint, Tile, Decor)`},
        {l:"47. Machinery Cost", v:`${fmt(Math.round(inv * 0.40))} (Core Equipment)`},
        {l:"48. Equipment/Tools", v:`${fmt(Math.round(inv * 0.10))} (Small tools/Utensils)`},
        {l:"49. Furniture", v:`${fmt(Math.round(inv * 0.10))} (Racks, Tables, Chairs)`},
        {l:"50. IT/Hardware", v:`${fmt(Math.round(inv * 0.05))} (PC, Printer, CCTV)`},
        {l:"51. Software", v:"10,000 - 25,000 (Billing/Accounting)"},
        {l:"52. Raw Material", v:`${fmt(Math.round(inv * 0.15))} (Initial Stock)`},
        {l:"53. Packaging", v:"10,000 - 50,000 (Bags, Boxes)"},
        {l:"54. Pre-operative", v:"20,000 (Travel, Registration, Legal)"},
        {l:"55. Contingency", v:`${fmt(Math.round(inv * 0.05))} (Emergency Fund)`}
    ]);

    // --- SECTION F: MACHINERY ---
    let machineText = biz.cat === "Food" ? "Ovens, Freezers, Burners, Mixers" : 
                     (biz.cat === "Retail" ? "Display Racks, AC, Barcode Scanner" : "Production Line, Motors, Conveyor");
    
    addSec("F", "MACHINERY & TECHNOLOGY", [
        {l:"56. Machine Type", v:machineText},
        {l:"57. Capacity", v:"As per daily sales projection."},
        {l:"58. Power", v:biz.cat === "Manufacturing" ? "3-Phase Connection" : "Single Phase"},
        {l:"59. Installation", v:"Include 5% of machine cost for setup."},
        {l:"60. Maintenance", v:"Annual Maintenance Contract (AMC) recommended."},
        {l:"61. Spare Parts", v:"Keep critical spares in stock to avoid downtime."},
        {l:"62. Obsolescence", v:"Depreciate machinery @ 15% per year."}
    ]);

    // --- SECTION G: HR ---
    addSec("G", "HUMAN RESOURCES", [
        {l:"63. Manpower Req", v:"2 - 4 Staff initially."},
        {l:"64. Skill Ratio", v:"1 Skilled Manager, remaining Unskilled/Helpers."},
        {l:"65. Labour Cost", v:`${staffSal} per month per head.`},
        {l:"66. Manager Cost", v:isMetro ? "25,000+" : "15,000+"},
        {l:"67. Training", v:"Required for customer service & machine handling."},
        {l:"68. Recruitment", v:"Local references or flyers."},
        {l:"69. Staff Welfare", v:"Tea/Snacks budget: 2,000/month."},
        {l:"70. Compliance", v:"PF/ESIC if employees > 10/20. Maintain Muster Roll."}
    ]);

    // --- SECTION H: OP COSTS ---
    addSec("H", "OPERATING COST (MONTHLY)", [
        {l:"71. Rent", v:fmt(Math.round(rentCost))},
        {l:"72. Electricity", v:`${fmt(Math.round(op * 0.15))} (Commercial Meter)`},
        {l:"73. Water", v:"500 - 2,000"},
        {l:"74. Internet/Phone", v:"1,000 (Broadband)"},
        {l:"75. Transport", v:`${fmt(Math.round(op * 0.10))} (Sourcing)`},
        {l:"76. Repairs", v:"2,000 (Misc)"},
        {l:"77. Consumables", v:"3,000 (Cleaning, Stationery)"},
        {l:"78. Accounting", v:"2,000 - 5,000 (CA/Accountant)"},
        {l:"79. Software Sub", v:"500 - 1,000"},
        {l:"80. Security", v:"0 (Self) or Agency cost"},
        {l:"81. Insurance", v:"500 (Allocated monthly)"}
    ]);

    // --- SECTION I: FINANCE ---
    addSec("I", "FINANCING & LOANS", [
        {l:"82. Own Capital", v: shortfall > 0 ? `${fmt(budget)} (${Math.round((budget/inv)*100)}%)` : "100% Self Funded"},
        {l:"83. Loan Amount", v: shortfall > 0 ? `<strong>${fmt(shortfall)}</strong> Required` : "Nil"},
        {l:"84. Loan Type", v:"Term Loan (Assets) + Cash Credit (Working Capital)"},
        {l:"85. Interest Rate", v:"9% - 12% p.a. (Mudra/MSME Schemes)"},
        {l:"86. Tenure", v:"5 Years (60 EMI)"},
        {l:"87. EMI Approx", v: shortfall > 0 ? `${fmt(Math.round(shortfall * 0.022))}/month` : "N/A"},
        {l:"88. Collateral", v: shortfall < 1000000 ? "Not Required (CGTMSE)" : "May be required"},
        {l:"89. Margin Money", v:"10% - 25% of Project Cost"},
        {l:"90. Credit Score", v:"700+ CIBIL Recommended"},
        {l:"91. Preferred Banks", v:"SBI, BOB, PNB, or Canara Bank"}
    ]);

    // --- SECTION J: SCHEMES ---
    addSec("J", "GOVT SCHEMES & SUBSIDIES", [
        {l:"92. PMEGP", v:"15-35% Subsidy (Mfg > 10L, Service > 5L). Application via KVIC."},
        {l:"93. Mudra Shishu", v:"Loans up to 50,000 (No Processing Fee)."},
        {l:"94. Mudra Kishor", v:"Loans 50k to 5 Lakhs."},
        {l:"95. Mudra Tarun", v:"Loans 5L to 10 Lakhs."},
        {l:"96. CGTMSE", v:"Collateral Free Guarantee Cover."},
        {l:"97. Stand-Up India", v:"For SC/ST or Women Entrepreneurs (>10L)."},
        {l:"98. PMFME", v:"For Food Processing Units (35% Subsidy)."},
        {l:"99. State Schemes", v:`Check specific industrial policy of ${state}.`},
        {l:"100. MSME Databank", v:"Register for procurement preference."}
    ]);

    // --- SECTION K: MARKETING ---
    addSec("K", "MARKETING & SALES", [
        {l:"101. Branding", v:"Logo, Signboard, Visiting Cards."},
        {l:"102. Design Cost", v:"2,000 - 5,000"},
        {l:"103. Website", v:"Basic Landing Page (Recommended)."},
        {l:"104. Social Media", v:"Instagram/Facebook Page (Free)."},
        {l:"105. Online Ads", v:"Google Local Ads (Budget 200/day)."},
        {l:"106. Offline Ads", v:"Newspaper Inserts, Pamphlets."},
        {l:"107. Sales Channel", v:"Direct, Zomato/Swiggy (if Food), Amazon (if Retail)."},
        {l:"108. CAC", v:"Target Customer Acquisition Cost < 100."},
        {l:"109. Retention", v:"Loyalty Program / WhatsApp Broadcast."}
    ]);

    // --- SECTION L: REVENUE ---
    const dailySales = Math.round((op * 2.8) / 25);
    addSec("L", "REVENUE & PROFITABILITY", [
        {l:"110. Pricing", v:"Competitive / Value Based."},
        {l:"111. Ticket Size", v: biz.cat==="Food"?"150-300": (biz.cat==="Retail"?"500-2000":"Variable")},
        {l:"112. Sales Volume", v:`Target ~${fmt(dailySales)} sales per day.`},
        {l:"113. Gross Margin", v:`${(biz.margin*100).toFixed(0)}%`},
        {l:"114. Net Margin", v:"10% - 20% (After all expenses)."},
        {l:"115. Break-Even", v: document.getElementById("breakEven").innerText},
        {l:"116. ROI", v:"25% - 40% per annum."},
        {l:"117. Cash Flow", v:"Daily/Weekly."}
    ]);

    // --- SECTION M: RISK ---
    addSec("M", "RISK & COMPLIANCE", [
        {l:"118. Market Risk", v:biz.risk.m > 50 ? "High Competition" : "Moderate"},
        {l:"119. Competition", v:"Local players + Online Giants."},
        {l:"120. Regulatory", v:"Fines for non-compliance (Licensing)."},
        {l:"121. Operational", v:"Staff turnover, Machine breakdown."},
        {l:"122. Financial", v:"Cash crunch during initial months."},
        {l:"123. Supply Chain", v:"Raw material price fluctuation."},
        {l:"124. Insurance", v:"<strong>Fire, Burglary & Stock Insurance</strong> mandatory."}
    ]);

    // --- SECTION N: GROWTH ---
    addSec("N", "SCALABILITY & GROWTH", [
        {l:"125. Expansion", v:"Open 2nd unit after 18-24 months."},
        {l:"126. Franchise", v:"Create SOPs to franchise model later."},
        {l:"127. New Products", v:"Add related categories."},
        {l:"128. Geography", v:"Expand to neighboring towns."},
        {l:"129. Tech Upgrade", v:"Online ordering app."},
        {l:"130. Exit Strategy", v:"Sell business or Automate operations."}
    ]);

    // --- SECTION O: DIGITAL ---
    addSec("O", "DIGITAL & AUTOMATION", [
        {l:"131. Billing SW", v:"Vyapar / Tally / Petpooja."},
        {l:"132. Inventory", v:"Manage via software to prevent pilferage."},
        {l:"133. CRM", v:"Save customer numbers for marketing."},
        {l:"134. Payments", v:"UPI QR (PhonePe/Paytm) + Card Machine."},
        {l:"135. Backup", v:"Cloud backup for data."},
        {l:"136. Cyber Sec", v:"Basic Antivirus + Secure Wi-Fi."}
    ]);

    // --- SECTION P: ESG ---
    addSec("P", "SUSTAINABILITY (ESG)", [
        {l:"137. Energy", v:"Use LED lights / 5-Star appliances."},
        {l:"138. Waste", v:"Segregate Dry/Wet waste."},
        {l:"139. Packaging", v:"Avoid Single-use plastic. Use Paper/Cloth."},
        {l:"140. Sourcing", v:"Source locally to save transport cost."},
        {l:"141. CSR", v:"Small community donations (Optional)."}
    ]);

    // --- SECTION Q: DECISION ---
    addSec("Q", "FINAL DECISION PARAMETERS", [
        {l:"142. Skill Match", v: document.getElementById("skillInput").value >= 2 ? "Matches Requirements" : "Training Needed"},
        {l:"143. Time", v:"Full-time involvement (10-12 Hours/day)."},
        {l:"144. Stress", v:"Moderate to High initially."},
        {l:"145. Family Support", v:"Crucial for funding/backup."},
        {l:"146. Complexity", v: biz.risk.o > 60 ? "Complex Operations" : "Simple Operations"},
        {l:"147. Capital", v: shortfall > 0 ? "Deficit (Loan Needed)" : "Sufficient"},
        {l:"148. VERDICT", v: document.getElementById("bfiScore").innerText > 60 ? "<span style='color:green; font-weight:bold;'>GO AHEAD </span>" : "<span style='color:red; font-weight:bold;'>RE-EVALUATE </span>"}
    ]);
}
    </script>
</body>
</html>