<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BizMitra Pro | AI Business Master Engine</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- CSS STYLES --- */
        :root { --primary:#0f172a; --primary-light:#1e293b; --accent:#2563eb; --accent-dark:#1d4ed8; --success:#10b981; --warning:#f59e0b; --danger:#ef4444; --bg:#f8fafc; --text:#334155; --border:#cbd5e1; }
        * { box-sizing:border-box; margin:0; padding:0; }
        body { font-family:'Inter',sans-serif; background:var(--bg); color:var(--text); min-height:100vh; overflow-x:hidden; }
        
        /* Sidebar */
        .sidebar { position:fixed; top:0; left:0; bottom:0; width:340px; background:var(--primary); color:white; display:flex; flex-direction:column; padding:20px; overflow-y:auto; border-right:1px solid #334155; z-index:100; }
        .brand { font-family:'Merriweather',serif; font-size:1.8rem; margin-bottom:5px; text-align:center; }
        .brand span { color:var(--accent); }
        .tagline { text-align:center; color:#94a3b8; font-size:0.8rem; margin-bottom:25px; }
        .input-group { margin-bottom:15px; }
        .input-group label { display:block; font-size:0.85rem; margin-bottom:5px; color:#cbd5e1; font-weight:600; }
        select, input { width:100%; padding:10px; border-radius:6px; border:1px solid #475569; background:var(--primary-light); color:white; font-size:0.95rem; }
        .tools-area { border-top:1px solid #334155; padding-top:15px; margin-top:10px; }
        .tool-btn { width:100%; padding:12px; margin-bottom:10px; background:#334155; color:white; border:none; border-radius:6px; cursor:pointer; font-weight:600; text-align:left; display:flex; align-items:center; gap:10px; }
        .tool-btn:hover { background:#475569; }
        .tool-btn.primary { background:var(--accent); }
        .sidebar-footer { margin-top:auto; padding-top:20px; border-top:1px solid #334155; }
        .footer-link { display:block; color:#94a3b8; padding:8px 0; cursor:pointer; font-size:0.85rem; }
        .footer-link:hover { color:var(--accent); }

        /* Main Content */
        .main-content { margin-left:340px; padding:40px; min-height:100vh; max-width:100vw; overflow-x:hidden; }
        .header-panel { display:flex; justify-content:space-between; align-items:center; margin-bottom:30px; border-bottom:2px solid #e2e8f0; padding-bottom:15px; }
        .grid-container { display:grid; grid-template-columns:repeat(auto-fit, minmax(300px, 1fr)); gap:20px; margin-bottom:30px; }
        .card { background:white; padding:25px; border-radius:10px; border:1px solid var(--border); overflow-x:auto; }
        .score-card { text-align:center; border-top:5px solid var(--accent); }
        .score-val { font-size:3rem; font-weight:800; color:var(--primary); }
        
        /* Report Details */
        .report-section-wrapper { background:white; border-radius:12px; padding:30px; margin-top:30px; overflow-x:auto; }
        .section-block { margin-bottom:40px; border-left:4px solid var(--border); padding-left:20px; }
        .section-title { font-size:1.4rem; font-weight:700; color:var(--primary); margin-bottom:15px; font-family:'Merriweather',serif; }
        .section-code { background:var(--primary); color:white; padding:4px 10px; border-radius:4px; font-size:0.9rem; margin-right:10px; }
        .data-row { display:flex; margin-bottom:12px; border-bottom:1px solid #f1f5f9; padding-bottom:12px; }
        .data-label { flex:0 0 220px; font-weight:600; color:#475569; }
        .data-value { flex:1; color:#1e293b; white-space:normal; word-wrap:break-word; }
        
        /* Tables & Extras */
        .compare-table { width:100%; border-collapse:collapse; }
        .compare-table th, .compare-table td { padding:12px; border-bottom:1px solid #e2e8f0; text-align:left; }
        .compare-table th { background:var(--primary); color:white; }
        .match-grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(250px, 1fr)); gap:15px; }
        .match-card { background:white; padding:15px; border:1px solid var(--border); border-radius:8px; }
        .risk-bar-group { margin-bottom:10px; display:flex; align-items:center; }
        .risk-label { width:120px; font-weight:bold; font-size:0.9rem; }
        .progress-bg { flex:1; height:8px; background:#e2e8f0; border-radius:4px; }
        .progress-fill { height:100%; border-radius:4px; }
        
        /* Intro & Logo */
        .rotating-logo { position:fixed; top:15px; right:25px; width:60px; height:60px; z-index:2000; animation:spinLogo 8s linear infinite; border-radius:50%; }
        @keyframes spinLogo { 100% { transform:rotate(360deg); } }
        
        /* Info Pages */
        .info-container { max-width:800px; margin:0 auto; line-height:1.7; color:#334155; }
        .math-box { background:#f8fafc; border-left:4px solid var(--accent); padding:20px; margin:20px 0; }
        
        @media (max-width:1000px) { .sidebar { position:relative; width:100%; height:auto; } .main-content { margin-left:0; } .data-row { flex-direction:column; } }
        @media print { .sidebar, .print-btn, .tools-area { display:none; } .main-content { margin:0; padding:0; } }




/* --- MOBILE FIX FOR INTRO VIDEO --- */

/* 1. Force video to fit inside screen without cutting off (Letterbox mode) */
#introVid {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain !important; /* Key fix: Prevents zooming/cropping */
}

/* 2. Ensure Buttons stay visible and sized correctly on Mobile */
#intro-screen {
    background-color: #000 !important; /* Black background for letterbox bars */
}

@media (max-width: 768px) {
    #playBtn {
        font-size: 1.1rem !important; /* Smaller text on mobile */
        padding: 15px 30px !important; /* Smaller button padding */
        width: auto !important;
        max-width: 80%; /* Prevents button from going off screen */
        z-index: 100001; /* Keeps button on top of video */
        position: relative; /* Ensures clickability */
    }
    
    /* Adjust Skip button position for mobile safe areas */
    #intro-screen button[onclick="skipIntro()"] {
        top: 30px !important;
        right: 20px !important;
        padding: 8px 15px !important;
        font-size: 0.9rem !important;
    }
}
    </style>
</head>
<body>

    <!-- INTRO LAYER -->
    <div id="intro-screen" style="position:fixed; top:0; left:0; width:100%; height:100%; background:black; z-index:99999; display:flex; justify-content:center; align-items:center;">
        <button id="playBtn" onclick="startIntro()" style="padding:20px 40px; font-size:1.5rem; background:#2563eb; color:white; border:none; border-radius:8px; cursor:pointer; font-weight:bold;">&#9654; PLAY INTRO</button>
        <button onclick="skipIntro()" style="position:absolute; top:20px; right:20px; padding:10px 20px; background:transparent; color:white; border:1px solid white; border-radius:4px; cursor:pointer; z-index:100000;">SKIP &#187;</button>
        <video id="introVid" playsinline style="display:none; width:100%; height:100%; object-fit:cover;">
            <source src="intro.mp4" type="video/mp4">
        </video>
    </div>

    <!-- GLOBAL SCRIPT FOR INTRO -->
    <script>
        function startIntro() {
            var v = document.getElementById("introVid");
            var b = document.getElementById("playBtn");
            if(v) { 
                b.style.display='none'; 
                v.style.display='block'; 
                v.play().catch(e=>{ console.log(e); skipIntro(); }); 
                v.onended=function(){skipIntro();}; 
            }
        }
        function skipIntro() {
            var s = document.getElementById("intro-screen");
            s.style.opacity='0'; setTimeout(function(){s.style.display='none';},500);
        }
    </script>

    <!-- LOGO -->
    <img src="BMX10.png" class="rotating-logo" alt="Logo" onerror="this.style.display='none'">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="brand">BMX<span>10</span></div>
        <div class="tagline">Business Mentors and Xperts</div>
        
        <div class="input-group">
            <label>1. Category Filter</label>
            <select id="catSelect" onchange="filterBizDropdown()">
                <option value="All">All Categories</option><option value="Retail">Retail</option><option value="Food">Food & Beverage</option>
                <option value="Service">Services</option><option value="Manufacturing">Manufacturing</option><option value="Online">Online / Digital</option>
                <option value="Agriculture">Agriculture</option><option value="Education">Education</option>
            </select>
        </div>
        <div class="input-group"><label>2. Select Business</label><select id="bizSelect"></select></div>
        <div class="input-group"><label>3. Target State</label><select id="stateSelect"><option value="MH">Maharashtra</option><option value="DL">Delhi</option><option value="KA">Karnataka</option><option value="TN">Tamil Nadu</option><option value="UP">Uttar Pradesh</option><option value="GJ">Gujarat</option><option value="WB">West Bengal</option><option value="MP">Madhya Pradesh</option><option value="OT">Other</option></select></div>
        <div class="input-group"><label>4. Location Tier</label><select id="tierSelect"><option value="1.8">Metro (Tier 1)</option><option value="1.3">City (Tier 2)</option><option value="1.0" selected>Town (Tier 3)</option><option value="0.7">Rural</option></select></div>
       <div class="input-group"><label>5. Budget (&#8377;)</label><input type="number" id="budgetInput" value="500000" step="10000"></div>
        <div class="input-group"><label>6. Skill: <span id="skillVal" style="float:right;color:#2563eb;">Medium</span></label><input type="range" id="skillInput" min="1" max="3" value="2" oninput="document.getElementById('skillVal').innerText=['Beginner','Medium','Expert'][this.value-1]"></div>
        
        <div class="tools-area">
           <button class="tool-btn primary" onclick="switchView('analyze'); generateAnalysis();">&#128202; Generate Report</button>
<button class="tool-btn" onclick="switchView('finder')">&#128269; Smart Finder</button>
<button class="tool-btn" onclick="switchView('compare')">&#9878; Comparison</button>
        </div>
        
        <div class="sidebar-footer">
            <div class="footer-link" onclick="switchView('logic')">&#128202; Behind the Numbers</div>
            <div class="footer-link" onclick="switchView('about')">&#8505; About & Disclaimer</div>
            <div class="footer-link" onclick="switchView('privacy')">&#128274; Privacy Policy</div>
            <div class="footer-link" onclick="switchView('contact')">&#128222; Contact Us</div>
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <!-- WELCOME -->
        <div id="welcomeScreen" class="welcome-screen" style="min-height:80vh; display:flex; flex-direction:column; justify-content:center; align-items:center;">
            <div style="font-size:5rem;">&#128202;</div><h1 style="color:var(--primary);">BizMitra Feasibility Engine</h1>
            <p style="color:#64748b;">Select a business idea or use the tools to generate a 148-point analysis.</p>
        </div>

        <!-- REPORT VIEW -->
        <div id="reportContainer" style="display:none;">
            <div class="header-panel"><div><h1 id="rptTitle">Name</h1><div class="status-badge" id="rptSubtitle">Loc</div></div><button class="print-btn" onclick="window.print()" style="padding:10px;background:#334155;color:white;border:none;">Print</button></div>
            <div class="grid-container">
                <div class="score-card card"><div class="score-val" id="bfiScore">0</div><div class="score-label">Feasibility Score</div><p id="bfiMsg" style="margin-top:10px;font-weight:bold;"></p></div>
                <div class="card"><div style="font-size:0.8rem;font-weight:bold;color:#64748b;">EST. INVESTMENT</div><div style="font-size:1.5rem;font-weight:bold;" id="reqInv">?0</div><div style="font-size:0.8rem;font-weight:bold;color:#64748b;margin-top:15px;">MONTHLY NET PROFIT</div><div style="font-size:1.5rem;font-weight:bold;color:#10b981;" id="estProfit">?0</div></div>
                <div class="card"><div style="font-size:0.8rem;font-weight:bold;color:#64748b;">CAPITAL STATUS</div><div style="font-size:1.2rem;font-weight:bold;" id="capStatus">...</div><div style="font-size:0.8rem;font-weight:bold;color:#64748b;margin-top:15px;">BREAK-EVEN</div><div style="font-size:1.2rem;font-weight:bold;" id="breakEven">0 Months</div></div>
            </div>
          <div class="card" style="margin-bottom:20px; border-left:5px solid #10b981;"><h3>&#127963; Loan Eligibility</h3><div id="loanMatches"></div></div>
<div class="card" style="margin-bottom:20px;"><h3>&#128293; Risk Analysis</h3><div class="risk-container" id="riskBars"></div></div>
<div class="card" style="margin-bottom:20px;"><h3>&#128200; Financials</h3><table class="fin-table" id="cashFlowTable"><thead><tr><th>Metric</th><th>Setup (M1-3)</th><th>Growth (M4-6)</th><th>Stable (M7-12)</th></tr></thead><tbody></tbody></table></div>
<div class="card" style="margin-bottom:20px;"><h3>&#128640; 30-Day Plan</h3><div class="timeline" id="timelineList"></div></div>
            <div class="report-section-wrapper" id="detailedReport"></div>
        </div>

        <!-- FINDER VIEW -->
        <div id="finderView" style="display:none;">
            <h1>Smart Finder</h1>
            <div class="card" style="margin-bottom:20px;"><p id="finderInputs"></p><button onclick="runFinder()" style="padding:10px;background:#2563eb;color:white;border:none;">Refresh Matches</button></div>
            <div id="finderResults" class="match-grid"></div>
        </div>

        <!-- COMPARE VIEW -->
        <div id="compareView" style="display:none;">
            <h1>Compare Businesses</h1>
            <div class="card" style="margin-bottom:20px;"><select id="compBiz1"></select> <select id="compBiz2"></select> <button onclick="runComparison()" style="padding:10px;background:#2563eb;color:white;border:none;">Compare</button></div>
            <div id="comparisonResult"></div>
        </div>

   <!-- VIEW 4: BEHIND THE NUMBERS (LOGIC EXPLANATION) -->
    <div id="logicView" style="display:none;" class="info-container">
        <h1>Behind the Numbers</h1>
        <p>At BMX10, we believe in transparency. Here is the mathematical logic used to generate your feasibility report.</p>

        <div class="math-box">
            <h3>1. Investment Calculation</h3>
            <p>We calculate investment based on your selected <strong>Location Tier</strong>. Costs in Metro cities are significantly higher than Rural areas.</p>
            <p><strong>Formula:</strong> <span class="math-formula">Base Investment × (0.6 Fixed + 0.4 Variable × Tier Multiplier)</span></p>
            <ul>
                <li><strong>Fixed Costs (60%):</strong> Machinery, Licenses, Tech (Constant).</li>
                <li><strong>Variable Costs (40%):</strong> Interiors, Deposit, Furniture (Varies by City).</li>
                <li><strong>Tier Multipliers:</strong> Metro (1.8), City (1.3), Town (1.0), Rural (0.7).</li>
            </ul>
        </div>

        <div class="math-box">
            <h3>2. Profitability Logic</h3>
            <p>We use a <strong>Turnover Ratio Model</strong> instead of flat assumptions.</p>
            <p><strong>Step A (Op Cost):</strong> We calculate monthly expenses (Rent + Salaries) based on location.</p>
            <p><strong>Step B (Revenue Target):</strong> We assume a healthy business must generate revenue <strong>4x</strong> its operational cost.</p>
            <p><strong>Step C (Net Profit):</strong> <span class="math-formula">(Revenue × Margin %)</span></p>
            <p>This ensures the profit shown is realistic for a <em>sustainable</em> business, not a struggling one.</p>
        </div>

        <div class="math-box">
            <h3>3. BFI Score (Business Feasibility Index)</h3>
            <p>Your score (0-100) is a weighted algorithm:</p>
            <ul>
                <li><strong>Capital Adequacy (45%):</strong> Do you have enough funds vs required investment?</li>
                <li><strong>Skill Match (25%):</strong> Does your experience level match the business complexity?</li>
                <li><strong>Market Potential (30%):</strong> Based on the inherent market risk of the category.</li>
            </ul>
        </div>
    </div>

<!-- VIEW 5: ABOUT & DISCLAIMER (Corrected Icons) -->
    <div id="aboutView" style="display:none;" class="info-container">
        <h1>About BMX10</h1>
        <p>BMX10 is an AI-powered feasibility engine designed to help Indian entrepreneurs make data-driven decisions. We cover 100+ business categories with localized financial modeling.</p>
        
        <h2 style="color:var(--danger)">&#9888; Disclaimer</h2>
        <p>The financial projections, costs, and legal requirements provided by this application are <strong>estimates for educational purposes only</strong>.</p>
        <p>Actual costs may vary based on real-estate fluctuations, vendor negotiations, and government policy changes. Users are advised to consult with a Chartered Accountant (CA) or Legal Advisor before making any actual investment.</p>
        <p>BizMitra is not responsible for any financial losses incurred based on these projections.</p>
    </div>

    <!-- VIEW 6: PRIVACY POLICY -->
    <div id="privacyView" style="display:none;" class="info-container">
        <h1>Privacy Policy</h1>
        <p><strong>Last Updated:</strong> 2025</p>
        <p>Your privacy is important to us. This statement explains how we handle your data.</p>
        
        <h2>1. No Data Collection</h2>
        <p>BMX10 operates entirely on your browser (Client-Side). We <strong>do not store</strong> your input data (Budget, Location, Ideas) on any server. All calculations happen locally on your device.</p>
        
        <h2>2. No Cookies</h2>
        <p>We do not use tracking cookies or third-party analytics software.</p>
        
        <h2>3. Local Storage</h2>
        <p>Any saved preferences are stored temporarily in your browser's RAM and are cleared when you close the tab.</p>
    </div>

   <!-- VIEW 7: CONTACT (Corrected Icons) -->
    <div id="contactView" style="display:none;" class="info-container">
        <h1>Contact Us</h1>
        <p>Have suggestions for new business categories or found a bug?</p>
        
        <div class="card" style="text-align:center; padding:40px;">
            <div style="font-size:3rem;">&#128231;</div>
            <h3>Email Support</h3>
            <p style="color:var(--accent); font-weight:bold;">support@BMX10.in</p>
            <p style="font-size:0.9rem; color:#64748b;">We usually reply within 24 hours.</p>
            
            <hr style="margin:20px 0; border:0; border-top:1px solid #e2e8f0;">
            
            <h3>Headquarters</h3>
            <p>BMX10<br>Mumbai, Maharashtra - 400067</p>
        </div>
    </div>
    </main>

    <!-- APP LOGIC -->
    <script>
        // 1. FULL DATABASE (100 ITEMS)
        const database=[
            {id:1,name:"Grocery Store",cat:"Retail",baseInv:300000,baseOp:25000,margin:0.15,risk:{m:30,o:40,r:20},desc:"Daily essentials."},
            {id:2,name:"Apparel Store",cat:"Retail",baseInv:800000,baseOp:45000,margin:0.35,risk:{m:60,o:50,r:30},desc:"Fashion retail."},
            {id:3,name:"Mobile Shop",cat:"Retail",baseInv:500000,baseOp:30000,margin:0.20,risk:{m:40,o:30,r:20},desc:"Phones & accessories."},
            {id:4,name:"Footwear Shop",cat:"Retail",baseInv:600000,baseOp:35000,margin:0.40,risk:{m:50,o:40,r:20},desc:"Shoe store."},
            {id:5,name:"Electronics",cat:"Retail",baseInv:1500000,baseOp:60000,margin:0.18,risk:{m:50,o:40,r:20},desc:"Appliances."},
            {id:6,name:"Cosmetics",cat:"Retail",baseInv:400000,baseOp:25000,margin:0.45,risk:{m:60,o:30,r:20},desc:"Beauty products."},
            {id:7,name:"Stationery",cat:"Retail",baseInv:300000,baseOp:20000,margin:0.30,risk:{m:20,o:20,r:10},desc:"Books & pens."},
            {id:8,name:"Gift Shop",cat:"Retail",baseInv:350000,baseOp:25000,margin:0.50,risk:{m:50,o:30,r:10},desc:"Novelties."},
            {id:9,name:"Jewellery (Imitation)",cat:"Retail",baseInv:300000,baseOp:20000,margin:0.60,risk:{m:50,o:20,r:10},desc:"Artificial jewellery."},
            {id:10,name:"Optical Store",cat:"Retail",baseInv:500000,baseOp:30000,margin:0.65,risk:{m:40,o:30,r:20},desc:"Eyewear."},
            {id:11,name:"Hardware",cat:"Retail",baseInv:800000,baseOp:30000,margin:0.25,risk:{m:30,o:40,r:20},desc:"Construction material."},
            {id:12,name:"Utensil Shop",cat:"Retail",baseInv:600000,baseOp:25000,margin:0.35,risk:{m:30,o:20,r:10},desc:"Kitchenware."},
            {id:13,name:"Toy Store",cat:"Retail",baseInv:500000,baseOp:30000,margin:0.40,risk:{m:50,o:30,r:10},desc:"Kids toys."},
            {id:14,name:"Sports Goods",cat:"Retail",baseInv:600000,baseOp:30000,margin:0.35,risk:{m:40,o:20,r:10},desc:"Sports gear."},
            {id:15,name:"Furniture Shop",cat:"Retail",baseInv:1200000,baseOp:60000,margin:0.40,risk:{m:60,o:40,r:20},desc:"Home furniture."},
            {id:16,name:"Bag Store",cat:"Retail",baseInv:400000,baseOp:25000,margin:0.45,risk:{m:40,o:20,r:10},desc:"Luggage."},
            {id:17,name:"Watch Shop",cat:"Retail",baseInv:500000,baseOp:25000,margin:0.50,risk:{m:50,o:20,r:10},desc:"Timepieces."},
            {id:18,name:"Pet Shop",cat:"Retail",baseInv:400000,baseOp:30000,margin:0.35,risk:{m:50,o:50,r:30},desc:"Pet food."},
            {id:19,name:"Florist",cat:"Retail",baseInv:100000,baseOp:15000,margin:0.60,risk:{m:50,o:60,r:10},desc:"Flowers."},
            {id:20,name:"Pharmacy",cat:"Retail",baseInv:800000,baseOp:40000,margin:0.25,risk:{m:20,o:50,r:70},desc:"Medicines."},
            {id:21,name:"Tea Stall",cat:"Food",baseInv:100000,baseOp:15000,margin:0.60,risk:{m:30,o:40,r:30},desc:"Chai point."},
            {id:22,name:"Cafe",cat:"Food",baseInv:1000000,baseOp:70000,margin:0.65,risk:{m:70,o:60,r:50},desc:"Coffee shop."},
            {id:23,name:"Cloud Kitchen",cat:"Food",baseInv:400000,baseOp:40000,margin:0.55,risk:{m:60,o:50,r:40},desc:"Delivery only."},
            {id:24,name:"Bakery",cat:"Food",baseInv:600000,baseOp:40000,margin:0.50,risk:{m:50,o:50,r:40},desc:"Cakes."},
            {id:25,name:"Fast Food",cat:"Food",baseInv:500000,baseOp:35000,margin:0.55,risk:{m:50,o:50,r:45},desc:"Snacks/QSR."},
            {id:26,name:"Tiffin Service",cat:"Food",baseInv:50000,baseOp:15000,margin:0.40,risk:{m:40,o:60,r:30},desc:"Home meals."},
            {id:27,name:"Juice Bar",cat:"Food",baseInv:200000,baseOp:20000,margin:0.60,risk:{m:40,o:40,r:30},desc:"Fresh juice."},
            {id:28,name:"Ice Cream",cat:"Food",baseInv:400000,baseOp:25000,margin:0.50,risk:{m:50,o:30,r:30},desc:"Parlour."},
            {id:29,name:"Sweet Shop",cat:"Food",baseInv:1000000,baseOp:60000,margin:0.45,risk:{m:30,o:60,r:40},desc:"Mithai."},
            {id:30,name:"Food Truck",cat:"Food",baseInv:600000,baseOp:30000,margin:0.55,risk:{m:60,o:50,r:40},desc:"Mobile food."},
            {id:31,name:"Catering",cat:"Food",baseInv:300000,baseOp:20000,margin:0.40,risk:{m:50,o:70,r:30},desc:"Events."},
            {id:32,name:"Organic Store",cat:"Food",baseInv:500000,baseOp:30000,margin:0.35,risk:{m:40,o:30,r:20},desc:"Healthy food."},
            {id:33,name:"Dry Fruits",cat:"Food",baseInv:800000,baseOp:25000,margin:0.30,risk:{m:30,o:20,r:10},desc:"Nuts."},
            {id:34,name:"Spice Store",cat:"Food",baseInv:200000,baseOp:15000,margin:0.40,risk:{m:30,o:30,r:20},desc:"Masala."},
            {id:35,name:"Pickle Biz",cat:"Food",baseInv:50000,baseOp:10000,margin:0.50,risk:{m:40,o:40,r:30},desc:"Home made."},
            {id:36,name:"Namkeen Shop",cat:"Food",baseInv:300000,baseOp:25000,margin:0.40,risk:{m:30,o:40,r:30},desc:"Snacks."},
            {id:37,name:"Veg Shop",cat:"Food",baseInv:100000,baseOp:20000,margin:0.30,risk:{m:20,o:60,r:10},desc:"Vegetables."},
            {id:38,name:"Meat Shop",cat:"Food",baseInv:200000,baseOp:25000,margin:0.35,risk:{m:30,o:50,r:50},desc:"Chicken/Meat."},
            {id:39,name:"Pan Shop",cat:"Food",baseInv:50000,baseOp:10000,margin:0.60,risk:{m:30,o:20,r:20},desc:"Betel leaf."},
            {id:40,name:"Water Supply",cat:"Food",baseInv:300000,baseOp:20000,margin:0.50,risk:{m:20,o:40,r:20},desc:"Jars."},
            {id:41,name:"Mobile Repair",cat:"Service",baseInv:100000,baseOp:10000,margin:0.70,risk:{m:30,o:20,r:10},desc:"Tech repair."},
            {id:42,name:"AC Service",cat:"Service",baseInv:50000,baseOp:5000,margin:0.75,risk:{m:30,o:30,r:10},desc:"Cooling."},
            {id:43,name:"Plumber",cat:"Service",baseInv:30000,baseOp:5000,margin:0.80,risk:{m:20,o:20,r:10},desc:"Utility."},
            {id:44,name:"Cleaning",cat:"Service",baseInv:100000,baseOp:10000,margin:0.60,risk:{m:40,o:30,r:10},desc:"Housekeeping."},
            {id:45,name:"Pest Control",cat:"Service",baseInv:100000,baseOp:10000,margin:0.70,risk:{m:40,o:40,r:30},desc:"Hygiene."},
            {id:46,name:"Car Wash",cat:"Service",baseInv:500000,baseOp:30000,margin:0.60,risk:{m:50,o:40,r:20},desc:"Auto clean."},
            {id:47,name:"Laundry",cat:"Service",baseInv:400000,baseOp:25000,margin:0.50,risk:{m:30,o:40,r:20},desc:"Washing."},
            {id:48,name:"Salon",cat:"Service",baseInv:500000,baseOp:35000,margin:0.65,risk:{m:50,o:40,r:30},desc:"Beauty."},
            {id:49,name:"Tailoring",cat:"Service",baseInv:200000,baseOp:15000,margin:0.70,risk:{m:40,o:30,r:10},desc:"Boutique."},
            {id:50,name:"Event Mgmt",cat:"Service",baseInv:100000,baseOp:10000,margin:0.40,risk:{m:60,o:70,r:20},desc:"Weddings."},
            {id:51,name:"Travel Agency",cat:"Service",baseInv:150000,baseOp:20000,margin:0.30,risk:{m:60,o:20,r:20},desc:"Booking."},
            {id:52,name:"Courier",cat:"Service",baseInv:100000,baseOp:15000,margin:0.25,risk:{m:30,o:30,r:10},desc:"Logistics."},
            {id:53,name:"Real Estate",cat:"Service",baseInv:50000,baseOp:10000,margin:0.85,risk:{m:60,o:20,r:30},desc:"Broker."},
            {id:54,name:"Security",cat:"Service",baseInv:500000,baseOp:300000,margin:0.20,risk:{m:40,o:60,r:60},desc:"Guards."},
            {id:55,name:"Taxi Svc",cat:"Service",baseInv:800000,baseOp:20000,margin:0.35,risk:{m:40,o:40,r:40},desc:"Cab."},
            {id:56,name:"Bike Rental",cat:"Service",baseInv:500000,baseOp:15000,margin:0.40,risk:{m:50,o:40,r:30},desc:"Rentals."},
            {id:57,name:"Gym",cat:"Service",baseInv:1500000,baseOp:60000,margin:0.50,risk:{m:50,o:30,r:20},desc:"Fitness."},
            {id:58,name:"Yoga",cat:"Service",baseInv:200000,baseOp:15000,margin:0.80,risk:{m:40,o:20,r:10},desc:"Wellness."},
            {id:59,name:"Interiors",cat:"Service",baseInv:100000,baseOp:10000,margin:0.70,risk:{m:60,o:40,r:10},desc:"Decor."},
            {id:60,name:"Xerox",cat:"Service",baseInv:200000,baseOp:15000,margin:0.50,risk:{m:30,o:30,r:10},desc:"Print."},
            {id:61,name:"Digital Mkt",cat:"Online",baseInv:50000,baseOp:5000,margin:0.80,risk:{m:70,o:20,r:10},desc:"Agency."},
            {id:62,name:"Graphic Design",cat:"Online",baseInv:50000,baseOp:2000,margin:0.90,risk:{m:60,o:10,r:10},desc:"Creative."},
            {id:63,name:"Content",cat:"Online",baseInv:20000,baseOp:1000,margin:0.95,risk:{m:50,o:10,r:10},desc:"Writing."},
            {id:64,name:"Ecom Seller",cat:"Online",baseInv:200000,baseOp:15000,margin:0.30,risk:{m:70,o:40,r:30},desc:"Amazon."},
            {id:65,name:"Dropship",cat:"Online",baseInv:30000,baseOp:5000,margin:0.20,risk:{m:80,o:20,r:10},desc:"Retail."},
            {id:66,name:"YouTuber",cat:"Online",baseInv:50000,baseOp:2000,margin:0.90,risk:{m:80,o:40,r:10},desc:"Video."},
            {id:67,name:"App Dev",cat:"Online",baseInv:50000,baseOp:5000,margin:0.80,risk:{m:60,o:50,r:10},desc:"Coding."},
            {id:68,name:"Web Design",cat:"Online",baseInv:50000,baseOp:5000,margin:0.80,risk:{m:50,o:30,r:10},desc:"Sites."},
            {id:69,name:"Influencer",cat:"Online",baseInv:50000,baseOp:5000,margin:0.70,risk:{m:60,o:20,r:10},desc:"Social."},
            {id:70,name:"Online Tutor",cat:"Online",baseInv:30000,baseOp:2000,margin:0.90,risk:{m:40,o:10,r:10},desc:"Teach."},
            {id:71,name:"Tuition",cat:"Education",baseInv:100000,baseOp:10000,margin:0.85,risk:{m:30,o:10,r:10},desc:"Classes."},
            {id:72,name:"Spoken English",cat:"Education",baseInv:100000,baseOp:10000,margin:0.80,risk:{m:40,o:10,r:10},desc:"Lang."},
            {id:73,name:"Exam Coach",cat:"Education",baseInv:200000,baseOp:20000,margin:0.70,risk:{m:50,o:20,r:20},desc:"Competitive."},
            {id:74,name:"Hobby Class",cat:"Education",baseInv:50000,baseOp:5000,margin:0.80,risk:{m:40,o:10,r:10},desc:"Arts."},
            {id:75,name:"Play School",cat:"Education",baseInv:800000,baseOp:40000,margin:0.40,risk:{m:40,o:60,r:50},desc:"Preschool."},
            {id:76,name:"Skill Center",cat:"Education",baseInv:300000,baseOp:25000,margin:0.50,risk:{m:50,o:30,r:30},desc:"Vocational."},
            {id:77,name:"Computer Inst",cat:"Education",baseInv:500000,baseOp:30000,margin:0.60,risk:{m:50,o:30,r:20},desc:"IT."},
            {id:78,name:"Music Class",cat:"Education",baseInv:100000,baseOp:10000,margin:0.80,risk:{m:40,o:10,r:10},desc:"Music."},
            {id:79,name:"Dance Class",cat:"Education",baseInv:300000,baseOp:20000,margin:0.70,risk:{m:40,o:20,r:10},desc:"Dance."},
            {id:80,name:"Art School",cat:"Education",baseInv:100000,baseOp:10000,margin:0.80,risk:{m:40,o:10,r:10},desc:"Painting."},
            {id:81,name:"Paper Cup",cat:"Manufacturing",baseInv:1000000,baseOp:80000,margin:0.20,risk:{m:50,o:70,r:50},desc:"Cups."},
            {id:82,name:"Paper Plate",cat:"Manufacturing",baseInv:800000,baseOp:60000,margin:0.20,risk:{m:50,o:70,r:50},desc:"Plates."},
            {id:83,name:"Candle Making",cat:"Manufacturing",baseInv:50000,baseOp:10000,margin:0.40,risk:{m:40,o:30,r:10},desc:"Wax."},
            {id:84,name:"Soap Mfg",cat:"Manufacturing",baseInv:200000,baseOp:30000,margin:0.35,risk:{m:50,o:40,r:30},desc:"Soap."},
            {id:85,name:"Detergent",cat:"Manufacturing",baseInv:300000,baseOp:40000,margin:0.30,risk:{m:60,o:40,r:30},desc:"Washing."},
            {id:86,name:"Agarbatti",cat:"Manufacturing",baseInv:100000,baseOp:15000,margin:0.35,risk:{m:30,o:30,r:10},desc:"Incense."},
            {id:87,name:"Notebooks",cat:"Manufacturing",baseInv:800000,baseOp:50000,margin:0.25,risk:{m:40,o:50,r:30},desc:"Copy."},
            {id:88,name:"Slippers",cat:"Manufacturing",baseInv:200000,baseOp:20000,margin:0.35,risk:{m:40,o:30,r:20},desc:"Footwear."},
            {id:89,name:"Spices",cat:"Manufacturing",baseInv:500000,baseOp:30000,margin:0.30,risk:{m:30,o:40,r:40},desc:"Masala."},
            {id:90,name:"Flour Mill",cat:"Manufacturing",baseInv:400000,baseOp:20000,margin:0.25,risk:{m:20,o:40,r:30},desc:"Atta."},
            {id:91,name:"Oil Mill",cat:"Manufacturing",baseInv:600000,baseOp:40000,margin:0.30,risk:{m:30,o:50,r:40},desc:"Oil."},
            {id:92,name:"Garment Mfg",cat:"Manufacturing",baseInv:1500000,baseOp:100000,margin:0.25,risk:{m:50,o:80,r:60},desc:"Clothes."},
            {id:93,name:"Furniture Mfg",cat:"Manufacturing",baseInv:1000000,baseOp:80000,margin:0.30,risk:{m:50,o:70,r:40},desc:"Wood."},
            {id:94,name:"Packaging",cat:"Manufacturing",baseInv:1200000,baseOp:90000,margin:0.20,risk:{m:40,o:60,r:40},desc:"Boxes."},
            {id:95,name:"Bag Mfg",cat:"Manufacturing",baseInv:2000000,baseOp:150000,margin:0.15,risk:{m:40,o:70,r:50},desc:"Bags."},
            {id:96,name:"Dairy",cat:"Agriculture",baseInv:1000000,baseOp:50000,margin:0.40,risk:{m:20,o:80,r:30},desc:"Milk."},
            {id:97,name:"Poultry",cat:"Agriculture",baseInv:500000,baseOp:40000,margin:0.35,risk:{m:40,o:70,r:30},desc:"Chicken."},
            {id:98,name:"Goat Farm",cat:"Agriculture",baseInv:300000,baseOp:15000,margin:0.45,risk:{m:30,o:50,r:20},desc:"Meat."},
            {id:99,name:"Mushroom",cat:"Agriculture",baseInv:100000,baseOp:10000,margin:0.60,risk:{m:50,o:60,r:10},desc:"Farm."},
            {id:100,name:"Nursery",cat:"Agriculture",baseInv:200000,baseOp:15000,margin:0.50,risk:{m:30,o:40,r:10},desc:"Plants."}
        ];

        // 2. HELPERS & INIT
      const fmt = n => "\u20B9 " + n.toLocaleString('en-IN');
        window.onload = function() {
            filterBizDropdown();
            let c1=document.getElementById("compBiz1"), c2=document.getElementById("compBiz2");
            database.forEach(b => { 
                let o1=document.createElement("option"), o2=document.createElement("option");
                o1.value=b.id; o1.text=b.name; o2.value=b.id; o2.text=b.name;
                c1.add(o1); c2.add(o2); 
            });
            c2.selectedIndex=1;
        };

        function filterBizDropdown() {
            let cat=document.getElementById("catSelect").value, sel=document.getElementById("bizSelect");
            sel.innerHTML="";
            database.filter(b=>cat==="All"||b.cat===cat).forEach(b=>{
                let o=document.createElement("option"); o.value=b.id; o.text=b.name; sel.add(o);
            });
        }

        function switchView(mode) {
            document.getElementById("welcomeScreen").style.display='none';
            ["reportContainer","finderView","compareView","logicView","aboutView","privacyView","contactView"].forEach(id=>document.getElementById(id).style.display='none');
            if(mode==='analyze'){document.getElementById("reportContainer").style.display='block'; window.scrollTo({top:0,behavior:'smooth'});}
            else document.getElementById(mode+"View").style.display='block';
            if(mode==='finder') runFinder();
        }

        // 3. MAIN ANALYSIS
        function generateAnalysis() {
            let biz = database.find(b=>b.id==document.getElementById("bizSelect").value);
            let tier = parseFloat(document.getElementById("tierSelect").value);
            let budget = parseInt(document.getElementById("budgetInput").value);
            let state = document.getElementById("stateSelect").value;

            // CORRECT MATH
            let adjInv = Math.round((biz.baseInv * 0.6) + ((biz.baseInv * 0.4) * tier));
            let adjOp = Math.round(biz.baseOp * tier);
            let profit = Math.round(adjOp * 4.0 * biz.margin);
            let bep = profit>0 ? Math.ceil(adjInv/profit) : 99;
            let fundRatio = budget/adjInv;
            let bfi = Math.round((Math.min(fundRatio,1.2)*45) + 30 + ((100-biz.risk.m)*0.25));

            // UI UPDATES
            document.getElementById("rptTitle").innerText = biz.name;
            document.getElementById("rptSubtitle").innerText = document.getElementById("stateSelect").options[document.getElementById("stateSelect").selectedIndex].text;
            document.getElementById("bfiScore").innerText = bfi;
          document.getElementById("bfiMsg").innerText = bfi>75 ? "Excellent \u2705" : (bfi>50 ? "Moderate \u26A0" : "High Risk \uD83D\uDED1");
            document.getElementById("bfiMsg").style.color = bfi>75?"#10b981":(bfi>50?"#f59e0b":"#ef4444");
            document.getElementById("reqInv").innerText = fmt(adjInv);
            document.getElementById("estProfit").innerText = fmt(profit);
            document.getElementById("breakEven").innerText = bep + " Months";
           document.getElementById("capStatus").innerText = budget>=adjInv ? "Sufficient \u2705" : "Shortfall \uD83D\uDD3B";
            document.getElementById("capStatus").style.color = budget>=adjInv ? "#10b981" : "#ef4444";
            document.getElementById("loanMatches").innerText = budget<adjInv ? (adjInv<500000?"\u2022 Mudra Shishu/Kishor":"\u2022 Mudra Tarun / PMEGP") : "\u2705 No Loan Needed";
            // Risk Bars
            let setRisk=(id,v)=>{ let e=document.createElement("div"); e.className="risk-bar-group"; e.innerHTML=`<div class="risk-label">${id}</div><div class="progress-bg"><div class="progress-fill" style="width:${v}%;background:${v<30?'#10b981':(v<60?'#f59e0b':'#ef4444')}"></div></div>`; document.getElementById("riskBars").appendChild(e); };
            document.getElementById("riskBars").innerHTML="";
            setRisk("Market", biz.risk.m); setRisk("Capital", Math.min(100,Math.max(10,(1-fundRatio)*100))); setRisk("Ops", biz.risk.o);

            // Financial Table
            let ftb = document.querySelector("#cashFlowTable tbody");
            ftb.innerHTML = `
                <tr><td><strong>Monthly Exp</strong></td><td>${fmt(adjOp*1.5)}</td><td>${fmt(adjOp*1.2)}</td><td>${fmt(adjOp)}</td></tr>
                <tr><td><strong>Revenue</strong></td><td>${fmt(profit*0.5)}</td><td>${fmt(profit*1.5)}</td><td>${fmt(profit*2.5)}</td></tr>
                <tr><td><strong>Net Flow</strong></td><td style='color:red'>-${fmt(adjOp)}</td><td style='color:orange'>-${fmt(adjOp*0.2)}</td><td style='color:green'>+${fmt(profit)}</td></tr>`;

            // Timeline
            let tl = document.getElementById("timelineList");
            let steps = [{d:"D1-3",t:"Entity Reg",x:"Proprietorship"},{d:"D4-7",t:"Bank/PAN",x:"Current A/c"},{d:"D8-15",t:"Licenses",x:"Udyam, GST, FSSAI"}];
            tl.innerHTML = steps.map(s=>`<div class="timeline-item"><div class="time-day">${s.d}</div><div class="time-task">${s.t}</div><div class="time-desc">${s.x}</div></div>`).join("");

            renderDetailedReport(biz, adjInv, adjOp, tier, state, budget);
        }

        // 4. FINDER
        function runFinder() {
            let budget = parseInt(document.getElementById("budgetInput").value);
            let tier = parseFloat(document.getElementById("tierSelect").value);
            let cat = document.getElementById("catSelect").value;
            let res = document.getElementById("finderResults"); res.innerHTML="";
            document.getElementById("finderInputs").innerHTML = `Budget: <b>${fmt(budget)}</b> | Cat: <b>${cat}</b>`;
            
            let matches = database.filter(b => {
                let cost = (b.baseInv*0.6) + ((b.baseInv*0.4)*tier);
                return (cat==="All"||b.cat===cat) && budget >= (cost*0.5);
            });
            if(matches.length===0) res.innerHTML="No matches. Increase budget.";
            matches.forEach(b => {
                let cost = Math.round((b.baseInv*0.6) + ((b.baseInv*0.4)*tier));
                res.innerHTML += `<div class="match-card"><h3>${b.name}</h3><p>Est Cost: ${fmt(cost)}</p><button onclick="document.getElementById('bizSelect').value=${b.id};switchView('analyze');generateAnalysis()" style="width:100%;padding:5px;background:#2563eb;color:white;border:none;">View Report</button></div>`;
            });
        }

        // 5. COMPARISON
        function runComparison() {
            let b1 = database.find(b=>b.id==document.getElementById("compBiz1").value);
            let b2 = database.find(b=>b.id==document.getElementById("compBiz2").value);
            let tier = parseFloat(document.getElementById("tierSelect").value);
            
            let calc = (b) => {
                let cost = Math.round((b.baseInv*0.6) + ((b.baseInv*0.4)*tier));
                let op = Math.round(b.baseOp*tier);
                let prof = Math.round(op*4.0*b.margin);
                return {c:cost, p:prof};
            };
            let d1=calc(b1), d2=calc(b2);

            document.getElementById("comparisonResult").innerHTML = `
                <table class="compare-table">
                    <tr><th>Metric</th><th>${b1.name}</th><th>${b2.name}</th></tr>
                    <tr><td>Invest</td><td class="${d1.c<d2.c?'winner':''}">${fmt(d1.c)}</td><td class="${d2.c<d1.c?'winner':''}">${fmt(d2.c)}</td></tr>
                    <tr><td>Profit</td><td class="${d1.p>d2.p?'winner':''}">${fmt(d1.p)}</td><td class="${d2.p>d1.p?'winner':''}">${fmt(d2.p)}</td></tr>
                    <tr><td>Margin</td><td class="${b1.margin>b2.margin?'winner':''}">${(b1.margin*100).toFixed(0)}%</td><td class="${b2.margin>b1.margin?'winner':''}">${(b2.margin*100).toFixed(0)}%</td></tr>
                </table>`;
        }
// --- 6. DETAILED REPORT RENDERER (EDUCATIONAL & COMPREHENSIVE) ---
function renderDetailedReport(biz, inv, op, tier, state, budget) {
    const container = document.getElementById("detailedReport");
    container.innerHTML = "";
    
    // Formatting Helpers
    const fmt = (n) => "\u20B9 " + n.toLocaleString('en-IN');
    
    // Helper to add sections with text wrapping style
    const addSec = (code, title, data) => {
        let html = `<div class="section-block active"><div class="section-title"><span class="section-code">${code}</span> ${title}</div>`;
        data.forEach(d => {
            const num = d.l.match(/^\d+/) ? d.l.match(/^\d+/)[0] : "•";
            const label = d.l.replace(/^\d+[\.\s]*/, "");
            html += `
                <div class="data-row">
                    <div class="data-label"><span>${num}</span> ${label}</div>
                    <div class="data-value" style="font-size:0.95rem; line-height:1.6;">${d.v}</div>
                </div>`;
        });
        container.innerHTML += html + "</div>";
    };

    // --- LOGIC & CALCULATIONS ---
    const isMetro = tier > 1.5;
    const isRural = tier < 0.8;
    const tierName = isMetro ? "Metro City (Tier 1)" : (isRural ? "Rural / Semi-Urban" : "Tier 2/3 City");
    const rentCost = Math.round(op * 0.4); 
    const staffSal = isMetro ? "\u20B9 18,000 - 25,000" : (isRural ? "\u20B9 8,000 - 12,000" : "\u20B9 12,000 - 18,000");
    const shortfall = inv - budget;
    const emi = shortfall > 0 ? Math.round(shortfall * 0.0212) : 0; // Approx EMI for 5yr @ 10%

    // --- SECTION A: BASIC IDENTITY ---
    addSec("A", "BUSINESS IDENTITY & STRATEGY", [
        {l:"1. Business Name", v:`Proposed Concept: <strong>${biz.name}</strong>. Ensure the name is catchy, easy to spell, and locally relevant. Check availability on the MCA website to avoid trademark conflicts.`},
        {l:"2. Industry Category", v:`This falls under the <strong>${biz.cat}</strong> sector. This sector is currently seeing steady growth in India due to increasing domestic consumption.`},
        {l:"3. Niche / Sub-Category", v:`<strong>${biz.desc}</strong>. Focusing on this specific niche will help you differentiate from general competitors.`},
        {l:"4. Nature of Business", v:"<strong>B2C (Business to Consumer)</strong>. You will be dealing directly with end customers, so customer service and experience are paramount."},
        {l:"5. Business Model", v:"<strong>Hybrid / Omnichannel</strong>. We recommend a physical presence combined with digital ordering (WhatsApp/Zomato/Website) to maximize reach."},
        {l:"6. Operational Scale", v:"<strong>Micro Enterprise</strong>. Since investment is below \u20B9 1 Crore, you qualify for MSME benefits under the Micro category."},
        {l:"7. Legal Entity Type", v:"<strong>Sole Proprietorship</strong> is recommended for starting up due to lower compliance costs. You can upgrade to a Private Limited company once turnover crosses \u20B9 50 Lakhs."},
        {l:"8. Target Geography", v:`Primary Market: <strong>${state}</strong>. specifically targeting ${tierName} neighborhoods with moderate to high population density.`},
        {l:"9. Target Audience", v:"Middle-income households and local residents. Focus on the age group 18-45 who value convenience and quality."},
        {l:"10. Seasonality", v:"This business generally enjoys <strong>Year-round Demand</strong>. However, expect a 20-30% surge in sales during festival seasons (Diwali, New Year)."}
    ]);

    // --- SECTION B: LOCATION ---
    addSec("B", "LOCATION & INFRASTRUCTURE PLANNING", [
        {l:"11. Location Type", v:biz.cat === "Manufacturing" ? "Industrial Area / MIDC outskirts are preferred to avoid noise complaints and access cheap power." : "High Street / Main Market area with high visibility is crucial for footfall."},
        {l:"12. City Tier Impact", v:`Selected: <strong>${tierName}</strong>. Costs here are moderate, but customers are price-sensitive. Quality must balance with affordability.`},
        {l:"13. Land / Premises", v:"<strong>Lease Model Recommended</strong>. Buying property locks up capital. Look for a long-term lease (3-5 years) with a lock-in period of 1 year."},
        {l:"14. Estimated Rent", v:`Budget approx. <strong>${fmt(rentCost)} per month</strong>. Do not exceed 15% of your projected monthly revenue on rent.`},
        {l:"15. Rental Deposit", v:`Market standard is 6 months of rent: <strong>${fmt(rentCost * 6)}</strong>. This is refundable but blocks your initial capital.`},
        {l:"16. Lease Agreement", v:"Ensure a registered Rent Agreement (Notarized). Cost approx \u20B9 3,000. Essential for GST and Bank Loan processing."},
        {l:"17. Carpet Area", v:biz.cat === "Manufacturing" ? "Minimum 1000-1500 Sq.ft required for machinery and raw material storage." : "300-500 Sq.ft is sufficient. Focus on efficient layout design."},
        {l:"18. Parking Facility", v:"Critical. 40% of customers may skip your store if 2-wheeler parking is not available nearby."},
        {l:"19. Visibility Score", v:"High visibility is required. Ensure your signboard is visible from at least 50 meters away."}
    ]);

    // --- SECTION C: LEGAL ---
    addSec("C", "LEGAL & REGULATORY COMPLIANCE", [
        {l:"20. Registration Cost", v:"Budget around <strong>\u20B9 5,000 - \u20B9 10,000</strong> for all initial government registrations and agent fees."},
        {l:"21. PAN Card", v:"For Proprietorship, your <strong>Personal PAN</strong> is used. For Partnership/LLP, a separate Firm PAN is required."},
        {l:"22. TAN Number", v:"Required only if you deduct TDS (e.g., if you pay rent > \u20B9 50k/month or salaries above taxable limits)."},
        {l:"23. Udyam Registration", v:"<strong>Mandatory & Free.</strong> This provides you MSME status, access to collateral-free loans, and subsidy schemes."},
        {l:"24. GST Registration", v:"Mandatory if turnover exceeds \u20B9 40 Lakhs (Goods) or \u20B9 20 Lakhs (Services). Optional initially but recommended for B2B credibility."},
        {l:"25. Shop & Est. Act", v:"<strong>Gumasta License</strong>. Mandatory for any commercial establishment within municipal limits. Apply within 30 days of starting."},
        {l:"26. FSSAI License", v:biz.cat === "Food" ? "<strong>Mandatory.</strong> You need a State License/Registration depending on turnover. Critical for food safety compliance." : "Not Applicable for this category."},
        {l:"27. Trade License", v:"Issued by the local Municipal Corporation (MCD/BMC). Certifies that you are allowed to conduct this trade."},
        {l:"28. Factory License", v:biz.cat === "Manufacturing" ? "Required if using power with >10 workers. Regulated by the Factories Act." : "Not Applicable."},
        {l:"29. Pollution Control", v:biz.cat === "Manufacturing" ? "Consent to Establish (CTE) from State Pollution Board is required." : "Exempt / Green Category."},
        {l:"30. Fire NOC", v:"Required if the premises is larger than 500 sq.ft or involves kitchen/flammable materials."},
        {l:"31. Professional Tax", v:`Applicable in ${state}. Approx \u20B9 2,500 per year. Deducted from owner and employee salaries.`},
        {l:"32. IEC Code", v:"Import Export Code. Only required if you plan to export goods or import raw materials directly."},
        {l:"33. Sector Specific", v:biz.cat === "Education" ? "Affiliation with boards or local education dept norms." : "General commercial laws apply."}
    ]);

    // --- SECTION D: DOCUMENTATION ---
    addSec("D", "REQUIRED DOCUMENTATION (KYC)", [
        {l:"34. Aadhaar Card", v:"Must be linked with your mobile number for OTP verification on Govt portals."},
        {l:"35. PAN Card", v:"Essential for tax filing and opening a bank account."},
        {l:"36. Address Proof", v:"Personal: Voter ID/Passport. Business: Electricity Bill of the shop/office."},
        {l:"37. Rent Agreement", v:"Registered copy on Stamp Paper. Ensure the 'Commercial' usage clause is mentioned."},
        {l:"38. Utility Bill", v:"Electricity Bill (not older than 3 months) of the business premises."},
        {l:"39. Bank Proof", v:"Cancelled Cheque or Bank Statement of your Savings account (for initial registration)."},
        {l:"40. Photographs", v:"Keep 10-15 passport size photos of the proprietor/partners ready."},
        {l:"41. Partnership Deed", v:"If starting with a partner, a notarized Deed defining profit ratio is mandatory."},
        {l:"42. Project Report", v:"A detailed <strong>DPR (Detailed Project Report)</strong> containing financial projections is required for Mudra/PMEGP loans."},
        {l:"43. KYC Norms", v:"Standard CKYC will be done by the bank for the Current Account opening."}
    ]);

    // --- SECTION E: CAPITAL ---
    addSec("E", "CAPITAL ALLOCATION (BUDGETING)", [
        {l:"44. Total Project Cost", v:`<strong>${fmt(inv)}</strong>. This is the estimated total fund required to set up the business until launch.`},
        {l:"45. Rental Deposits", v:`${fmt(rentCost * 6)}. Refundable security deposit for the landlord.`},
        {l:"46. Interior & Civil", v:`${fmt(Math.round(inv * 0.15))}. Painting, tiling, false ceiling, and electric wiring work.`},
        {l:"47. Machinery & Assets", v:`${fmt(Math.round(inv * 0.40))}. Core equipment (Computers, Machines, Ovens) required for production/service.`},
        {l:"48. Tools & Utensils", v:`${fmt(Math.round(inv * 0.05))}. Small tools, kits, or serving utensils.`},
        {l:"49. Furniture & Fixtures", v:`${fmt(Math.round(inv * 0.10))}. Display racks, counters, tables, and chairs for customers.`},
        {l:"50. IT & Hardware", v:`${fmt(Math.round(inv * 0.05))}. Billing computer, printer, barcode scanner, and CCTV cameras.`},
        {l:"51. Software Costs", v:"\u20B9 15,000 (Approx). Lifetime license for Accounting/Billing software (e.g., Tally/Vyapar)."},
        {l:"52. Opening Stock", v:`${fmt(Math.round(inv * 0.15))}. Initial raw material or inventory required for the first 30 days.`},
        {l:"53. Marketing & Launch", v:"\u20B9 25,000. Inauguration event, flyers, and initial social media ads."},
        {l:"54. Licenses & Legal", v:"\u20B9 10,000. Gov fees and consultant charges."},
        {l:"55. Contingency Fund", v:`${fmt(Math.round(inv * 0.05))}. Emergency cash kept aside for price hikes or delays.`}
    ]);

    // --- SECTION F: MACHINERY ---
    addSec("F", "MACHINERY & TECHNOLOGY", [
        {l:"56. Primary Machinery", v:biz.cat === "Food" ? "Commercial Gas Range, Deep Freezers, Mixer Grinders, Exhaust System." : "Computers, Display Units, Air Conditioning, Point of Sale (POS) Terminals."},
        {l:"57. Capacity Planning", v:"Machines should handle 1.5x your projected daily sales to allow for peak hours."},
        {l:"58. Power Requirement", v:biz.cat === "Manufacturing" ? "3-Phase Industrial Connection (Load > 10KW)." : "Single Phase Commercial Connection is sufficient."},
        {l:"59. Installation Cost", v:"Factor in 5% of machine cost for wiring, plumbing, and installation labor."},
        {l:"60. Maintenance (AMC)", v:"Essential for expensive equipment. Budget 5-8% of asset value annually."},
        {l:"61. Spare Parts", v:"Keep critical spares (belts, fuses) in stock to avoid production downtime."},
        {l:"62. Depreciation", v:"Assets lose value over time. Calculate 15% depreciation per year for tax benefits."}
    ]);

    // --- SECTION G: HR ---
    addSec("G", "HUMAN RESOURCES (MANPOWER)", [
        {l:"63. Staff Requirement", v:"Start lean. <strong>2 - 3 Full-time employees</strong> are sufficient for the initial 6 months."},
        {l:"64. Skill Mix", v:"1 Manager/Cashier (Trustworthy) + 2 Helpers/Staff (Hardworking)."},
        {l:"65. Salary Range", v:`${staffSal} per month per employee (varies by skill).`},
        {l:"66. Manager Salary", v:isMetro ? "\u20B9 22,000 - 28,000" : "\u20B9 15,000 - 18,000. Pay higher for experience."},
        {l:"67. Training", v:"1 week of on-the-job training is required for customer handling and machine usage."},
        {l:"68. Recruitment Source", v:"Local references, newspaper classifieds, or 'Hiring' poster outside the shop."},
        {l:"69. Staff Welfare", v:"Budget \u20B9 2,000/month for staff tea/snacks. Happy staff leads to better service."},
        {l:"70. Labour Compliance", v:"Maintain a Muster Roll (Attendance Register). If >10 staff, PF/ESIC registration becomes mandatory."}
    ]);

    // --- SECTION H: OPEX ---
    addSec("H", "MONTHLY OPERATING EXPENSES", [
        {l:"71. Rent", v:`${fmt(rentCost)}. This is your primary fixed cost.`},
        {l:"72. Electricity Bill", v:`${fmt(Math.round(op * 0.15))}. Commercial tariff rates apply (higher than residential).`},
        {l:"73. Water Charges", v:"\u20B9 500 - \u20B9 1,000 (Commercial supply or tanker)."},
        {l:"74. Internet/Wi-Fi", v:"\u20B9 1,000. High-speed broadband for billing and payments."},
        {l:"75. Transport/Logistics", v:`${fmt(Math.round(op * 0.10))}. Cost of bringing raw material to the shop.`},
        {l:"76. Repairs & Maintenance", v:"\u20B9 2,000. Buffer for minor electrical or plumbing fixes."},
        {l:"77. Consumables", v:"\u20B9 3,000. Cleaning supplies, stationery, printing paper, bags."},
        {l:"78. Accounting Fees", v:"\u20B9 3,000. Part-time accountant or CA fees for GST filing."},
        {l:"79. Software Subscription", v:"\u20B9 500. Monthly cost for CRM or Billing software renewals."},
        {l:"80. Security/Housekeeping", v:"Optional. Can be self-managed or shared cost in a complex."},
        {l:"81. Insurance Premium", v:"\u20B9 1,000 (Amortized). Fire/Burglary insurance is critical."}
    ]);

    // --- SECTION I: FINANCE ---
    addSec("I", "FINANCING & LOAN ELIGIBILITY", [
        {l:"82. Own Contribution", v:shortfall > 0 ? `You have <strong>${fmt(budget)}</strong> (${Math.round((budget/inv)*100)}%). Banks require 10-25% margin money.` : "100% Self Funded. No bank dependency."},
        {l:"83. Loan Requirement", v:shortfall > 0 ? `You need a loan of <strong>${fmt(shortfall)}</strong> to close the gap.` : "Nil."},
        {l:"84. Type of Loan", v:"Term Loan (for Machinery/Furniture) + Cash Credit (for Working Capital)."},
        {l:"85. Interest Rate", v:"Expect <strong>9% to 11% p.a.</strong> under Govt schemes like Mudra."},
        {l:"86. Loan Tenure", v:"Typically 5 Years (60 Months) for Term Loans. CC is renewable yearly."},
        {l:"87. Estimated EMI", v:shortfall > 0 ? `Approx <strong>${fmt(emi)}</strong> per month.` : "Nil"},
        {l:"88. Collateral", v:shortfall < 1000000 ? "<strong>Not Required</strong> under CGTMSE or Mudra Scheme." : "May be required for higher amounts."},
        {l:"89. Margin Money", v:"You must invest 20-25% of the total project cost from your own pocket."},
        {l:"90. Credit Score", v:"A CIBIL Score of <strong>700+</strong> is highly recommended for quick approval."},
        {l:"91. Preferred Banks", v:"Public Sector Banks (SBI, Canara, PNB, BOB) offer the best MSME rates."}
    ]);

    // --- SECTION J: SCHEMES ---
    addSec("J", "GOVERNMENT SCHEMES (SUBSIDY)", [
        {l:"92. PMEGP Scheme", v:"<strong>Prime Minister's Employment Generation Programme.</strong> Offers 15-35% Subsidy on project cost. Best for Manufacturing units."},
        {l:"93. Mudra Shishu", v:"Loan up to \u20B9 50,000. No processing fee. Good for very small starts."},
        {l:"94. Mudra Kishor", v:"Loan from \u20B9 50,000 to \u20B9 5 Lakhs. Ideal for this business scale."},
        {l:"95. Mudra Tarun", v:"Loan from \u20B9 5 Lakhs to \u20B9 10 Lakhs. Requires strict scrutiny."},
        {l:"96. CGTMSE Cover", v:"Credit Guarantee scheme. Govt pays the bank if you default. Enabling this costs 1-2% fee."},
        {l:"97. Stand-Up India", v:"Exclusive for SC/ST or Women Entrepreneurs. Loans > \u20B9 10 Lakhs."},
        {l:"98. PMFME Scheme", v:"Specific for Food Processing units. Offers 35% subsidy and technical support."},
        {l:"99. State Policies", v:`Check ${state} state industrial policy for interest subvention (rebate).`},
        {l:"100. MSME Databank", v:"Register to get priority in Govt procurement and trade fairs."}
    ]);

    // --- SECTION K: MARKETING ---
    addSec("K", "MARKETING & SALES STRATEGY", [
        {l:"101. Branding", v:"Invest in a professional Logo and a clear, lit-up Signboard. It builds trust."},
        {l:"102. Design Budget", v:"\u20B9 3,000 - \u20B9 5,000 for logo, menu, and visiting card design."},
        {l:"103. Website Presence", v:"A Google My Business listing is mandatory. A basic landing page website adds credibility."},
        {l:"104. Social Media", v:"Create Instagram/Facebook pages. Post photos of your products/shop weekly."},
        {l:"105. Online Ads", v:"Run Google Local Ads targeting 5km radius. Budget: \u20B9 200/day."},
        {l:"106. Offline Marketing", v:"Newspaper inserts (Pamphlets) in the local neighborhood are very effective."},
        {l:"107. Sales Channels", v:"Primary: In-store. Secondary: Delivery apps or WhatsApp orders."},
        {l:"108. CAC (Acquisition)", v:"Target a Customer Acquisition Cost of < \u20B9 100 per new customer."},
        {l:"109. Retention", v:"Start a Loyalty Program (e.g., '10th Service Free'). Collect customer phone numbers."}
    ]);

    // --- SECTION L: PROFITABILITY ---
    const dailySales = Math.round((op * 4.0) / 25);
    addSec("L", "REVENUE & PROFITABILITY", [
        {l:"110. Pricing Strategy", v:"Competitive Pricing initially to gain market share, then move to Value-based."},
        {l:"111. Average Ticket Size", v:biz.cat==="Food" ? "\u20B9 200 - \u20B9 400 per bill" : "\u20B9 500 - \u20B9 1,500 per transaction."},
        {l:"112. Target Sales Vol", v:`You need approx. <strong>${dailySales} orders per day</strong> to hit targets.`},
        {l:"113. Net Margin", v:`<strong>${(biz.margin*100).toFixed(0)}%</strong> (Net Take-home Profit after all expenses).`},
        {l:"114. Monthly Net Profit", v:`Projected: <strong>${fmt(Math.round(op * 4.0 * biz.margin))}</strong> in stable phase.`},
        {l:"115. Break-Even Point", v:`${document.getElementById("breakEven").innerText}. (Time to recover initial investment).`},
        {l:"116. ROI (Yearly)", v:"Target 30% - 40% Return on Investment per annum."},
        {l:"117. Cash Flow Cycle", v:"B2C business ensures immediate cash flow (Daily). No credit period issues."}
    ]);

    // --- SECTION M: RISK ---
    addSec("M", "RISK ANALYSIS & MITIGATION", [
        {l:"118. Market Risk", v:biz.risk.m > 50 ? "<strong>High.</strong> Trend changes or low demand." : "<strong>Moderate.</strong> Steady demand expected."},
        {l:"119. Competition", v:"Expect strong competition from established local players and online giants."},
        {l:"120. Regulatory Risk", v:"Low, provided you maintain licenses (FSSAI/GST) and file returns on time."},
        {l:"121. Operational Risk", v:"Staff turnover (employees leaving) is the biggest headache. Have backup contacts."},
        {l:"122. Financial Risk", v:"Cash crunch in the first 6 months. Maintain the contingency fund strictly."},
        {l:"123. Supply Chain", v:"Raw material price fluctuation. Fix rates with vendors for 6 months."},
        {l:"124. Insurance", v:"<strong>Mandatory.</strong> Take a 'Shopkeeper's Policy' covering Fire, Burglary, and Cash in Transit."}
    ]);

    // --- SECTION N: GROWTH ---
    addSec("N", "SCALABILITY & FUTURE GROWTH", [
        {l:"125. Expansion Plan", v:"Stabilize for 18 months. Then look for a second location in a nearby area."},
        {l:"126. Franchising", v:"Once you have a profitable model, document your Standard Operating Procedures (SOPs) to sell franchises."},
        {l:"127. Product Line", v:"Add complementary products (e.g., if selling tea, add snacks/cookies) to increase bill value."},
        {l:"128. Geographic", v:"Expand delivery radius using 3rd party logistics (Dunzo/Porter)."},
        {l:"129. Tech Upgrade", v:"Invest in your own ordering App/Website to save commissions paid to aggregators."},
        {l:"130. Exit Strategy", v:"Build brand value to eventually sell the business or run it on auto-pilot with a manager."}
    ]);

    // --- SECTION O: DIGITAL ---
    addSec("O", "DIGITAL TOOLS & AUTOMATION", [
        {l:"131. Billing Software", v:"Use <strong>Vyapar, Tally, or Petpooja</strong>. Do not use manual paper billing."},
        {l:"132. Inventory Mgmt", v:"Track stock levels digitally to prevent theft and wastage."},
        {l:"133. CRM Tool", v:"Use WhatsApp Business API to send offers to existing customers."},
        {l:"134. Payments", v:"Install All-in-One QR Code (PhonePe/Paytm/GPay) and a Card Swipe Machine."},
        {l:"135. Data Backup", v:"Ensure your billing data is synced to the Cloud (Google Drive) daily."},
        {l:"136. Cyber Security", v:"Basic Antivirus and secure Wi-Fi password are sufficient."}
    ]);

    // --- SECTION P: ESG ---
    addSec("P", "SUSTAINABILITY (ESG)", [
        {l:"137. Energy Efficiency", v:"Use LED lights and 5-Star rated appliances to reduce electricity bills by 20%."},
        {l:"138. Waste Management", v:"Segregate Wet/Dry waste. Sell dry waste (cartons) to scrap dealers for petty cash."},
        {l:"139. Packaging", v:"Avoid single-use plastic. Use paper bags or cloth bags to build an eco-friendly brand image."},
        {l:"140. Local Sourcing", v:"Buy from local farmers/vendors to reduce transport carbon footprint and cost."},
        {l:"141. CSR", v:"Small donations to local community events help build local goodwill."}
    ]);

    // --- SECTION Q: VERDICT ---
    addSec("Q", "FINAL DECISION PARAMETERS", [
        {l:"142. Skill Match", v: document.getElementById("skillInput").value >= 2 ? "<strong>Good Match.</strong> You seem to have the required aptitude." : "<strong>Gap Identified.</strong> You need training or a skilled partner."},
        {l:"143. Time Commitment", v:"<strong>High.</strong> Expect to put in 10-12 hours daily for the first year."},
        {l:"144. Stress Level", v:"Moderate to High. Dealing with staff and customers daily can be tiring."},
        {l:"145. Family Support", v:"Crucial. You will need their support for funding or managing the shop in your absence."},
        {l:"146. Complexity", v: biz.risk.o > 60 ? "<strong>Complex.</strong> Requires technical knowledge." : "<strong>Simple.</strong> Easy to learn and operate."},
        {l:"147. Capital Adequacy", v: shortfall > 0 ? `<span style='color:#ef4444'>Deficit. Loan Required.</span>` : `<span style='color:#10b981'>Sufficient Funds Available.</span>`},
        {l:"148. FINAL VERDICT", v: document.getElementById("bfiScore").innerText > 60 ? "<span style='color:green; font-weight:bold; font-size:1.2rem;'>GO AHEAD \u2705</span>" : "<span style='color:red; font-weight:bold; font-size:1.2rem;'>RE-EVALUATE \uD83D\uDED1</span>"}
    ]);
}
    </script>
</body>
</html>
